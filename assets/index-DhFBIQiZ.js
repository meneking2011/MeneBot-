(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function xy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wh={exports:{}},Sa={},Gh={exports:{}},Se={};var Hm;function lw(){if(Hm)return Se;Hm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.iterator;function D(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Y={};function H(P,j,le){this.props=P,this.context=j,this.refs=Y,this.updater=le||z}H.prototype.isReactComponent={},H.prototype.setState=function(P,j){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,j,"setState")},H.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function me(){}me.prototype=H.prototype;function _e(P,j,le){this.props=P,this.context=j,this.refs=Y,this.updater=le||z}var ve=_e.prototype=new me;ve.constructor=_e,X(ve,H.prototype),ve.isPureReactComponent=!0;var Ne=Array.isArray,be=Object.prototype.hasOwnProperty,Re={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(P,j,le){var ue,ae={},we=null,Ve=null;if(j!=null)for(ue in j.ref!==void 0&&(Ve=j.ref),j.key!==void 0&&(we=""+j.key),j)be.call(j,ue)&&!N.hasOwnProperty(ue)&&(ae[ue]=j[ue]);var Oe=arguments.length-2;if(Oe===1)ae.children=le;else if(1<Oe){for(var Be=Array(Oe),Bt=0;Bt<Oe;Bt++)Be[Bt]=arguments[Bt+2];ae.children=Be}if(P&&P.defaultProps)for(ue in Oe=P.defaultProps,Oe)ae[ue]===void 0&&(ae[ue]=Oe[ue]);return{$$typeof:i,type:P,key:we,ref:Ve,props:ae,_owner:Re.current}}function R(P,j){return{$$typeof:i,type:P.type,key:j,ref:P.ref,props:P.props,_owner:P._owner}}function x(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function k(P){var j={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return j[le]})}var O=/\/+/g;function S(P,j){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):j.toString(36)}function ze(P,j,le,ue,ae){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var Ve=!1;if(P===null)Ve=!0;else switch(we){case"string":case"number":Ve=!0;break;case"object":switch(P.$$typeof){case i:case e:Ve=!0}}if(Ve)return Ve=P,ae=ae(Ve),P=ue===""?"."+S(Ve,0):ue,Ne(ae)?(le="",P!=null&&(le=P.replace(O,"$&/")+"/"),ze(ae,j,le,"",function(Bt){return Bt})):ae!=null&&(x(ae)&&(ae=R(ae,le+(!ae.key||Ve&&Ve.key===ae.key?"":(""+ae.key).replace(O,"$&/")+"/")+P)),j.push(ae)),1;if(Ve=0,ue=ue===""?".":ue+":",Ne(P))for(var Oe=0;Oe<P.length;Oe++){we=P[Oe];var Be=ue+S(we,Oe);Ve+=ze(we,j,le,Be,ae)}else if(Be=D(P),typeof Be=="function")for(P=Be.call(P),Oe=0;!(we=P.next()).done;)we=we.value,Be=ue+S(we,Oe++),Ve+=ze(we,j,le,Be,ae);else if(we==="object")throw j=String(P),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Ve}function lt(P,j,le){if(P==null)return P;var ue=[],ae=0;return ze(P,ue,"","",function(we){return j.call(le,we,ae++)}),ue}function gt(P){if(P._status===-1){var j=P._result;j=j(),j.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=j)}if(P._status===1)return P._result.default;throw P._result}var qe={current:null},Z={transition:null},ce={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:Re};function B(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:lt,forEach:function(P,j,le){lt(P,function(){j.apply(this,arguments)},le)},count:function(P){var j=0;return lt(P,function(){j++}),j},toArray:function(P){return lt(P,function(j){return j})||[]},only:function(P){if(!x(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Se.Component=H,Se.Fragment=t,Se.Profiler=o,Se.PureComponent=_e,Se.StrictMode=s,Se.Suspense=y,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Se.act=B,Se.cloneElement=function(P,j,le){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ue=X({},P.props),ae=P.key,we=P.ref,Ve=P._owner;if(j!=null){if(j.ref!==void 0&&(we=j.ref,Ve=Re.current),j.key!==void 0&&(ae=""+j.key),P.type&&P.type.defaultProps)var Oe=P.type.defaultProps;for(Be in j)be.call(j,Be)&&!N.hasOwnProperty(Be)&&(ue[Be]=j[Be]===void 0&&Oe!==void 0?Oe[Be]:j[Be])}var Be=arguments.length-2;if(Be===1)ue.children=le;else if(1<Be){Oe=Array(Be);for(var Bt=0;Bt<Be;Bt++)Oe[Bt]=arguments[Bt+2];ue.children=Oe}return{$$typeof:i,type:P.type,key:ae,ref:we,props:ue,_owner:Ve}},Se.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:u,_context:P},P.Consumer=P},Se.createElement=I,Se.createFactory=function(P){var j=I.bind(null,P);return j.type=P,j},Se.createRef=function(){return{current:null}},Se.forwardRef=function(P){return{$$typeof:m,render:P}},Se.isValidElement=x,Se.lazy=function(P){return{$$typeof:w,_payload:{_status:-1,_result:P},_init:gt}},Se.memo=function(P,j){return{$$typeof:v,type:P,compare:j===void 0?null:j}},Se.startTransition=function(P){var j=Z.transition;Z.transition={};try{P()}finally{Z.transition=j}},Se.unstable_act=B,Se.useCallback=function(P,j){return qe.current.useCallback(P,j)},Se.useContext=function(P){return qe.current.useContext(P)},Se.useDebugValue=function(){},Se.useDeferredValue=function(P){return qe.current.useDeferredValue(P)},Se.useEffect=function(P,j){return qe.current.useEffect(P,j)},Se.useId=function(){return qe.current.useId()},Se.useImperativeHandle=function(P,j,le){return qe.current.useImperativeHandle(P,j,le)},Se.useInsertionEffect=function(P,j){return qe.current.useInsertionEffect(P,j)},Se.useLayoutEffect=function(P,j){return qe.current.useLayoutEffect(P,j)},Se.useMemo=function(P,j){return qe.current.useMemo(P,j)},Se.useReducer=function(P,j,le){return qe.current.useReducer(P,j,le)},Se.useRef=function(P){return qe.current.useRef(P)},Se.useState=function(P){return qe.current.useState(P)},Se.useSyncExternalStore=function(P,j,le){return qe.current.useSyncExternalStore(P,j,le)},Se.useTransition=function(){return qe.current.useTransition()},Se.version="18.3.1",Se}var Wm;function Uf(){return Wm||(Wm=1,Gh.exports=lw()),Gh.exports}var Gm;function uw(){if(Gm)return Sa;Gm=1;var i=Uf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,y,v){var w,A={},D=null,z=null;v!==void 0&&(D=""+v),y.key!==void 0&&(D=""+y.key),y.ref!==void 0&&(z=y.ref);for(w in y)s.call(y,w)&&!u.hasOwnProperty(w)&&(A[w]=y[w]);if(m&&m.defaultProps)for(w in y=m.defaultProps,y)A[w]===void 0&&(A[w]=y[w]);return{$$typeof:e,type:m,key:D,ref:z,props:A,_owner:o.current}}return Sa.Fragment=t,Sa.jsx=h,Sa.jsxs=h,Sa}var Km;function cw(){return Km||(Km=1,Wh.exports=uw()),Wh.exports}var Ae=cw(),ot=Uf();const hw=xy(ot);var _u={},Kh={exports:{}},Xt={},Qh={exports:{}},Xh={};var Qm;function fw(){return Qm||(Qm=1,(function(i){function e(Z,ce){var B=Z.length;Z.push(ce);e:for(;0<B;){var P=B-1>>>1,j=Z[P];if(0<o(j,ce))Z[P]=ce,Z[B]=j,B=P;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ce=Z[0],B=Z.pop();if(B!==ce){Z[0]=B;e:for(var P=0,j=Z.length,le=j>>>1;P<le;){var ue=2*(P+1)-1,ae=Z[ue],we=ue+1,Ve=Z[we];if(0>o(ae,B))we<j&&0>o(Ve,ae)?(Z[P]=Ve,Z[we]=B,P=we):(Z[P]=ae,Z[ue]=B,P=ue);else if(we<j&&0>o(Ve,B))Z[P]=Ve,Z[we]=B,P=we;else break e}}return ce}function o(Z,ce){var B=Z.sortIndex-ce.sortIndex;return B!==0?B:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var y=[],v=[],w=1,A=null,D=3,z=!1,X=!1,Y=!1,H=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(Z){for(var ce=t(v);ce!==null;){if(ce.callback===null)s(v);else if(ce.startTime<=Z)s(v),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=t(v)}}function Ne(Z){if(Y=!1,ve(Z),!X)if(t(y)!==null)X=!0,gt(be);else{var ce=t(v);ce!==null&&qe(Ne,ce.startTime-Z)}}function be(Z,ce){X=!1,Y&&(Y=!1,me(I),I=-1),z=!0;var B=D;try{for(ve(ce),A=t(y);A!==null&&(!(A.expirationTime>ce)||Z&&!k());){var P=A.callback;if(typeof P=="function"){A.callback=null,D=A.priorityLevel;var j=P(A.expirationTime<=ce);ce=i.unstable_now(),typeof j=="function"?A.callback=j:A===t(y)&&s(y),ve(ce)}else s(y);A=t(y)}if(A!==null)var le=!0;else{var ue=t(v);ue!==null&&qe(Ne,ue.startTime-ce),le=!1}return le}finally{A=null,D=B,z=!1}}var Re=!1,N=null,I=-1,R=5,x=-1;function k(){return!(i.unstable_now()-x<R)}function O(){if(N!==null){var Z=i.unstable_now();x=Z;var ce=!0;try{ce=N(!0,Z)}finally{ce?S():(Re=!1,N=null)}}else Re=!1}var S;if(typeof _e=="function")S=function(){_e(O)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,lt=ze.port2;ze.port1.onmessage=O,S=function(){lt.postMessage(null)}}else S=function(){H(O,0)};function gt(Z){N=Z,Re||(Re=!0,S())}function qe(Z,ce){I=H(function(){Z(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){X||z||(X=!0,gt(be))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_getFirstCallbackNode=function(){return t(y)},i.unstable_next=function(Z){switch(D){case 1:case 2:case 3:var ce=3;break;default:ce=D}var B=D;D=ce;try{return Z()}finally{D=B}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var B=D;D=Z;try{return ce()}finally{D=B}},i.unstable_scheduleCallback=function(Z,ce,B){var P=i.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?P+B:P):B=P,Z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=B+j,Z={id:w++,callback:ce,priorityLevel:Z,startTime:B,expirationTime:j,sortIndex:-1},B>P?(Z.sortIndex=B,e(v,Z),t(y)===null&&Z===t(v)&&(Y?(me(I),I=-1):Y=!0,qe(Ne,B-P))):(Z.sortIndex=j,e(y,Z),X||z||(X=!0,gt(be))),Z},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Z){var ce=D;return function(){var B=D;D=ce;try{return Z.apply(this,arguments)}finally{D=B}}}})(Xh)),Xh}var Xm;function dw(){return Xm||(Xm=1,Qh.exports=fw()),Qh.exports}var Ym;function pw(){if(Ym)return Xt;Ym=1;var i=Uf(),e=dw();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},A={};function D(n){return y.call(A,n)?!0:y.call(w,n)?!1:v.test(n)?A[n]=!0:(w[n]=!0,!1)}function z(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function X(n,r,a,c){if(r===null||typeof r>"u"||z(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Y(n,r,a,c,f,d,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=d,this.removeEmptyString=_}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){H[n]=new Y(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];H[r]=new Y(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){H[n]=new Y(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){H[n]=new Y(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){H[n]=new Y(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){H[n]=new Y(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){H[n]=new Y(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){H[n]=new Y(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){H[n]=new Y(n,5,!1,n.toLowerCase(),null,!1,!1)});var me=/[\-:]([a-z])/g;function _e(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(me,_e);H[r]=new Y(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(me,_e);H[r]=new Y(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(me,_e);H[r]=new Y(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){H[n]=new Y(n,1,!1,n.toLowerCase(),null,!1,!1)}),H.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){H[n]=new Y(n,1,!1,n.toLowerCase(),null,!0,!0)});function ve(n,r,a,c){var f=H.hasOwnProperty(r)?H[r]:null;(f!==null?f.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(X(r,a,f,c)&&(a=null),c||f===null?D(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(r=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(r):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var Ne=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),Re=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),qe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var B=Object.assign,P;function j(n){if(P===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);P=r&&r[1]||""}return`
`+P+n}var le=!1;function ue(n,r){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var c=F}Reflect.construct(n,[],r)}else{try{r.call()}catch(F){c=F}n.call(r.prototype)}else{try{throw Error()}catch(F){c=F}n()}}catch(F){if(F&&c&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),d=c.stack.split(`
`),_=f.length-1,T=d.length-1;1<=_&&0<=T&&f[_]!==d[T];)T--;for(;1<=_&&0<=T;_--,T--)if(f[_]!==d[T]){if(_!==1||T!==1)do if(_--,T--,0>T||f[_]!==d[T]){var C=`
`+f[_].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=_&&0<=T);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?j(n):""}function ae(n){switch(n.tag){case 5:return j(n.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return n=ue(n.type,!1),n;case 11:return n=ue(n.type.render,!1),n;case 1:return n=ue(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case Re:return"Portal";case R:return"Profiler";case I:return"StrictMode";case S:return"Suspense";case ze:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case O:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case lt:return r=n.displayName||null,r!==null?r:we(n.type)||"Memo";case gt:r=n._payload,n=n._init;try{return we(n(r))}catch{}}return null}function Ve(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Bt(n){var r=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){c=""+_,d.call(this,_)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ys(n){n._valueTracker||(n._valueTracker=Bt(n))}function No(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function xr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function _s(n,r){var a=r.checked;return B({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function rl(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Oe(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function vs(n,r){r=r.checked,r!=null&&ve(n,"checked",r,!1)}function Di(n,r){vs(n,r);var a=Oe(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ut(n,r.type,a):r.hasOwnProperty("defaultValue")&&ut(n,r.type,Oe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Do(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ut(n,r,a){(r!=="number"||xr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var rt=Array.isArray;function En(n,r,a,c){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Oe(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Vo(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return B({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function xo(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(rt(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Oe(a)}}function il(n,r){var a=Oe(r.value),c=Oe(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Or(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Oo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Es(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Oo(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Lr,sl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,f)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Lr=Lr||document.createElement("div"),Lr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Lr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Vi(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ol=["Webkit","ms","Moz","O"];Object.keys(Mr).forEach(function(n){ol.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Mr[r]=Mr[n]})});function br(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Mr.hasOwnProperty(n)&&Mr[n]?(""+r).trim():r+"px"}function ws(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=br(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Lo=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(n,r){if(r){if(Lo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Ts(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fr=null;function Is(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var or=null,ar=null,tt=null;function Mo(n){if(n=ua(n)){if(typeof or!="function")throw Error(t(280));var r=n.stateNode;r&&(r=xl(r),or(n.stateNode,n.type,r))}}function Ur(n){ar?tt?tt.push(n):tt=[n]:ar=n}function jr(){if(ar){var n=ar,r=tt;if(tt=ar=null,Mo(n),r)for(n=0;n<r.length;n++)Mo(r[n])}}function al(n,r){return n(r)}function ll(){}var xn=!1;function ul(n,r,a){if(xn)return n(r,a);xn=!0;try{return al(n,r,a)}finally{xn=!1,(ar!==null||tt!==null)&&(ll(),jr())}}function xi(n,r){var a=n.stateNode;if(a===null)return null;var c=xl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var zr=!1;if(m)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){zr=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{zr=!1}function cl(n,r,a,c,f,d,_,T,C){var F=Array.prototype.slice.call(arguments,3);try{r.apply(a,F)}catch(G){this.onError(G)}}var lr=!1,On=null,Ss=!1,hn=null,hl={onError:function(n){lr=!0,On=n}};function fl(n,r,a,c,f,d,_,T,C){lr=!1,On=null,cl.apply(hl,arguments)}function bo(n,r,a,c,f,d,_,T,C){if(fl.apply(this,arguments),lr){if(lr){var F=On;lr=!1,On=null}else throw Error(t(198));Ss||(Ss=!0,hn=F)}}function Tn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Fo(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function dl(n){if(Tn(n)!==n)throw Error(t(188))}function pl(n){var r=n.alternate;if(!r){if(r=Tn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return dl(f),n;if(d===c)return dl(f),r;d=d.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,c=d;break}if(T===c){_=!0,c=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,c=f;break}if(T===c){_=!0,c=d,a=f;break}T=T.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function ml(n){return n=pl(n),n!==null?Oi(n):null}function Oi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Oi(n);if(r!==null)return r;n=n.sibling}return null}var Uo=e.unstable_scheduleCallback,As=e.unstable_cancelCallback,Li=e.unstable_shouldYield,ur=e.unstable_requestPaint,Ge=e.unstable_now,Ic=e.unstable_getCurrentPriorityLevel,Rs=e.unstable_ImmediatePriority,jo=e.unstable_UserBlockingPriority,Mi=e.unstable_NormalPriority,zo=e.unstable_LowPriority,Cs=e.unstable_IdlePriority,bi=null,Zt=null;function gl(n){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(bi,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Fi,Ln=Math.log,fn=Math.LN2;function Fi(n){return n>>>=0,n===0?32:31-(Ln(n)/fn|0)|0}var Mn=64,$r=4194304;function Fe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function cr(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,d=n.pingedLanes,_=a&268435455;if(_!==0){var T=_&~f;T!==0?c=Fe(T):(d&=_,d!==0&&(c=Fe(d)))}else _=a&~f,_!==0?c=Fe(_):d!==0&&(c=Fe(d));if(c===0)return 0;if(r!==0&&r!==c&&(r&f)===0&&(f=c&-c,d=r&-r,f>=d||f===16&&(d&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-en(r),f=1<<a,c|=n[a],r&=~f;return c}function Ui(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes;0<d;){var _=31-en(d),T=1<<_,C=f[_];C===-1?((T&a)===0||(T&c)!==0)&&(f[_]=Ui(T,r)):C<=r&&(n.expiredLanes|=T),d&=~T}}function Bo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $o(){var n=Mn;return Mn<<=1,(Mn&4194240)===0&&(Mn=64),n}function qo(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function zi(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-en(r),n[r]=a}function Sc(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-en(a),d=1<<f;r[f]=0,c[f]=-1,n[f]=-1,a&=~d}}function Ho(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-en(a),f=1<<c;f&r|n[c]&r&&(n[c]|=r),a&=~f}}var De=0;function bn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Wo,Ps,Go,Ko,Qo,Fn=!1,ks=[],Un=null,jn=null,At=null,Bi=new Map,hr=new Map,tn=[],yl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qr(n,r){switch(n){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Bi.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(r.pointerId)}}function In(n,r,a,c,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:d,targetContainers:[f]},r!==null&&(r=ua(r),r!==null&&Ps(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function _l(n,r,a,c,f){switch(r){case"focusin":return Un=In(Un,n,r,a,c,f),!0;case"dragenter":return jn=In(jn,n,r,a,c,f),!0;case"mouseover":return At=In(At,n,r,a,c,f),!0;case"pointerover":var d=f.pointerId;return Bi.set(d,In(Bi.get(d)||null,n,r,a,c,f)),!0;case"gotpointercapture":return d=f.pointerId,hr.set(d,In(hr.get(d)||null,n,r,a,c,f)),!0}return!1}function Ns(n){var r=Wi(n.target);if(r!==null){var a=Tn(r);if(a!==null){if(r=a.tag,r===13){if(r=Fo(a),r!==null){n.blockedOn=r,Qo(n.priority,function(){Go(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $e(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ds(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Fr=c,a.target.dispatchEvent(c),Fr=null}else return r=ua(a),r!==null&&Ps(r),n.blockedOn=a,!1;r.shift()}return!0}function vl(n,r,a){$e(n)&&a.delete(r)}function Ac(){Fn=!1,Un!==null&&$e(Un)&&(Un=null),jn!==null&&$e(jn)&&(jn=null),At!==null&&$e(At)&&(At=null),Bi.forEach(vl),hr.forEach(vl)}function Hr(n,r){n.blockedOn===r&&(n.blockedOn=null,Fn||(Fn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ac)))}function Wr(n){function r(f){return Hr(f,n)}if(0<ks.length){Hr(ks[0],n);for(var a=1;a<ks.length;a++){var c=ks[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Un!==null&&Hr(Un,n),jn!==null&&Hr(jn,n),At!==null&&Hr(At,n),Bi.forEach(r),hr.forEach(r),a=0;a<tn.length;a++)c=tn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<tn.length&&(a=tn[0],a.blockedOn===null);)Ns(a),a.blockedOn===null&&tn.shift()}var fr=Ne.ReactCurrentBatchConfig,dr=!0;function zn(n,r,a,c){var f=De,d=fr.transition;fr.transition=null;try{De=1,Xo(n,r,a,c)}finally{De=f,fr.transition=d}}function El(n,r,a,c){var f=De,d=fr.transition;fr.transition=null;try{De=4,Xo(n,r,a,c)}finally{De=f,fr.transition=d}}function Xo(n,r,a,c){if(dr){var f=Ds(n,r,a,c);if(f===null)Mc(n,r,c,Bn,a),qr(n,c);else if(_l(f,n,r,a,c))c.stopPropagation();else if(qr(n,c),r&4&&-1<yl.indexOf(n)){for(;f!==null;){var d=ua(f);if(d!==null&&Wo(d),d=Ds(n,r,a,c),d===null&&Mc(n,r,c,Bn,a),d===f)break;f=d}f!==null&&c.stopPropagation()}else Mc(n,r,c,null,a)}}var Bn=null;function Ds(n,r,a,c){if(Bn=null,n=Is(c),n=Wi(n),n!==null)if(r=Tn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Fo(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Bn=n,null}function Vs(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ic()){case Rs:return 1;case jo:return 4;case Mi:case zo:return 16;case Cs:return 536870912;default:return 16}default:return 16}}var nn=null,xs=null,pr=null;function wl(){if(pr)return pr;var n,r=xs,a=r.length,c,f="value"in nn?nn.value:nn.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var _=a-n;for(c=1;c<=_&&r[a-c]===f[d-c];c++);return pr=f.slice(n,1<c?1-c:void 0)}function $i(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function $n(){return!0}function Yo(){return!1}function xt(n){function r(a,c,f,d,_){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?$n:Yo,this.isPropagationStopped=Yo,this}return B(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),r}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=xt(qn),Gr=B({},qn,{view:0,detail:0}),Os=xt(Gr),Ls,Ms,rn,Hi=B({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Te,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rn&&(rn&&n.type==="mousemove"?(Ls=n.screenX-rn.screenX,Ms=n.screenY-rn.screenY):Ms=Ls=0,rn=n),Ls)},movementY:function(n){return"movementY"in n?n.movementY:Ms}}),Jo=xt(Hi),Tl=B({},Hi,{dataTransfer:0}),Il=xt(Tl),bs=B({},Gr,{relatedTarget:0}),Rt=xt(bs),Sl=B({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Al=xt(Sl),Kr=B({},qn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),l=xt(Kr),p=B({},qn,{data:0}),g=xt(p),E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=U[n])?!!r[n]:!1}function Te(){return J}var it=B({},Gr,{key:function(n){if(n.key){var r=E[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=$i(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Te,charCode:function(n){return n.type==="keypress"?$i(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$i(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),je=xt(it),ct=B({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sn=xt(ct),mr=B({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Te}),Hn=xt(mr),Wn=B({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fs=xt(Wn),Zo=B({},Hi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=xt(Zo),rE=[9,13,27,32],Rc=m&&"CompositionEvent"in window,ea=null;m&&"documentMode"in document&&(ea=document.documentMode);var iE=m&&"TextEvent"in window&&!ea,bd=m&&(!Rc||ea&&8<ea&&11>=ea),Fd=" ",Ud=!1;function jd(n,r){switch(n){case"keyup":return rE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Us=!1;function sE(n,r){switch(n){case"compositionend":return zd(r);case"keypress":return r.which!==32?null:(Ud=!0,Fd);case"textInput":return n=r.data,n===Fd&&Ud?null:n;default:return null}}function oE(n,r){if(Us)return n==="compositionend"||!Rc&&jd(n,r)?(n=wl(),pr=xs=nn=null,Us=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return bd&&r.locale!=="ko"?null:r.data;default:return null}}var aE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!aE[n.type]:r==="textarea"}function $d(n,r,a,c){Ur(c),r=Nl(r,"onChange"),0<r.length&&(a=new qi("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var ta=null,na=null;function lE(n){ap(n,0)}function Rl(n){var r=qs(n);if(No(r))return n}function uE(n,r){if(n==="change")return r}var qd=!1;if(m){var Cc;if(m){var Pc="oninput"in document;if(!Pc){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),Pc=typeof Hd.oninput=="function"}Cc=Pc}else Cc=!1;qd=Cc&&(!document.documentMode||9<document.documentMode)}function Wd(){ta&&(ta.detachEvent("onpropertychange",Gd),na=ta=null)}function Gd(n){if(n.propertyName==="value"&&Rl(na)){var r=[];$d(r,na,n,Is(n)),ul(lE,r)}}function cE(n,r,a){n==="focusin"?(Wd(),ta=r,na=a,ta.attachEvent("onpropertychange",Gd)):n==="focusout"&&Wd()}function hE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Rl(na)}function fE(n,r){if(n==="click")return Rl(r)}function dE(n,r){if(n==="input"||n==="change")return Rl(r)}function pE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Sn=typeof Object.is=="function"?Object.is:pE;function ra(n,r){if(Sn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!y.call(r,f)||!Sn(n[f],r[f]))return!1}return!0}function Kd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qd(n,r){var a=Kd(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kd(a)}}function Xd(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Xd(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Yd(){for(var n=window,r=xr();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=xr(n.document)}return r}function kc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function mE(n){var r=Yd(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Xd(a.ownerDocument.documentElement,a)){if(c!==null&&kc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,d=Math.min(c.start,f);c=c.end===void 0?d:Math.min(c.end,f),!n.extend&&d>c&&(f=c,c=d,d=f),f=Qd(a,d);var _=Qd(a,c);f&&_&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),n.removeAllRanges(),d>c?(n.addRange(r),n.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var gE=m&&"documentMode"in document&&11>=document.documentMode,js=null,Nc=null,ia=null,Dc=!1;function Jd(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dc||js==null||js!==xr(c)||(c=js,"selectionStart"in c&&kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ia&&ra(ia,c)||(ia=c,c=Nl(Nc,"onSelect"),0<c.length&&(r=new qi("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=js)))}function Cl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var zs={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},Vc={},Zd={};m&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Pl(n){if(Vc[n])return Vc[n];if(!zs[n])return n;var r=zs[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Zd)return Vc[n]=r[a];return n}var ep=Pl("animationend"),tp=Pl("animationiteration"),np=Pl("animationstart"),rp=Pl("transitionend"),ip=new Map,sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(n,r){ip.set(n,r),u(r,[n])}for(var xc=0;xc<sp.length;xc++){var Oc=sp[xc],yE=Oc.toLowerCase(),_E=Oc[0].toUpperCase()+Oc.slice(1);Qr(yE,"on"+_E)}Qr(ep,"onAnimationEnd"),Qr(tp,"onAnimationIteration"),Qr(np,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(rp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vE=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function op(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,bo(c,r,void 0,n),n.currentTarget=null}function ap(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var d=void 0;if(r)for(var _=c.length-1;0<=_;_--){var T=c[_],C=T.instance,F=T.currentTarget;if(T=T.listener,C!==d&&f.isPropagationStopped())break e;op(f,T,F),d=C}else for(_=0;_<c.length;_++){if(T=c[_],C=T.instance,F=T.currentTarget,T=T.listener,C!==d&&f.isPropagationStopped())break e;op(f,T,F),d=C}}}if(Ss)throw n=hn,Ss=!1,hn=null,n}function Ke(n,r){var a=r[Bc];a===void 0&&(a=r[Bc]=new Set);var c=n+"__bubble";a.has(c)||(lp(r,n,2,!1),a.add(c))}function Lc(n,r,a){var c=0;r&&(c|=4),lp(a,n,c,r)}var kl="_reactListening"+Math.random().toString(36).slice(2);function oa(n){if(!n[kl]){n[kl]=!0,s.forEach(function(a){a!=="selectionchange"&&(vE.has(a)||Lc(a,!1,n),Lc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[kl]||(r[kl]=!0,Lc("selectionchange",!1,r))}}function lp(n,r,a,c){switch(Vs(r)){case 1:var f=zn;break;case 4:f=El;break;default:f=Xo}a=f.bind(null,r,a,n),f=void 0,!zr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Mc(n,r,a,c,f){var d=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var T=c.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(_===4)for(_=c.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;_=_.return}for(;T!==null;){if(_=Wi(T),_===null)return;if(C=_.tag,C===5||C===6){c=d=_;continue e}T=T.parentNode}}c=c.return}ul(function(){var F=d,G=Is(a),K=[];e:{var W=ip.get(n);if(W!==void 0){var te=qi,ie=n;switch(n){case"keypress":if($i(a)===0)break e;case"keydown":case"keyup":te=je;break;case"focusin":ie="focus",te=Rt;break;case"focusout":ie="blur",te=Rt;break;case"beforeblur":case"afterblur":te=Rt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Hn;break;case ep:case tp:case np:te=Al;break;case rp:te=Fs;break;case"scroll":te=Os;break;case"wheel":te=nE;break;case"copy":case"cut":case"paste":te=l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=sn}var se=(r&4)!==0,st=!se&&n==="scroll",L=se?W!==null?W+"Capture":null:W;se=[];for(var V=F,b;V!==null;){b=V;var Q=b.stateNode;if(b.tag===5&&Q!==null&&(b=Q,L!==null&&(Q=xi(V,L),Q!=null&&se.push(aa(V,Q,b)))),st)break;V=V.return}0<se.length&&(W=new te(W,ie,null,a,G),K.push({event:W,listeners:se}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",W&&a!==Fr&&(ie=a.relatedTarget||a.fromElement)&&(Wi(ie)||ie[gr]))break e;if((te||W)&&(W=G.window===G?G:(W=G.ownerDocument)?W.defaultView||W.parentWindow:window,te?(ie=a.relatedTarget||a.toElement,te=F,ie=ie?Wi(ie):null,ie!==null&&(st=Tn(ie),ie!==st||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(te=null,ie=F),te!==ie)){if(se=Jo,Q="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(se=sn,Q="onPointerLeave",L="onPointerEnter",V="pointer"),st=te==null?W:qs(te),b=ie==null?W:qs(ie),W=new se(Q,V+"leave",te,a,G),W.target=st,W.relatedTarget=b,Q=null,Wi(G)===F&&(se=new se(L,V+"enter",ie,a,G),se.target=b,se.relatedTarget=st,Q=se),st=Q,te&&ie)t:{for(se=te,L=ie,V=0,b=se;b;b=Bs(b))V++;for(b=0,Q=L;Q;Q=Bs(Q))b++;for(;0<V-b;)se=Bs(se),V--;for(;0<b-V;)L=Bs(L),b--;for(;V--;){if(se===L||L!==null&&se===L.alternate)break t;se=Bs(se),L=Bs(L)}se=null}else se=null;te!==null&&up(K,W,te,se,!1),ie!==null&&st!==null&&up(K,st,ie,se,!0)}}e:{if(W=F?qs(F):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var oe=uE;else if(Bd(W))if(qd)oe=dE;else{oe=hE;var fe=cE}else(te=W.nodeName)&&te.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(oe=fE);if(oe&&(oe=oe(n,F))){$d(K,oe,a,G);break e}fe&&fe(n,W,F),n==="focusout"&&(fe=W._wrapperState)&&fe.controlled&&W.type==="number"&&ut(W,"number",W.value)}switch(fe=F?qs(F):window,n){case"focusin":(Bd(fe)||fe.contentEditable==="true")&&(js=fe,Nc=F,ia=null);break;case"focusout":ia=Nc=js=null;break;case"mousedown":Dc=!0;break;case"contextmenu":case"mouseup":case"dragend":Dc=!1,Jd(K,a,G);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":Jd(K,a,G)}var de;if(Rc)e:{switch(n){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Us?jd(n,a)&&(ge="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ge="onCompositionStart");ge&&(bd&&a.locale!=="ko"&&(Us||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Us&&(de=wl()):(nn=G,xs="value"in nn?nn.value:nn.textContent,Us=!0)),fe=Nl(F,ge),0<fe.length&&(ge=new g(ge,n,null,a,G),K.push({event:ge,listeners:fe}),de?ge.data=de:(de=zd(a),de!==null&&(ge.data=de)))),(de=iE?sE(n,a):oE(n,a))&&(F=Nl(F,"onBeforeInput"),0<F.length&&(G=new g("onBeforeInput","beforeinput",null,a,G),K.push({event:G,listeners:F}),G.data=de))}ap(K,r)})}function aa(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Nl(n,r){for(var a=r+"Capture",c=[];n!==null;){var f=n,d=f.stateNode;f.tag===5&&d!==null&&(f=d,d=xi(n,a),d!=null&&c.unshift(aa(n,d,f)),d=xi(n,r),d!=null&&c.push(aa(n,d,f))),n=n.return}return c}function Bs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function up(n,r,a,c,f){for(var d=r._reactName,_=[];a!==null&&a!==c;){var T=a,C=T.alternate,F=T.stateNode;if(C!==null&&C===c)break;T.tag===5&&F!==null&&(T=F,f?(C=xi(a,d),C!=null&&_.unshift(aa(a,C,T))):f||(C=xi(a,d),C!=null&&_.push(aa(a,C,T)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var EE=/\r\n?/g,wE=/\u0000|\uFFFD/g;function cp(n){return(typeof n=="string"?n:""+n).replace(EE,`
`).replace(wE,"")}function Dl(n,r,a){if(r=cp(r),cp(n)!==r&&a)throw Error(t(425))}function Vl(){}var bc=null,Fc=null;function Uc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jc=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,hp=typeof Promise=="function"?Promise:void 0,IE=typeof queueMicrotask=="function"?queueMicrotask:typeof hp<"u"?function(n){return hp.resolve(null).then(n).catch(SE)}:jc;function SE(n){setTimeout(function(){throw n})}function zc(n,r){var a=r,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Wr(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Wr(r)}function Xr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function fp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Gn="__reactFiber$"+$s,la="__reactProps$"+$s,gr="__reactContainer$"+$s,Bc="__reactEvents$"+$s,AE="__reactListeners$"+$s,RE="__reactHandles$"+$s;function Wi(n){var r=n[Gn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[gr]||a[Gn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=fp(n);n!==null;){if(a=n[Gn])return a;n=fp(n)}return r}n=a,a=n.parentNode}return null}function ua(n){return n=n[Gn]||n[gr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function xl(n){return n[la]||null}var $c=[],Hs=-1;function Yr(n){return{current:n}}function Qe(n){0>Hs||(n.current=$c[Hs],$c[Hs]=null,Hs--)}function He(n,r){Hs++,$c[Hs]=n.current,n.current=r}var Jr={},Ot=Yr(Jr),Ht=Yr(!1),Gi=Jr;function Ws(n,r){var a=n.type.contextTypes;if(!a)return Jr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var f={},d;for(d in a)f[d]=r[d];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=f),f}function Wt(n){return n=n.childContextTypes,n!=null}function Ol(){Qe(Ht),Qe(Ot)}function dp(n,r,a){if(Ot.current!==Jr)throw Error(t(168));He(Ot,r),He(Ht,a)}function pp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in r))throw Error(t(108,Ve(n)||"Unknown",f));return B({},a,c)}function Ll(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jr,Gi=Ot.current,He(Ot,n),He(Ht,Ht.current),!0}function mp(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=pp(n,r,Gi),c.__reactInternalMemoizedMergedChildContext=n,Qe(Ht),Qe(Ot),He(Ot,n)):Qe(Ht),He(Ht,a)}var yr=null,Ml=!1,qc=!1;function gp(n){yr===null?yr=[n]:yr.push(n)}function CE(n){Ml=!0,gp(n)}function Zr(){if(!qc&&yr!==null){qc=!0;var n=0,r=De;try{var a=yr;for(De=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}yr=null,Ml=!1}catch(f){throw yr!==null&&(yr=yr.slice(n+1)),Uo(Rs,Zr),f}finally{De=r,qc=!1}}return null}var Gs=[],Ks=0,bl=null,Fl=0,dn=[],pn=0,Ki=null,_r=1,vr="";function Qi(n,r){Gs[Ks++]=Fl,Gs[Ks++]=bl,bl=n,Fl=r}function yp(n,r,a){dn[pn++]=_r,dn[pn++]=vr,dn[pn++]=Ki,Ki=n;var c=_r;n=vr;var f=32-en(c)-1;c&=~(1<<f),a+=1;var d=32-en(r)+f;if(30<d){var _=f-f%5;d=(c&(1<<_)-1).toString(32),c>>=_,f-=_,_r=1<<32-en(r)+f|a<<f|c,vr=d+n}else _r=1<<d|a<<f|c,vr=n}function Hc(n){n.return!==null&&(Qi(n,1),yp(n,1,0))}function Wc(n){for(;n===bl;)bl=Gs[--Ks],Gs[Ks]=null,Fl=Gs[--Ks],Gs[Ks]=null;for(;n===Ki;)Ki=dn[--pn],dn[pn]=null,vr=dn[--pn],dn[pn]=null,_r=dn[--pn],dn[pn]=null}var on=null,an=null,Ye=!1,An=null;function _p(n,r){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function vp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,on=n,an=Xr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,on=n,an=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Ki!==null?{id:_r,overflow:vr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function Gc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Kc(n){if(Ye){var r=an;if(r){var a=r;if(!vp(n,r)){if(Gc(n))throw Error(t(418));r=Xr(a.nextSibling);var c=on;r&&vp(n,r)?_p(c,a):(n.flags=n.flags&-4097|2,Ye=!1,on=n)}}else{if(Gc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ye=!1,on=n}}}function Ep(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Ul(n){if(n!==on)return!1;if(!Ye)return Ep(n),Ye=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Uc(n.type,n.memoizedProps)),r&&(r=an)){if(Gc(n))throw wp(),Error(t(418));for(;r;)_p(n,r),r=Xr(r.nextSibling)}if(Ep(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){an=Xr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}an=null}}else an=on?Xr(n.stateNode.nextSibling):null;return!0}function wp(){for(var n=an;n;)n=Xr(n.nextSibling)}function Qs(){an=on=null,Ye=!1}function Qc(n){An===null?An=[n]:An.push(n)}var PE=Ne.ReactCurrentBatchConfig;function ca(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,d=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(_){var T=f.refs;_===null?delete T[d]:T[d]=_},r._stringRef=d,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function jl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Tp(n){var r=n._init;return r(n._payload)}function Ip(n){function r(L,V){if(n){var b=L.deletions;b===null?(L.deletions=[V],L.flags|=16):b.push(V)}}function a(L,V){if(!n)return null;for(;V!==null;)r(L,V),V=V.sibling;return null}function c(L,V){for(L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function f(L,V){return L=ai(L,V),L.index=0,L.sibling=null,L}function d(L,V,b){return L.index=b,n?(b=L.alternate,b!==null?(b=b.index,b<V?(L.flags|=2,V):b):(L.flags|=2,V)):(L.flags|=1048576,V)}function _(L){return n&&L.alternate===null&&(L.flags|=2),L}function T(L,V,b,Q){return V===null||V.tag!==6?(V=jh(b,L.mode,Q),V.return=L,V):(V=f(V,b),V.return=L,V)}function C(L,V,b,Q){var oe=b.type;return oe===N?G(L,V,b.props.children,Q,b.key):V!==null&&(V.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===gt&&Tp(oe)===V.type)?(Q=f(V,b.props),Q.ref=ca(L,V,b),Q.return=L,Q):(Q=cu(b.type,b.key,b.props,null,L.mode,Q),Q.ref=ca(L,V,b),Q.return=L,Q)}function F(L,V,b,Q){return V===null||V.tag!==4||V.stateNode.containerInfo!==b.containerInfo||V.stateNode.implementation!==b.implementation?(V=zh(b,L.mode,Q),V.return=L,V):(V=f(V,b.children||[]),V.return=L,V)}function G(L,V,b,Q,oe){return V===null||V.tag!==7?(V=rs(b,L.mode,Q,oe),V.return=L,V):(V=f(V,b),V.return=L,V)}function K(L,V,b){if(typeof V=="string"&&V!==""||typeof V=="number")return V=jh(""+V,L.mode,b),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case be:return b=cu(V.type,V.key,V.props,null,L.mode,b),b.ref=ca(L,null,V),b.return=L,b;case Re:return V=zh(V,L.mode,b),V.return=L,V;case gt:var Q=V._init;return K(L,Q(V._payload),b)}if(rt(V)||ce(V))return V=rs(V,L.mode,b,null),V.return=L,V;jl(L,V)}return null}function W(L,V,b,Q){var oe=V!==null?V.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return oe!==null?null:T(L,V,""+b,Q);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case be:return b.key===oe?C(L,V,b,Q):null;case Re:return b.key===oe?F(L,V,b,Q):null;case gt:return oe=b._init,W(L,V,oe(b._payload),Q)}if(rt(b)||ce(b))return oe!==null?null:G(L,V,b,Q,null);jl(L,b)}return null}function te(L,V,b,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return L=L.get(b)||null,T(V,L,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case be:return L=L.get(Q.key===null?b:Q.key)||null,C(V,L,Q,oe);case Re:return L=L.get(Q.key===null?b:Q.key)||null,F(V,L,Q,oe);case gt:var fe=Q._init;return te(L,V,b,fe(Q._payload),oe)}if(rt(Q)||ce(Q))return L=L.get(b)||null,G(V,L,Q,oe,null);jl(V,Q)}return null}function ie(L,V,b,Q){for(var oe=null,fe=null,de=V,ge=V=0,Tt=null;de!==null&&ge<b.length;ge++){de.index>ge?(Tt=de,de=null):Tt=de.sibling;var Me=W(L,de,b[ge],Q);if(Me===null){de===null&&(de=Tt);break}n&&de&&Me.alternate===null&&r(L,de),V=d(Me,V,ge),fe===null?oe=Me:fe.sibling=Me,fe=Me,de=Tt}if(ge===b.length)return a(L,de),Ye&&Qi(L,ge),oe;if(de===null){for(;ge<b.length;ge++)de=K(L,b[ge],Q),de!==null&&(V=d(de,V,ge),fe===null?oe=de:fe.sibling=de,fe=de);return Ye&&Qi(L,ge),oe}for(de=c(L,de);ge<b.length;ge++)Tt=te(de,L,ge,b[ge],Q),Tt!==null&&(n&&Tt.alternate!==null&&de.delete(Tt.key===null?ge:Tt.key),V=d(Tt,V,ge),fe===null?oe=Tt:fe.sibling=Tt,fe=Tt);return n&&de.forEach(function(li){return r(L,li)}),Ye&&Qi(L,ge),oe}function se(L,V,b,Q){var oe=ce(b);if(typeof oe!="function")throw Error(t(150));if(b=oe.call(b),b==null)throw Error(t(151));for(var fe=oe=null,de=V,ge=V=0,Tt=null,Me=b.next();de!==null&&!Me.done;ge++,Me=b.next()){de.index>ge?(Tt=de,de=null):Tt=de.sibling;var li=W(L,de,Me.value,Q);if(li===null){de===null&&(de=Tt);break}n&&de&&li.alternate===null&&r(L,de),V=d(li,V,ge),fe===null?oe=li:fe.sibling=li,fe=li,de=Tt}if(Me.done)return a(L,de),Ye&&Qi(L,ge),oe;if(de===null){for(;!Me.done;ge++,Me=b.next())Me=K(L,Me.value,Q),Me!==null&&(V=d(Me,V,ge),fe===null?oe=Me:fe.sibling=Me,fe=Me);return Ye&&Qi(L,ge),oe}for(de=c(L,de);!Me.done;ge++,Me=b.next())Me=te(de,L,ge,Me.value,Q),Me!==null&&(n&&Me.alternate!==null&&de.delete(Me.key===null?ge:Me.key),V=d(Me,V,ge),fe===null?oe=Me:fe.sibling=Me,fe=Me);return n&&de.forEach(function(aw){return r(L,aw)}),Ye&&Qi(L,ge),oe}function st(L,V,b,Q){if(typeof b=="object"&&b!==null&&b.type===N&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case be:e:{for(var oe=b.key,fe=V;fe!==null;){if(fe.key===oe){if(oe=b.type,oe===N){if(fe.tag===7){a(L,fe.sibling),V=f(fe,b.props.children),V.return=L,L=V;break e}}else if(fe.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===gt&&Tp(oe)===fe.type){a(L,fe.sibling),V=f(fe,b.props),V.ref=ca(L,fe,b),V.return=L,L=V;break e}a(L,fe);break}else r(L,fe);fe=fe.sibling}b.type===N?(V=rs(b.props.children,L.mode,Q,b.key),V.return=L,L=V):(Q=cu(b.type,b.key,b.props,null,L.mode,Q),Q.ref=ca(L,V,b),Q.return=L,L=Q)}return _(L);case Re:e:{for(fe=b.key;V!==null;){if(V.key===fe)if(V.tag===4&&V.stateNode.containerInfo===b.containerInfo&&V.stateNode.implementation===b.implementation){a(L,V.sibling),V=f(V,b.children||[]),V.return=L,L=V;break e}else{a(L,V);break}else r(L,V);V=V.sibling}V=zh(b,L.mode,Q),V.return=L,L=V}return _(L);case gt:return fe=b._init,st(L,V,fe(b._payload),Q)}if(rt(b))return ie(L,V,b,Q);if(ce(b))return se(L,V,b,Q);jl(L,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,V!==null&&V.tag===6?(a(L,V.sibling),V=f(V,b),V.return=L,L=V):(a(L,V),V=jh(b,L.mode,Q),V.return=L,L=V),_(L)):a(L,V)}return st}var Xs=Ip(!0),Sp=Ip(!1),zl=Yr(null),Bl=null,Ys=null,Xc=null;function Yc(){Xc=Ys=Bl=null}function Jc(n){var r=zl.current;Qe(zl),n._currentValue=r}function Zc(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Js(n,r){Bl=n,Xc=Ys=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Gt=!0),n.firstContext=null)}function mn(n){var r=n._currentValue;if(Xc!==n)if(n={context:n,memoizedValue:r,next:null},Ys===null){if(Bl===null)throw Error(t(308));Ys=n,Bl.dependencies={lanes:0,firstContext:n}}else Ys=Ys.next=n;return r}var Xi=null;function eh(n){Xi===null?Xi=[n]:Xi.push(n)}function Ap(n,r,a,c){var f=r.interleaved;return f===null?(a.next=a,eh(r)):(a.next=f.next,f.next=a),r.interleaved=a,Er(n,c)}function Er(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ei=!1;function th(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function ti(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,Er(n,a)}return f=c.interleaved,f===null?(r.next=r,eh(c)):(r.next=f.next,f.next=r),c.interleaved=r,Er(n,a)}function $l(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ho(n,a)}}function Cp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function ql(n,r,a,c){var f=n.updateQueue;ei=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,F=C.next;C.next=null,_===null?d=F:_.next=F,_=C;var G=n.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==_&&(T===null?G.firstBaseUpdate=F:T.next=F,G.lastBaseUpdate=C))}if(d!==null){var K=f.baseState;_=0,G=F=C=null,T=d;do{var W=T.lane,te=T.eventTime;if((c&W)===W){G!==null&&(G=G.next={eventTime:te,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ie=n,se=T;switch(W=r,te=a,se.tag){case 1:if(ie=se.payload,typeof ie=="function"){K=ie.call(te,K,W);break e}K=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=se.payload,W=typeof ie=="function"?ie.call(te,K,W):ie,W==null)break e;K=B({},K,W);break e;case 2:ei=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=f.effects,W===null?f.effects=[T]:W.push(T))}else te={eventTime:te,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(F=G=te,C=K):G=G.next=te,_|=W;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;W=T,T=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);if(G===null&&(C=K),f.baseState=C,f.firstBaseUpdate=F,f.lastBaseUpdate=G,r=f.shared.interleaved,r!==null){f=r;do _|=f.lane,f=f.next;while(f!==r)}else d===null&&(f.shared.lanes=0);Zi|=_,n.lanes=_,n.memoizedState=K}}function Pp(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ha={},Kn=Yr(ha),fa=Yr(ha),da=Yr(ha);function Yi(n){if(n===ha)throw Error(t(174));return n}function nh(n,r){switch(He(da,r),He(fa,n),He(Kn,ha),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Es(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Es(r,n)}Qe(Kn),He(Kn,r)}function Zs(){Qe(Kn),Qe(fa),Qe(da)}function kp(n){Yi(da.current);var r=Yi(Kn.current),a=Es(r,n.type);r!==a&&(He(fa,n),He(Kn,a))}function rh(n){fa.current===n&&(Qe(Kn),Qe(fa))}var Je=Yr(0);function Hl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ih=[];function sh(){for(var n=0;n<ih.length;n++)ih[n]._workInProgressVersionPrimary=null;ih.length=0}var Wl=Ne.ReactCurrentDispatcher,oh=Ne.ReactCurrentBatchConfig,Ji=0,Ze=null,yt=null,Et=null,Gl=!1,pa=!1,ma=0,kE=0;function Lt(){throw Error(t(321))}function ah(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Sn(n[a],r[a]))return!1;return!0}function lh(n,r,a,c,f,d){if(Ji=d,Ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Wl.current=n===null||n.memoizedState===null?xE:OE,n=a(c,f),pa){d=0;do{if(pa=!1,ma=0,25<=d)throw Error(t(301));d+=1,Et=yt=null,r.updateQueue=null,Wl.current=LE,n=a(c,f)}while(pa)}if(Wl.current=Xl,r=yt!==null&&yt.next!==null,Ji=0,Et=yt=Ze=null,Gl=!1,r)throw Error(t(300));return n}function uh(){var n=ma!==0;return ma=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=n:Et=Et.next=n,Et}function gn(){if(yt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var r=Et===null?Ze.memoizedState:Et.next;if(r!==null)Et=r,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Et===null?Ze.memoizedState=Et=n:Et=Et.next=n}return Et}function ga(n,r){return typeof r=="function"?r(n):r}function ch(n){var r=gn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,f=c.baseQueue,d=a.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}c.baseQueue=f=d,a.pending=null}if(f!==null){d=f.next,c=c.baseState;var T=_=null,C=null,F=d;do{var G=F.lane;if((Ji&G)===G)C!==null&&(C=C.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),c=F.hasEagerState?F.eagerState:n(c,F.action);else{var K={lane:G,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};C===null?(T=C=K,_=c):C=C.next=K,Ze.lanes|=G,Zi|=G}F=F.next}while(F!==null&&F!==d);C===null?_=c:C.next=T,Sn(c,r.memoizedState)||(Gt=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=C,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do d=f.lane,Ze.lanes|=d,Zi|=d,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function hh(n){var r=gn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,r.memoizedState)||(Gt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,c]}function Np(){}function Dp(n,r){var a=Ze,c=gn(),f=r(),d=!Sn(c.memoizedState,f);if(d&&(c.memoizedState=f,Gt=!0),c=c.queue,fh(Op.bind(null,a,c,n),[n]),c.getSnapshot!==r||d||Et!==null&&Et.memoizedState.tag&1){if(a.flags|=2048,ya(9,xp.bind(null,a,c,f,r),void 0,null),wt===null)throw Error(t(349));(Ji&30)!==0||Vp(a,r,f)}return f}function Vp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function xp(n,r,a,c){r.value=a,r.getSnapshot=c,Lp(r)&&Mp(n)}function Op(n,r,a){return a(function(){Lp(r)&&Mp(n)})}function Lp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Sn(n,a)}catch{return!0}}function Mp(n){var r=Er(n,1);r!==null&&kn(r,n,1,-1)}function bp(n){var r=Qn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},r.queue=n,n=n.dispatch=VE.bind(null,Ze,n),[r.memoizedState,n]}function ya(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Fp(){return gn().memoizedState}function Kl(n,r,a,c){var f=Qn();Ze.flags|=n,f.memoizedState=ya(1|r,a,void 0,c===void 0?null:c)}function Ql(n,r,a,c){var f=gn();c=c===void 0?null:c;var d=void 0;if(yt!==null){var _=yt.memoizedState;if(d=_.destroy,c!==null&&ah(c,_.deps)){f.memoizedState=ya(r,a,d,c);return}}Ze.flags|=n,f.memoizedState=ya(1|r,a,d,c)}function Up(n,r){return Kl(8390656,8,n,r)}function fh(n,r){return Ql(2048,8,n,r)}function jp(n,r){return Ql(4,2,n,r)}function zp(n,r){return Ql(4,4,n,r)}function Bp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function $p(n,r,a){return a=a!=null?a.concat([n]):null,Ql(4,4,Bp.bind(null,r,n),a)}function dh(){}function qp(n,r){var a=gn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&ah(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Hp(n,r){var a=gn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&ah(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Wp(n,r,a){return(Ji&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(Sn(a,r)||(a=$o(),Ze.lanes|=a,Zi|=a,n.baseState=!0),r)}function NE(n,r){var a=De;De=a!==0&&4>a?a:4,n(!0);var c=oh.transition;oh.transition={};try{n(!1),r()}finally{De=a,oh.transition=c}}function Gp(){return gn().memoizedState}function DE(n,r,a){var c=si(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Kp(n))Qp(r,a);else if(a=Ap(n,r,a,c),a!==null){var f=qt();kn(a,n,c,f),Xp(a,r,c)}}function VE(n,r,a){var c=si(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kp(n))Qp(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,Sn(T,_)){var C=r.interleaved;C===null?(f.next=f,eh(r)):(f.next=C.next,C.next=f),r.interleaved=f;return}}catch{}finally{}a=Ap(n,r,f,c),a!==null&&(f=qt(),kn(a,n,c,f),Xp(a,r,c))}}function Kp(n){var r=n.alternate;return n===Ze||r!==null&&r===Ze}function Qp(n,r){pa=Gl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Xp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ho(n,a)}}var Xl={readContext:mn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},xE={readContext:mn,useCallback:function(n,r){return Qn().memoizedState=[n,r===void 0?null:r],n},useContext:mn,useEffect:Up,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Kl(4194308,4,Bp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Kl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Kl(4,2,n,r)},useMemo:function(n,r){var a=Qn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Qn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=DE.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var r=Qn();return n={current:n},r.memoizedState=n},useState:bp,useDebugValue:dh,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=bp(!1),r=n[0];return n=NE.bind(null,n[1]),Qn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=Ze,f=Qn();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),wt===null)throw Error(t(349));(Ji&30)!==0||Vp(c,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,Up(Op.bind(null,c,d,n),[n]),c.flags|=2048,ya(9,xp.bind(null,c,d,a,r),void 0,null),a},useId:function(){var n=Qn(),r=wt.identifierPrefix;if(Ye){var a=vr,c=_r;a=(c&~(1<<32-en(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=ma++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=kE++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},OE={readContext:mn,useCallback:qp,useContext:mn,useEffect:fh,useImperativeHandle:$p,useInsertionEffect:jp,useLayoutEffect:zp,useMemo:Hp,useReducer:ch,useRef:Fp,useState:function(){return ch(ga)},useDebugValue:dh,useDeferredValue:function(n){var r=gn();return Wp(r,yt.memoizedState,n)},useTransition:function(){var n=ch(ga)[0],r=gn().memoizedState;return[n,r]},useMutableSource:Np,useSyncExternalStore:Dp,useId:Gp,unstable_isNewReconciler:!1},LE={readContext:mn,useCallback:qp,useContext:mn,useEffect:fh,useImperativeHandle:$p,useInsertionEffect:jp,useLayoutEffect:zp,useMemo:Hp,useReducer:hh,useRef:Fp,useState:function(){return hh(ga)},useDebugValue:dh,useDeferredValue:function(n){var r=gn();return yt===null?r.memoizedState=n:Wp(r,yt.memoizedState,n)},useTransition:function(){var n=hh(ga)[0],r=gn().memoizedState;return[n,r]},useMutableSource:Np,useSyncExternalStore:Dp,useId:Gp,unstable_isNewReconciler:!1};function Rn(n,r){if(n&&n.defaultProps){r=B({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function ph(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:B({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Yl={isMounted:function(n){return(n=n._reactInternals)?Tn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=qt(),f=si(n),d=wr(c,f);d.payload=r,a!=null&&(d.callback=a),r=ti(n,d,f),r!==null&&(kn(r,n,f,c),$l(r,n,f))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=qt(),f=si(n),d=wr(c,f);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=ti(n,d,f),r!==null&&(kn(r,n,f,c),$l(r,n,f))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=qt(),c=si(n),f=wr(a,c);f.tag=2,r!=null&&(f.callback=r),r=ti(n,f,c),r!==null&&(kn(r,n,c,a),$l(r,n,c))}};function Yp(n,r,a,c,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,d,_):r.prototype&&r.prototype.isPureReactComponent?!ra(a,c)||!ra(f,d):!0}function Jp(n,r,a){var c=!1,f=Jr,d=r.contextType;return typeof d=="object"&&d!==null?d=mn(d):(f=Wt(r)?Gi:Ot.current,c=r.contextTypes,d=(c=c!=null)?Ws(n,f):Jr),r=new r(a,d),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Yl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=d),r}function Zp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Yl.enqueueReplaceState(r,r.state,null)}function mh(n,r,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},th(n);var d=r.contextType;typeof d=="object"&&d!==null?f.context=mn(d):(d=Wt(r)?Gi:Ot.current,f.context=Ws(n,d)),f.state=n.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(ph(n,r,d,a),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&Yl.enqueueReplaceState(f,f.state,null),ql(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function eo(n,r){try{var a="",c=r;do a+=ae(c),c=c.return;while(c);var f=a}catch(d){f=`
Error generating stack: `+d.message+`
`+d.stack}return{value:n,source:r,stack:f,digest:null}}function gh(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function yh(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var ME=typeof WeakMap=="function"?WeakMap:Map;function em(n,r,a){a=wr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){iu||(iu=!0,Vh=c),yh(n,r)},a}function tm(n,r,a){a=wr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;a.payload=function(){return c(f)},a.callback=function(){yh(n,r)}}var d=n.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(a.callback=function(){yh(n,r),typeof c!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),a}function nm(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new ME;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(f.add(a),n=XE.bind(null,n,r,a),r.then(n,n))}function rm(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function im(n,r,a,c,f){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=wr(-1,1),r.tag=2,ti(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var bE=Ne.ReactCurrentOwner,Gt=!1;function $t(n,r,a,c){r.child=n===null?Sp(r,null,a,c):Xs(r,n.child,a,c)}function sm(n,r,a,c,f){a=a.render;var d=r.ref;return Js(r,f),c=lh(n,r,a,c,d,f),a=uh(),n!==null&&!Gt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,Tr(n,r,f)):(Ye&&a&&Hc(r),r.flags|=1,$t(n,r,c,f),r.child)}function om(n,r,a,c,f){if(n===null){var d=a.type;return typeof d=="function"&&!Uh(d)&&d.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=d,am(n,r,d,c,f)):(n=cu(a.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,(n.lanes&f)===0){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:ra,a(_,c)&&n.ref===r.ref)return Tr(n,r,f)}return r.flags|=1,n=ai(d,c),n.ref=r.ref,n.return=r,r.child=n}function am(n,r,a,c,f){if(n!==null){var d=n.memoizedProps;if(ra(d,c)&&n.ref===r.ref)if(Gt=!1,r.pendingProps=c=d,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Gt=!0);else return r.lanes=n.lanes,Tr(n,r,f)}return _h(n,r,a,c,f)}function lm(n,r,a){var c=r.pendingProps,f=c.children,d=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(no,ln),ln|=a;else{if((a&1073741824)===0)return n=d!==null?d.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,He(no,ln),ln|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=d!==null?d.baseLanes:a,He(no,ln),ln|=c}else d!==null?(c=d.baseLanes|a,r.memoizedState=null):c=a,He(no,ln),ln|=c;return $t(n,r,f,a),r.child}function um(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function _h(n,r,a,c,f){var d=Wt(a)?Gi:Ot.current;return d=Ws(r,d),Js(r,f),a=lh(n,r,a,c,d,f),c=uh(),n!==null&&!Gt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,Tr(n,r,f)):(Ye&&c&&Hc(r),r.flags|=1,$t(n,r,a,f),r.child)}function cm(n,r,a,c,f){if(Wt(a)){var d=!0;Ll(r)}else d=!1;if(Js(r,f),r.stateNode===null)Zl(n,r),Jp(r,a,c),mh(r,a,c,f),c=!0;else if(n===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var C=_.context,F=a.contextType;typeof F=="object"&&F!==null?F=mn(F):(F=Wt(a)?Gi:Ot.current,F=Ws(r,F));var G=a.getDerivedStateFromProps,K=typeof G=="function"||typeof _.getSnapshotBeforeUpdate=="function";K||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==c||C!==F)&&Zp(r,_,c,F),ei=!1;var W=r.memoizedState;_.state=W,ql(r,c,_,f),C=r.memoizedState,T!==c||W!==C||Ht.current||ei?(typeof G=="function"&&(ph(r,a,G,c),C=r.memoizedState),(T=ei||Yp(r,a,T,c,W,C,F))?(K||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=C),_.props=c,_.state=C,_.context=F,c=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Rp(n,r),T=r.memoizedProps,F=r.type===r.elementType?T:Rn(r.type,T),_.props=F,K=r.pendingProps,W=_.context,C=a.contextType,typeof C=="object"&&C!==null?C=mn(C):(C=Wt(a)?Gi:Ot.current,C=Ws(r,C));var te=a.getDerivedStateFromProps;(G=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==K||W!==C)&&Zp(r,_,c,C),ei=!1,W=r.memoizedState,_.state=W,ql(r,c,_,f);var ie=r.memoizedState;T!==K||W!==ie||Ht.current||ei?(typeof te=="function"&&(ph(r,a,te,c),ie=r.memoizedState),(F=ei||Yp(r,a,F,c,W,ie,C)||!1)?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ie,C),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ie,C)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ie),_.props=c,_.state=ie,_.context=C,c=F):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return vh(n,r,a,c,d,f)}function vh(n,r,a,c,f,d){um(n,r);var _=(r.flags&128)!==0;if(!c&&!_)return f&&mp(r,a,!1),Tr(n,r,d);c=r.stateNode,bE.current=r;var T=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&_?(r.child=Xs(r,n.child,null,d),r.child=Xs(r,null,T,d)):$t(n,r,T,d),r.memoizedState=c.state,f&&mp(r,a,!0),r.child}function hm(n){var r=n.stateNode;r.pendingContext?dp(n,r.pendingContext,r.pendingContext!==r.context):r.context&&dp(n,r.context,!1),nh(n,r.containerInfo)}function fm(n,r,a,c,f){return Qs(),Qc(f),r.flags|=256,$t(n,r,a,c),r.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function wh(n){return{baseLanes:n,cachePool:null,transitions:null}}function dm(n,r,a){var c=r.pendingProps,f=Je.current,d=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=n!==null&&n.memoizedState===null?!1:(f&2)!==0),T?(d=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),He(Je,f&1),n===null)return Kc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=c.children,n=c.fallback,d?(c=r.mode,d=r.child,_={mode:"hidden",children:_},(c&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=_):d=hu(_,c,0,null),n=rs(n,c,a,null),d.return=r,n.return=r,d.sibling=n,r.child=d,r.child.memoizedState=wh(a),r.memoizedState=Eh,n):Th(r,_));if(f=n.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return FE(n,r,_,c,T,f,a);if(d){d=c.fallback,_=r.mode,f=n.child,T=f.sibling;var C={mode:"hidden",children:c.children};return(_&1)===0&&r.child!==f?(c=r.child,c.childLanes=0,c.pendingProps=C,r.deletions=null):(c=ai(f,C),c.subtreeFlags=f.subtreeFlags&14680064),T!==null?d=ai(T,d):(d=rs(d,_,a,null),d.flags|=2),d.return=r,c.return=r,c.sibling=d,r.child=c,c=d,d=r.child,_=n.child.memoizedState,_=_===null?wh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},d.memoizedState=_,d.childLanes=n.childLanes&~a,r.memoizedState=Eh,c}return d=n.child,n=d.sibling,c=ai(d,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Th(n,r){return r=hu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Jl(n,r,a,c){return c!==null&&Qc(c),Xs(r,n.child,null,a),n=Th(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function FE(n,r,a,c,f,d,_){if(a)return r.flags&256?(r.flags&=-257,c=gh(Error(t(422))),Jl(n,r,_,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(d=c.fallback,f=r.mode,c=hu({mode:"visible",children:c.children},f,0,null),d=rs(d,f,_,null),d.flags|=2,c.return=r,d.return=r,c.sibling=d,r.child=c,(r.mode&1)!==0&&Xs(r,n.child,null,_),r.child.memoizedState=wh(_),r.memoizedState=Eh,d);if((r.mode&1)===0)return Jl(n,r,_,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var T=c.dgst;return c=T,d=Error(t(419)),c=gh(d,c,void 0),Jl(n,r,_,c)}if(T=(_&n.childLanes)!==0,Gt||T){if(c=wt,c!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|_))!==0?0:f,f!==0&&f!==d.retryLane&&(d.retryLane=f,Er(n,f),kn(c,n,f,-1))}return Fh(),c=gh(Error(t(421))),Jl(n,r,_,c)}return f.data==="$?"?(r.flags|=128,r.child=n.child,r=YE.bind(null,n),f._reactRetry=r,null):(n=d.treeContext,an=Xr(f.nextSibling),on=r,Ye=!0,An=null,n!==null&&(dn[pn++]=_r,dn[pn++]=vr,dn[pn++]=Ki,_r=n.id,vr=n.overflow,Ki=r),r=Th(r,c.children),r.flags|=4096,r)}function pm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Zc(n.return,r,a)}function Ih(n,r,a,c,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=c,d.tail=a,d.tailMode=f)}function mm(n,r,a){var c=r.pendingProps,f=c.revealOrder,d=c.tail;if($t(n,r,c.children,a),c=Je.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pm(n,a,r);else if(n.tag===19)pm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(He(Je,c),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Hl(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Ih(r,!1,f,a,d);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Hl(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Ih(r,!0,a,null,d);break;case"together":Ih(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Zl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Tr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Zi|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=ai(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ai(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function UE(n,r,a){switch(r.tag){case 3:hm(r),Qs();break;case 5:kp(r);break;case 1:Wt(r.type)&&Ll(r);break;case 4:nh(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,f=r.memoizedProps.value;He(zl,c._currentValue),c._currentValue=f;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(He(Je,Je.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?dm(n,r,a):(He(Je,Je.current&1),n=Tr(n,r,a),n!==null?n.sibling:null);He(Je,Je.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return mm(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),He(Je,Je.current),c)break;return null;case 22:case 23:return r.lanes=0,lm(n,r,a)}return Tr(n,r,a)}var gm,Sh,ym,_m;gm=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Sh=function(){},ym=function(n,r,a,c){var f=n.memoizedProps;if(f!==c){n=r.stateNode,Yi(Kn.current);var d=null;switch(a){case"input":f=_s(n,f),c=_s(n,c),d=[];break;case"select":f=B({},f,{value:void 0}),c=B({},c,{value:void 0}),d=[];break;case"textarea":f=Vo(n,f),c=Vo(n,c),d=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Vl)}wn(a,c);var _;a=null;for(F in f)if(!c.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var T=f[F];for(_ in T)T.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?d||(d=[]):(d=d||[]).push(F,null));for(F in c){var C=c[F];if(T=f?.[F],c.hasOwnProperty(F)&&C!==T&&(C!=null||T!=null))if(F==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||C&&C.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in C)C.hasOwnProperty(_)&&T[_]!==C[_]&&(a||(a={}),a[_]=C[_])}else a||(d||(d=[]),d.push(F,a)),a=C;else F==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,T=T?T.__html:void 0,C!=null&&T!==C&&(d=d||[]).push(F,C)):F==="children"?typeof C!="string"&&typeof C!="number"||(d=d||[]).push(F,""+C):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(C!=null&&F==="onScroll"&&Ke("scroll",n),d||T===C||(d=[])):(d=d||[]).push(F,C))}a&&(d=d||[]).push("style",a);var F=d;(r.updateQueue=F)&&(r.flags|=4)}},_m=function(n,r,a,c){a!==c&&(r.flags|=4)};function _a(n,r){if(!Ye)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function jE(n,r,a){var c=r.pendingProps;switch(Wc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Wt(r.type)&&Ol(),Mt(r),null;case 3:return c=r.stateNode,Zs(),Qe(Ht),Qe(Ot),sh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ul(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,An!==null&&(Lh(An),An=null))),Sh(n,r),Mt(r),null;case 5:rh(r);var f=Yi(da.current);if(a=r.type,n!==null&&r.stateNode!=null)ym(n,r,a,c,f),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Mt(r),null}if(n=Yi(Kn.current),Ul(r)){c=r.stateNode,a=r.type;var d=r.memoizedProps;switch(c[Gn]=r,c[la]=d,n=(r.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(f=0;f<sa.length;f++)Ke(sa[f],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":rl(c,d),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!d.multiple},Ke("invalid",c);break;case"textarea":xo(c,d),Ke("invalid",c)}wn(a,d),f=null;for(var _ in d)if(d.hasOwnProperty(_)){var T=d[_];_==="children"?typeof T=="string"?c.textContent!==T&&(d.suppressHydrationWarning!==!0&&Dl(c.textContent,T,n),f=["children",T]):typeof T=="number"&&c.textContent!==""+T&&(d.suppressHydrationWarning!==!0&&Dl(c.textContent,T,n),f=["children",""+T]):o.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&Ke("scroll",c)}switch(a){case"input":ys(c),Do(c,d,!0);break;case"textarea":ys(c),Or(c);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(c.onclick=Vl)}c=f,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Oo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[Gn]=r,n[la]=c,gm(n,r,!1,!1),r.stateNode=n;e:{switch(_=Ts(a,c),a){case"dialog":Ke("cancel",n),Ke("close",n),f=c;break;case"iframe":case"object":case"embed":Ke("load",n),f=c;break;case"video":case"audio":for(f=0;f<sa.length;f++)Ke(sa[f],n);f=c;break;case"source":Ke("error",n),f=c;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),f=c;break;case"details":Ke("toggle",n),f=c;break;case"input":rl(n,c),f=_s(n,c),Ke("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=B({},c,{value:void 0}),Ke("invalid",n);break;case"textarea":xo(n,c),f=Vo(n,c),Ke("invalid",n);break;default:f=c}wn(a,f),T=f;for(d in T)if(T.hasOwnProperty(d)){var C=T[d];d==="style"?ws(n,C):d==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&sl(n,C)):d==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&Vi(n,C):typeof C=="number"&&Vi(n,""+C):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(o.hasOwnProperty(d)?C!=null&&d==="onScroll"&&Ke("scroll",n):C!=null&&ve(n,d,C,_))}switch(a){case"input":ys(n),Do(n,c,!1);break;case"textarea":ys(n),Or(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,d=c.value,d!=null?En(n,!!c.multiple,d,!1):c.defaultValue!=null&&En(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Vl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(n&&r.stateNode!=null)_m(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Yi(da.current),Yi(Kn.current),Ul(r)){if(c=r.stateNode,a=r.memoizedProps,c[Gn]=r,(d=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:Dl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Dl(c.nodeValue,a,(n.mode&1)!==0)}d&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Gn]=r,r.stateNode=c}return Mt(r),null;case 13:if(Qe(Je),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&an!==null&&(r.mode&1)!==0&&(r.flags&128)===0)wp(),Qs(),r.flags|=98560,d=!1;else if(d=Ul(r),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(t(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));d[Gn]=r}else Qs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),d=!1}else An!==null&&(Lh(An),An=null),d=!0;if(!d)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Je.current&1)!==0?_t===0&&(_t=3):Fh())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return Zs(),Sh(n,r),n===null&&oa(r.stateNode.containerInfo),Mt(r),null;case 10:return Jc(r.type._context),Mt(r),null;case 17:return Wt(r.type)&&Ol(),Mt(r),null;case 19:if(Qe(Je),d=r.memoizedState,d===null)return Mt(r),null;if(c=(r.flags&128)!==0,_=d.rendering,_===null)if(c)_a(d,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(_=Hl(n),_!==null){for(r.flags|=128,_a(d,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)d=a,n=c,d.flags&=14680066,_=d.alternate,_===null?(d.childLanes=0,d.lanes=n,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=_.childLanes,d.lanes=_.lanes,d.child=_.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=_.memoizedProps,d.memoizedState=_.memoizedState,d.updateQueue=_.updateQueue,d.type=_.type,n=_.dependencies,d.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return He(Je,Je.current&1|2),r.child}n=n.sibling}d.tail!==null&&Ge()>ro&&(r.flags|=128,c=!0,_a(d,!1),r.lanes=4194304)}else{if(!c)if(n=Hl(_),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),_a(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!Ye)return Mt(r),null}else 2*Ge()-d.renderingStartTime>ro&&a!==1073741824&&(r.flags|=128,c=!0,_a(d,!1),r.lanes=4194304);d.isBackwards?(_.sibling=r.child,r.child=_):(a=d.last,a!==null?a.sibling=_:r.child=_,d.last=_)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ge(),r.sibling=null,a=Je.current,He(Je,c?a&1|2:a&1),r):(Mt(r),null);case 22:case 23:return bh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(ln&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function zE(n,r){switch(Wc(r),r.tag){case 1:return Wt(r.type)&&Ol(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Zs(),Qe(Ht),Qe(Ot),sh(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return rh(r),null;case 13:if(Qe(Je),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Qs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Qe(Je),null;case 4:return Zs(),null;case 10:return Jc(r.type._context),null;case 22:case 23:return bh(),null;case 24:return null;default:return null}}var eu=!1,bt=!1,BE=typeof WeakSet=="function"?WeakSet:Set,re=null;function to(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){nt(n,r,c)}else a.current=null}function Ah(n,r,a){try{a()}catch(c){nt(n,r,c)}}var vm=!1;function $E(n,r){if(bc=dr,n=Yd(),kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,C=-1,F=0,G=0,K=n,W=null;t:for(;;){for(var te;K!==a||f!==0&&K.nodeType!==3||(T=_+f),K!==d||c!==0&&K.nodeType!==3||(C=_+c),K.nodeType===3&&(_+=K.nodeValue.length),(te=K.firstChild)!==null;)W=K,K=te;for(;;){if(K===n)break t;if(W===a&&++F===f&&(T=_),W===d&&++G===c&&(C=_),(te=K.nextSibling)!==null)break;K=W,W=K.parentNode}K=te}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fc={focusedElem:n,selectionRange:a},dr=!1,re=r;re!==null;)if(r=re,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,re=n;else for(;re!==null;){r=re;try{var ie=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var se=ie.memoizedProps,st=ie.memoizedState,L=r.stateNode,V=L.getSnapshotBeforeUpdate(r.elementType===r.type?se:Rn(r.type,se),st);L.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){nt(r,r.return,Q)}if(n=r.sibling,n!==null){n.return=r.return,re=n;break}re=r.return}return ie=vm,vm=!1,ie}function va(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var d=f.destroy;f.destroy=void 0,d!==void 0&&Ah(r,a,d)}f=f.next}while(f!==c)}}function tu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Rh(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Em(n){var r=n.alternate;r!==null&&(n.alternate=null,Em(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Gn],delete r[la],delete r[Bc],delete r[AE],delete r[RE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wm(n){return n.tag===5||n.tag===3||n.tag===4}function Tm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ch(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Vl));else if(c!==4&&(n=n.child,n!==null))for(Ch(n,r,a),n=n.sibling;n!==null;)Ch(n,r,a),n=n.sibling}function Ph(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Ph(n,r,a),n=n.sibling;n!==null;)Ph(n,r,a),n=n.sibling}var Ct=null,Cn=!1;function ni(n,r,a){for(a=a.child;a!==null;)Im(n,r,a),a=a.sibling}function Im(n,r,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(bi,a)}catch{}switch(a.tag){case 5:bt||to(a,r);case 6:var c=Ct,f=Cn;Ct=null,ni(n,r,a),Ct=c,Cn=f,Ct!==null&&(Cn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(Cn?(n=Ct,a=a.stateNode,n.nodeType===8?zc(n.parentNode,a):n.nodeType===1&&zc(n,a),Wr(n)):zc(Ct,a.stateNode));break;case 4:c=Ct,f=Cn,Ct=a.stateNode.containerInfo,Cn=!0,ni(n,r,a),Ct=c,Cn=f;break;case 0:case 11:case 14:case 15:if(!bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var d=f,_=d.destroy;d=d.tag,_!==void 0&&((d&2)!==0||(d&4)!==0)&&Ah(a,r,_),f=f.next}while(f!==c)}ni(n,r,a);break;case 1:if(!bt&&(to(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(T){nt(a,r,T)}ni(n,r,a);break;case 21:ni(n,r,a);break;case 22:a.mode&1?(bt=(c=bt)||a.memoizedState!==null,ni(n,r,a),bt=c):ni(n,r,a);break;default:ni(n,r,a)}}function Sm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new BE),r.forEach(function(c){var f=JE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Pn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var d=n,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:Ct=T.stateNode,Cn=!1;break e;case 3:Ct=T.stateNode.containerInfo,Cn=!0;break e;case 4:Ct=T.stateNode.containerInfo,Cn=!0;break e}T=T.return}if(Ct===null)throw Error(t(160));Im(d,_,f),Ct=null,Cn=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(F){nt(f,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Am(r,n),r=r.sibling}function Am(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pn(r,n),Xn(n),c&4){try{va(3,n,n.return),tu(3,n)}catch(se){nt(n,n.return,se)}try{va(5,n,n.return)}catch(se){nt(n,n.return,se)}}break;case 1:Pn(r,n),Xn(n),c&512&&a!==null&&to(a,a.return);break;case 5:if(Pn(r,n),Xn(n),c&512&&a!==null&&to(a,a.return),n.flags&32){var f=n.stateNode;try{Vi(f,"")}catch(se){nt(n,n.return,se)}}if(c&4&&(f=n.stateNode,f!=null)){var d=n.memoizedProps,_=a!==null?a.memoizedProps:d,T=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{T==="input"&&d.type==="radio"&&d.name!=null&&vs(f,d),Ts(T,_);var F=Ts(T,d);for(_=0;_<C.length;_+=2){var G=C[_],K=C[_+1];G==="style"?ws(f,K):G==="dangerouslySetInnerHTML"?sl(f,K):G==="children"?Vi(f,K):ve(f,G,K,F)}switch(T){case"input":Di(f,d);break;case"textarea":il(f,d);break;case"select":var W=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!d.multiple;var te=d.value;te!=null?En(f,!!d.multiple,te,!1):W!==!!d.multiple&&(d.defaultValue!=null?En(f,!!d.multiple,d.defaultValue,!0):En(f,!!d.multiple,d.multiple?[]:"",!1))}f[la]=d}catch(se){nt(n,n.return,se)}}break;case 6:if(Pn(r,n),Xn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,d=n.memoizedProps;try{f.nodeValue=d}catch(se){nt(n,n.return,se)}}break;case 3:if(Pn(r,n),Xn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Wr(r.containerInfo)}catch(se){nt(n,n.return,se)}break;case 4:Pn(r,n),Xn(n);break;case 13:Pn(r,n),Xn(n),f=n.child,f.flags&8192&&(d=f.memoizedState!==null,f.stateNode.isHidden=d,!d||f.alternate!==null&&f.alternate.memoizedState!==null||(Dh=Ge())),c&4&&Sm(n);break;case 22:if(G=a!==null&&a.memoizedState!==null,n.mode&1?(bt=(F=bt)||G,Pn(r,n),bt=F):Pn(r,n),Xn(n),c&8192){if(F=n.memoizedState!==null,(n.stateNode.isHidden=F)&&!G&&(n.mode&1)!==0)for(re=n,G=n.child;G!==null;){for(K=re=G;re!==null;){switch(W=re,te=W.child,W.tag){case 0:case 11:case 14:case 15:va(4,W,W.return);break;case 1:to(W,W.return);var ie=W.stateNode;if(typeof ie.componentWillUnmount=="function"){c=W,a=W.return;try{r=c,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(se){nt(c,a,se)}}break;case 5:to(W,W.return);break;case 22:if(W.memoizedState!==null){Pm(K);continue}}te!==null?(te.return=W,re=te):Pm(K)}G=G.sibling}e:for(G=null,K=n;;){if(K.tag===5){if(G===null){G=K;try{f=K.stateNode,F?(d=f.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(T=K.stateNode,C=K.memoizedProps.style,_=C!=null&&C.hasOwnProperty("display")?C.display:null,T.style.display=br("display",_))}catch(se){nt(n,n.return,se)}}}else if(K.tag===6){if(G===null)try{K.stateNode.nodeValue=F?"":K.memoizedProps}catch(se){nt(n,n.return,se)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===n)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===n)break e;for(;K.sibling===null;){if(K.return===null||K.return===n)break e;G===K&&(G=null),K=K.return}G===K&&(G=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Pn(r,n),Xn(n),c&4&&Sm(n);break;case 21:break;default:Pn(r,n),Xn(n)}}function Xn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(wm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Vi(f,""),c.flags&=-33);var d=Tm(n);Ph(n,d,f);break;case 3:case 4:var _=c.stateNode.containerInfo,T=Tm(n);Ch(n,T,_);break;default:throw Error(t(161))}}catch(C){nt(n,n.return,C)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function qE(n,r,a){re=n,Rm(n)}function Rm(n,r,a){for(var c=(n.mode&1)!==0;re!==null;){var f=re,d=f.child;if(f.tag===22&&c){var _=f.memoizedState!==null||eu;if(!_){var T=f.alternate,C=T!==null&&T.memoizedState!==null||bt;T=eu;var F=bt;if(eu=_,(bt=C)&&!F)for(re=f;re!==null;)_=re,C=_.child,_.tag===22&&_.memoizedState!==null?km(f):C!==null?(C.return=_,re=C):km(f);for(;d!==null;)re=d,Rm(d),d=d.sibling;re=f,eu=T,bt=F}Cm(n)}else(f.subtreeFlags&8772)!==0&&d!==null?(d.return=f,re=d):Cm(n)}}function Cm(n){for(;re!==null;){var r=re;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:bt||tu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!bt)if(a===null)c.componentDidMount();else{var f=r.elementType===r.type?a.memoizedProps:Rn(r.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&Pp(r,d,c);break;case 3:var _=r.updateQueue;if(_!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Pp(r,_,a)}break;case 5:var T=r.stateNode;if(a===null&&r.flags&4){a=T;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var G=F.memoizedState;if(G!==null){var K=G.dehydrated;K!==null&&Wr(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bt||r.flags&512&&Rh(r)}catch(W){nt(r,r.return,W)}}if(r===n){re=null;break}if(a=r.sibling,a!==null){a.return=r.return,re=a;break}re=r.return}}function Pm(n){for(;re!==null;){var r=re;if(r===n){re=null;break}var a=r.sibling;if(a!==null){a.return=r.return,re=a;break}re=r.return}}function km(n){for(;re!==null;){var r=re;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{tu(4,r)}catch(C){nt(r,a,C)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var f=r.return;try{c.componentDidMount()}catch(C){nt(r,f,C)}}var d=r.return;try{Rh(r)}catch(C){nt(r,d,C)}break;case 5:var _=r.return;try{Rh(r)}catch(C){nt(r,_,C)}}}catch(C){nt(r,r.return,C)}if(r===n){re=null;break}var T=r.sibling;if(T!==null){T.return=r.return,re=T;break}re=r.return}}var HE=Math.ceil,nu=Ne.ReactCurrentDispatcher,kh=Ne.ReactCurrentOwner,yn=Ne.ReactCurrentBatchConfig,Le=0,wt=null,ht=null,Pt=0,ln=0,no=Yr(0),_t=0,Ea=null,Zi=0,ru=0,Nh=0,wa=null,Kt=null,Dh=0,ro=1/0,Ir=null,iu=!1,Vh=null,ri=null,su=!1,ii=null,ou=0,Ta=0,xh=null,au=-1,lu=0;function qt(){return(Le&6)!==0?Ge():au!==-1?au:au=Ge()}function si(n){return(n.mode&1)===0?1:(Le&2)!==0&&Pt!==0?Pt&-Pt:PE.transition!==null?(lu===0&&(lu=$o()),lu):(n=De,n!==0||(n=window.event,n=n===void 0?16:Vs(n.type)),n)}function kn(n,r,a,c){if(50<Ta)throw Ta=0,xh=null,Error(t(185));zi(n,a,c),((Le&2)===0||n!==wt)&&(n===wt&&((Le&2)===0&&(ru|=a),_t===4&&oi(n,Pt)),Qt(n,c),a===1&&Le===0&&(r.mode&1)===0&&(ro=Ge()+500,Ml&&Zr()))}function Qt(n,r){var a=n.callbackNode;ji(n,r);var c=cr(n,n===wt?Pt:0);if(c===0)a!==null&&As(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&As(a),r===1)n.tag===0?CE(Dm.bind(null,n)):gp(Dm.bind(null,n)),IE(function(){(Le&6)===0&&Zr()}),a=null;else{switch(bn(c)){case 1:a=Rs;break;case 4:a=jo;break;case 16:a=Mi;break;case 536870912:a=Cs;break;default:a=Mi}a=Um(a,Nm.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Nm(n,r){if(au=-1,lu=0,(Le&6)!==0)throw Error(t(327));var a=n.callbackNode;if(io()&&n.callbackNode!==a)return null;var c=cr(n,n===wt?Pt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=uu(n,c);else{r=c;var f=Le;Le|=2;var d=xm();(wt!==n||Pt!==r)&&(Ir=null,ro=Ge()+500,ts(n,r));do try{KE();break}catch(T){Vm(n,T)}while(!0);Yc(),nu.current=d,Le=f,ht!==null?r=0:(wt=null,Pt=0,r=_t)}if(r!==0){if(r===2&&(f=Bo(n),f!==0&&(c=f,r=Oh(n,f))),r===1)throw a=Ea,ts(n,0),oi(n,c),Qt(n,Ge()),a;if(r===6)oi(n,c);else{if(f=n.current.alternate,(c&30)===0&&!WE(f)&&(r=uu(n,c),r===2&&(d=Bo(n),d!==0&&(c=d,r=Oh(n,d))),r===1))throw a=Ea,ts(n,0),oi(n,c),Qt(n,Ge()),a;switch(n.finishedWork=f,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:ns(n,Kt,Ir);break;case 3:if(oi(n,c),(c&130023424)===c&&(r=Dh+500-Ge(),10<r)){if(cr(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=jc(ns.bind(null,n,Kt,Ir),r);break}ns(n,Kt,Ir);break;case 4:if(oi(n,c),(c&4194240)===c)break;for(r=n.eventTimes,f=-1;0<c;){var _=31-en(c);d=1<<_,_=r[_],_>f&&(f=_),c&=~d}if(c=f,c=Ge()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*HE(c/1960))-c,10<c){n.timeoutHandle=jc(ns.bind(null,n,Kt,Ir),c);break}ns(n,Kt,Ir);break;case 5:ns(n,Kt,Ir);break;default:throw Error(t(329))}}}return Qt(n,Ge()),n.callbackNode===a?Nm.bind(null,n):null}function Oh(n,r){var a=wa;return n.current.memoizedState.isDehydrated&&(ts(n,r).flags|=256),n=uu(n,r),n!==2&&(r=Kt,Kt=a,r!==null&&Lh(r)),n}function Lh(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function WE(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function oi(n,r){for(r&=~Nh,r&=~ru,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-en(r),c=1<<a;n[a]=-1,r&=~c}}function Dm(n){if((Le&6)!==0)throw Error(t(327));io();var r=cr(n,0);if((r&1)===0)return Qt(n,Ge()),null;var a=uu(n,r);if(n.tag!==0&&a===2){var c=Bo(n);c!==0&&(r=c,a=Oh(n,c))}if(a===1)throw a=Ea,ts(n,0),oi(n,r),Qt(n,Ge()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,ns(n,Kt,Ir),Qt(n,Ge()),null}function Mh(n,r){var a=Le;Le|=1;try{return n(r)}finally{Le=a,Le===0&&(ro=Ge()+500,Ml&&Zr())}}function es(n){ii!==null&&ii.tag===0&&(Le&6)===0&&io();var r=Le;Le|=1;var a=yn.transition,c=De;try{if(yn.transition=null,De=1,n)return n()}finally{De=c,yn.transition=a,Le=r,(Le&6)===0&&Zr()}}function bh(){ln=no.current,Qe(no)}function ts(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,TE(a)),ht!==null)for(a=ht.return;a!==null;){var c=a;switch(Wc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ol();break;case 3:Zs(),Qe(Ht),Qe(Ot),sh();break;case 5:rh(c);break;case 4:Zs();break;case 13:Qe(Je);break;case 19:Qe(Je);break;case 10:Jc(c.type._context);break;case 22:case 23:bh()}a=a.return}if(wt=n,ht=n=ai(n.current,null),Pt=ln=r,_t=0,Ea=null,Nh=ru=Zi=0,Kt=wa=null,Xi!==null){for(r=0;r<Xi.length;r++)if(a=Xi[r],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,d=a.pending;if(d!==null){var _=d.next;d.next=f,c.next=_}a.pending=c}Xi=null}return n}function Vm(n,r){do{var a=ht;try{if(Yc(),Wl.current=Xl,Gl){for(var c=Ze.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Gl=!1}if(Ji=0,Et=yt=Ze=null,pa=!1,ma=0,kh.current=null,a===null||a.return===null){_t=1,Ea=r,ht=null;break}e:{var d=n,_=a.return,T=a,C=r;if(r=Pt,T.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var F=C,G=T,K=G.tag;if((G.mode&1)===0&&(K===0||K===11||K===15)){var W=G.alternate;W?(G.updateQueue=W.updateQueue,G.memoizedState=W.memoizedState,G.lanes=W.lanes):(G.updateQueue=null,G.memoizedState=null)}var te=rm(_);if(te!==null){te.flags&=-257,im(te,_,T,d,r),te.mode&1&&nm(d,F,r),r=te,C=F;var ie=r.updateQueue;if(ie===null){var se=new Set;se.add(C),r.updateQueue=se}else ie.add(C);break e}else{if((r&1)===0){nm(d,F,r),Fh();break e}C=Error(t(426))}}else if(Ye&&T.mode&1){var st=rm(_);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),im(st,_,T,d,r),Qc(eo(C,T));break e}}d=C=eo(C,T),_t!==4&&(_t=2),wa===null?wa=[d]:wa.push(d),d=_;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var L=em(d,C,r);Cp(d,L);break e;case 1:T=C;var V=d.type,b=d.stateNode;if((d.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ri===null||!ri.has(b)))){d.flags|=65536,r&=-r,d.lanes|=r;var Q=tm(d,T,r);Cp(d,Q);break e}}d=d.return}while(d!==null)}Lm(a)}catch(oe){r=oe,ht===a&&a!==null&&(ht=a=a.return);continue}break}while(!0)}function xm(){var n=nu.current;return nu.current=Xl,n===null?Xl:n}function Fh(){(_t===0||_t===3||_t===2)&&(_t=4),wt===null||(Zi&268435455)===0&&(ru&268435455)===0||oi(wt,Pt)}function uu(n,r){var a=Le;Le|=2;var c=xm();(wt!==n||Pt!==r)&&(Ir=null,ts(n,r));do try{GE();break}catch(f){Vm(n,f)}while(!0);if(Yc(),Le=a,nu.current=c,ht!==null)throw Error(t(261));return wt=null,Pt=0,_t}function GE(){for(;ht!==null;)Om(ht)}function KE(){for(;ht!==null&&!Li();)Om(ht)}function Om(n){var r=Fm(n.alternate,n,ln);n.memoizedProps=n.pendingProps,r===null?Lm(n):ht=r,kh.current=null}function Lm(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=jE(a,r,ln),a!==null){ht=a;return}}else{if(a=zE(a,r),a!==null){a.flags&=32767,ht=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,ht=null;return}}if(r=r.sibling,r!==null){ht=r;return}ht=r=n}while(r!==null);_t===0&&(_t=5)}function ns(n,r,a){var c=De,f=yn.transition;try{yn.transition=null,De=1,QE(n,r,a,c)}finally{yn.transition=f,De=c}return null}function QE(n,r,a,c){do io();while(ii!==null);if((Le&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var d=a.lanes|a.childLanes;if(Sc(n,d),n===wt&&(ht=wt=null,Pt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||su||(su=!0,Um(Mi,function(){return io(),null})),d=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||d){d=yn.transition,yn.transition=null;var _=De;De=1;var T=Le;Le|=4,kh.current=null,$E(n,a),Am(a,n),mE(Fc),dr=!!bc,Fc=bc=null,n.current=a,qE(a),ur(),Le=T,De=_,yn.transition=d}else n.current=a;if(su&&(su=!1,ii=n,ou=f),d=n.pendingLanes,d===0&&(ri=null),gl(a.stateNode),Qt(n,Ge()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)f=r[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(iu)throw iu=!1,n=Vh,Vh=null,n;return(ou&1)!==0&&n.tag!==0&&io(),d=n.pendingLanes,(d&1)!==0?n===xh?Ta++:(Ta=0,xh=n):Ta=0,Zr(),null}function io(){if(ii!==null){var n=bn(ou),r=yn.transition,a=De;try{if(yn.transition=null,De=16>n?16:n,ii===null)var c=!1;else{if(n=ii,ii=null,ou=0,(Le&6)!==0)throw Error(t(331));var f=Le;for(Le|=4,re=n.current;re!==null;){var d=re,_=d.child;if((re.flags&16)!==0){var T=d.deletions;if(T!==null){for(var C=0;C<T.length;C++){var F=T[C];for(re=F;re!==null;){var G=re;switch(G.tag){case 0:case 11:case 15:va(8,G,d)}var K=G.child;if(K!==null)K.return=G,re=K;else for(;re!==null;){G=re;var W=G.sibling,te=G.return;if(Em(G),G===F){re=null;break}if(W!==null){W.return=te,re=W;break}re=te}}}var ie=d.alternate;if(ie!==null){var se=ie.child;if(se!==null){ie.child=null;do{var st=se.sibling;se.sibling=null,se=st}while(se!==null)}}re=d}}if((d.subtreeFlags&2064)!==0&&_!==null)_.return=d,re=_;else e:for(;re!==null;){if(d=re,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:va(9,d,d.return)}var L=d.sibling;if(L!==null){L.return=d.return,re=L;break e}re=d.return}}var V=n.current;for(re=V;re!==null;){_=re;var b=_.child;if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,re=b;else e:for(_=V;re!==null;){if(T=re,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:tu(9,T)}}catch(oe){nt(T,T.return,oe)}if(T===_){re=null;break e}var Q=T.sibling;if(Q!==null){Q.return=T.return,re=Q;break e}re=T.return}}if(Le=f,Zr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(bi,n)}catch{}c=!0}return c}finally{De=a,yn.transition=r}}return!1}function Mm(n,r,a){r=eo(a,r),r=em(n,r,1),n=ti(n,r,1),r=qt(),n!==null&&(zi(n,1,r),Qt(n,r))}function nt(n,r,a){if(n.tag===3)Mm(n,n,a);else for(;r!==null;){if(r.tag===3){Mm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ri===null||!ri.has(c))){n=eo(a,n),n=tm(r,n,1),r=ti(r,n,1),n=qt(),r!==null&&(zi(r,1,n),Qt(r,n));break}}r=r.return}}function XE(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=qt(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Pt&a)===a&&(_t===4||_t===3&&(Pt&130023424)===Pt&&500>Ge()-Dh?ts(n,0):Nh|=a),Qt(n,r)}function bm(n,r){r===0&&((n.mode&1)===0?r=1:(r=$r,$r<<=1,($r&130023424)===0&&($r=4194304)));var a=qt();n=Er(n,r),n!==null&&(zi(n,r,a),Qt(n,a))}function YE(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),bm(n,a)}function JE(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),bm(n,a)}var Fm;Fm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ht.current)Gt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Gt=!1,UE(n,r,a);Gt=(n.flags&131072)!==0}else Gt=!1,Ye&&(r.flags&1048576)!==0&&yp(r,Fl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Zl(n,r),n=r.pendingProps;var f=Ws(r,Ot.current);Js(r,a),f=lh(null,r,c,n,f,a);var d=uh();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wt(c)?(d=!0,Ll(r)):d=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,th(r),f.updater=Yl,r.stateNode=f,f._reactInternals=r,mh(r,c,n,a),r=vh(null,r,c,!0,d,a)):(r.tag=0,Ye&&d&&Hc(r),$t(null,r,f,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Zl(n,r),n=r.pendingProps,f=c._init,c=f(c._payload),r.type=c,f=r.tag=ew(c),n=Rn(c,n),f){case 0:r=_h(null,r,c,n,a);break e;case 1:r=cm(null,r,c,n,a);break e;case 11:r=sm(null,r,c,n,a);break e;case 14:r=om(null,r,c,Rn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Rn(c,f),_h(n,r,c,f,a);case 1:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Rn(c,f),cm(n,r,c,f,a);case 3:e:{if(hm(r),n===null)throw Error(t(387));c=r.pendingProps,d=r.memoizedState,f=d.element,Rp(n,r),ql(r,c,null,a);var _=r.memoizedState;if(c=_.element,d.isDehydrated)if(d={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){f=eo(Error(t(423)),r),r=fm(n,r,c,a,f);break e}else if(c!==f){f=eo(Error(t(424)),r),r=fm(n,r,c,a,f);break e}else for(an=Xr(r.stateNode.containerInfo.firstChild),on=r,Ye=!0,An=null,a=Sp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qs(),c===f){r=Tr(n,r,a);break e}$t(n,r,c,a)}r=r.child}return r;case 5:return kp(r),n===null&&Kc(r),c=r.type,f=r.pendingProps,d=n!==null?n.memoizedProps:null,_=f.children,Uc(c,f)?_=null:d!==null&&Uc(c,d)&&(r.flags|=32),um(n,r),$t(n,r,_,a),r.child;case 6:return n===null&&Kc(r),null;case 13:return dm(n,r,a);case 4:return nh(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Xs(r,null,c,a):$t(n,r,c,a),r.child;case 11:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Rn(c,f),sm(n,r,c,f,a);case 7:return $t(n,r,r.pendingProps,a),r.child;case 8:return $t(n,r,r.pendingProps.children,a),r.child;case 12:return $t(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,f=r.pendingProps,d=r.memoizedProps,_=f.value,He(zl,c._currentValue),c._currentValue=_,d!==null)if(Sn(d.value,_)){if(d.children===f.children&&!Ht.current){r=Tr(n,r,a);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var T=d.dependencies;if(T!==null){_=d.child;for(var C=T.firstContext;C!==null;){if(C.context===c){if(d.tag===1){C=wr(-1,a&-a),C.tag=2;var F=d.updateQueue;if(F!==null){F=F.shared;var G=F.pending;G===null?C.next=C:(C.next=G.next,G.next=C),F.pending=C}}d.lanes|=a,C=d.alternate,C!==null&&(C.lanes|=a),Zc(d.return,a,r),T.lanes|=a;break}C=C.next}}else if(d.tag===10)_=d.type===r.type?null:d.child;else if(d.tag===18){if(_=d.return,_===null)throw Error(t(341));_.lanes|=a,T=_.alternate,T!==null&&(T.lanes|=a),Zc(_,a,r),_=d.sibling}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===r){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}$t(n,r,f.children,a),r=r.child}return r;case 9:return f=r.type,c=r.pendingProps.children,Js(r,a),f=mn(f),c=c(f),r.flags|=1,$t(n,r,c,a),r.child;case 14:return c=r.type,f=Rn(c,r.pendingProps),f=Rn(c.type,f),om(n,r,c,f,a);case 15:return am(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Rn(c,f),Zl(n,r),r.tag=1,Wt(c)?(n=!0,Ll(r)):n=!1,Js(r,a),Jp(r,c,f),mh(r,c,f,a),vh(null,r,c,!0,n,a);case 19:return mm(n,r,a);case 22:return lm(n,r,a)}throw Error(t(156,r.tag))};function Um(n,r){return Uo(n,r)}function ZE(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,r,a,c){return new ZE(n,r,a,c)}function Uh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ew(n){if(typeof n=="function")return Uh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===lt)return 14}return 2}function ai(n,r){var a=n.alternate;return a===null?(a=_n(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function cu(n,r,a,c,f,d){var _=2;if(c=n,typeof n=="function")Uh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case N:return rs(a.children,f,d,r);case I:_=8,f|=8;break;case R:return n=_n(12,a,r,f|2),n.elementType=R,n.lanes=d,n;case S:return n=_n(13,a,r,f),n.elementType=S,n.lanes=d,n;case ze:return n=_n(19,a,r,f),n.elementType=ze,n.lanes=d,n;case qe:return hu(a,f,d,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:_=10;break e;case k:_=9;break e;case O:_=11;break e;case lt:_=14;break e;case gt:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=_n(_,a,r,f),r.elementType=n,r.type=c,r.lanes=d,r}function rs(n,r,a,c){return n=_n(7,n,c,r),n.lanes=a,n}function hu(n,r,a,c){return n=_n(22,n,c,r),n.elementType=qe,n.lanes=a,n.stateNode={isHidden:!1},n}function jh(n,r,a){return n=_n(6,n,null,r),n.lanes=a,n}function zh(n,r,a){return r=_n(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function tw(n,r,a,c,f){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qo(0),this.expirationTimes=qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qo(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Bh(n,r,a,c,f,d,_,T,C){return n=new tw(n,r,a,T,C),r===1?(r=1,d===!0&&(r|=8)):r=0,d=_n(3,null,null,r),n.current=d,d.stateNode=n,d.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},th(d),n}function nw(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Re,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function jm(n){if(!n)return Jr;n=n._reactInternals;e:{if(Tn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return pp(n,a,r)}return r}function zm(n,r,a,c,f,d,_,T,C){return n=Bh(a,c,!0,n,f,d,_,T,C),n.context=jm(null),a=n.current,c=qt(),f=si(a),d=wr(c,f),d.callback=r??null,ti(a,d,f),n.current.lanes=f,zi(n,f,c),Qt(n,c),n}function fu(n,r,a,c){var f=r.current,d=qt(),_=si(f);return a=jm(a),r.context===null?r.context=a:r.pendingContext=a,r=wr(d,_),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=ti(f,r,_),n!==null&&(kn(n,f,_,d),$l(n,f,_)),_}function du(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Bm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function $h(n,r){Bm(n,r),(n=n.alternate)&&Bm(n,r)}function rw(){return null}var $m=typeof reportError=="function"?reportError:function(n){console.error(n)};function qh(n){this._internalRoot=n}pu.prototype.render=qh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));fu(n,r,null,null)},pu.prototype.unmount=qh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;es(function(){fu(null,n,null,null)}),r[gr]=null}};function pu(n){this._internalRoot=n}pu.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ko();n={blockedOn:null,target:n,priority:r};for(var a=0;a<tn.length&&r!==0&&r<tn[a].priority;a++);tn.splice(a,0,n),a===0&&Ns(n)}};function Hh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function mu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function qm(){}function iw(n,r,a,c,f){if(f){if(typeof c=="function"){var d=c;c=function(){var F=du(_);d.call(F)}}var _=zm(r,c,n,0,null,!1,!1,"",qm);return n._reactRootContainer=_,n[gr]=_.current,oa(n.nodeType===8?n.parentNode:n),es(),_}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var T=c;c=function(){var F=du(C);T.call(F)}}var C=Bh(n,0,!1,null,null,!1,!1,"",qm);return n._reactRootContainer=C,n[gr]=C.current,oa(n.nodeType===8?n.parentNode:n),es(function(){fu(r,C,a,c)}),C}function gu(n,r,a,c,f){var d=a._reactRootContainer;if(d){var _=d;if(typeof f=="function"){var T=f;f=function(){var C=du(_);T.call(C)}}fu(r,_,n,f)}else _=iw(a,r,n,f,c);return du(_)}Wo=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Fe(r.pendingLanes);a!==0&&(Ho(r,a|1),Qt(r,Ge()),(Le&6)===0&&(ro=Ge()+500,Zr()))}break;case 13:es(function(){var c=Er(n,1);if(c!==null){var f=qt();kn(c,n,1,f)}}),$h(n,1)}},Ps=function(n){if(n.tag===13){var r=Er(n,134217728);if(r!==null){var a=qt();kn(r,n,134217728,a)}$h(n,134217728)}},Go=function(n){if(n.tag===13){var r=si(n),a=Er(n,r);if(a!==null){var c=qt();kn(a,n,r,c)}$h(n,r)}},Ko=function(){return De},Qo=function(n,r){var a=De;try{return De=n,r()}finally{De=a}},or=function(n,r,a){switch(r){case"input":if(Di(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var f=xl(c);if(!f)throw Error(t(90));No(c),Di(c,f)}}}break;case"textarea":il(n,a);break;case"select":r=a.value,r!=null&&En(n,!!a.multiple,r,!1)}},al=Mh,ll=es;var sw={usingClientEntryPoint:!1,Events:[ua,qs,xl,Ur,jr,Mh]},Ia={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ow={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ml(n),n===null?null:n.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{bi=yu.inject(ow),Zt=yu}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sw,Xt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hh(r))throw Error(t(200));return nw(n,r,null,a)},Xt.createRoot=function(n,r){if(!Hh(n))throw Error(t(299));var a=!1,c="",f=$m;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=Bh(n,1,!1,null,null,a,!1,c,f),n[gr]=r.current,oa(n.nodeType===8?n.parentNode:n),new qh(r)},Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ml(r),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n){return es(n)},Xt.hydrate=function(n,r,a){if(!mu(r))throw Error(t(200));return gu(null,n,r,!0,a)},Xt.hydrateRoot=function(n,r,a){if(!Hh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,d="",_=$m;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),r=zm(r,null,n,1,a??null,f,!1,d,_),n[gr]=r.current,oa(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,f]:r.mutableSourceEagerHydrationData.push(a,f);return new pu(r)},Xt.render=function(n,r,a){if(!mu(r))throw Error(t(200));return gu(null,n,r,!1,a)},Xt.unmountComponentAtNode=function(n){if(!mu(n))throw Error(t(40));return n._reactRootContainer?(es(function(){gu(null,null,n,!1,function(){n._reactRootContainer=null,n[gr]=null})}),!0):!1},Xt.unstable_batchedUpdates=Mh,Xt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!mu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return gu(n,r,a,!1,c)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Jm;function mw(){if(Jm)return Kh.exports;Jm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Kh.exports=pw(),Kh.exports}var Zm;function gw(){if(Zm)return _u;Zm=1;var i=mw();return _u.createRoot=i.createRoot,_u.hydrateRoot=i.hydrateRoot,_u}var yw=gw();const _w=xy(yw),kt=[];for(let i=0;i<256;++i)kt.push((i+256).toString(16).slice(1));function vw(i,e=0){return(kt[i[e+0]]+kt[i[e+1]]+kt[i[e+2]]+kt[i[e+3]]+"-"+kt[i[e+4]]+kt[i[e+5]]+"-"+kt[i[e+6]]+kt[i[e+7]]+"-"+kt[i[e+8]]+kt[i[e+9]]+"-"+kt[i[e+10]]+kt[i[e+11]]+kt[i[e+12]]+kt[i[e+13]]+kt[i[e+14]]+kt[i[e+15]]).toLowerCase()}let Yh;const Ew=new Uint8Array(16);function ww(){if(!Yh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yh=crypto.getRandomValues.bind(crypto)}return Yh(Ew)}const Tw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eg={randomUUID:Tw};function Iw(i,e,t){i=i||{};const s=i.random??i.rng?.()??ww();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,vw(s)}function Sw(i,e,t){return eg.randomUUID&&!i?eg.randomUUID():Iw(i)}const Aw=()=>{};var tg={};const Oy=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Rw=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],m=i[t++],y=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Ly={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,y=o+2<i.length,v=y?i[o+2]:0,w=u>>2,A=(u&3)<<4|m>>4;let D=(m&15)<<2|v>>6,z=v&63;y||(z=64,h||(D=64)),s.push(t[w],t[A],t[D],t[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Oy(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Rw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const A=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||m==null||v==null||A==null)throw new Cw;const D=u<<2|m>>4;if(s.push(D),v!==64){const z=m<<4&240|v>>2;if(s.push(z),A!==64){const X=v<<6&192|A;s.push(X)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Cw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pw=function(i){const e=Oy(i);return Ly.encodeByteArray(e,!0)},Lu=function(i){return Pw(i).replace(/\./g,"")},My=function(i){try{return Ly.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Nw=()=>kw().__FIREBASE_DEFAULTS__,Dw=()=>{if(typeof process>"u"||typeof tg>"u")return;const i=tg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Vw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&My(i[1]);return e&&JSON.parse(e)},ec=()=>{try{return Aw()||Nw()||Dw()||Vw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},by=i=>ec()?.emulatorHosts?.[i],xw=i=>{const e=by(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Fy=()=>ec()?.config,Uy=i=>ec()?.[`_${i}`];class Ow{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function To(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jy(i){return(await fetch(i,{credentials:"include"})).ok}function Lw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Lu(JSON.stringify(t)),Lu(JSON.stringify(h)),""].join(".")}const Na={};function Mw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Na))Na[e]?i.emulator.push(e):i.prod.push(e);return i}function bw(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let ng=!1;function zy(i,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||Na[i]===e||Na[i]||ng)return;Na[i]=e;function t(D){return`__firebase__banner__${D}`}const s="__firebase__banner",u=Mw().prod.length>0;function h(){const D=document.getElementById(s);D&&D.remove()}function m(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,z){D.setAttribute("width","24"),D.setAttribute("id",z),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{ng=!0,h()},D}function w(D,z){D.setAttribute("id",z),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function A(){const D=bw(s),z=t("text"),X=document.getElementById(z)||document.createElement("span"),Y=t("learnmore"),H=document.getElementById(Y)||document.createElement("a"),me=t("preprendIcon"),_e=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ve=D.element;m(ve),w(H,Y);const Ne=v();y(_e,me),ve.append(_e,X,H,Ne),document.body.appendChild(ve)}u?(X.innerText="Preview backend disconnected.",_e.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_e.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function Uw(){const i=ec()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Bw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $w(){const i=zt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function qw(){return!Uw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ww(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Gw="FirebaseError";class Dr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Gw,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Kw(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Dr(o,m,s)}}function Kw(i,e){return i.replace(Qw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Qw=/\{\$([^}]+)}/g;function Xw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function us(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(rg(u)&&rg(h)){if(!us(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function rg(i){return i!==null&&typeof i=="object"}function Ga(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Yw(i,e){const t=new Jw(i,e);return t.subscribe.bind(t)}class Jw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Zw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Jh),o.error===void 0&&(o.error=Jh),o.complete===void 0&&(o.complete=Jh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zw(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Jh(){}function St(i){return i&&i._delegate?i._delegate:i}class cs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ss="[DEFAULT]";class eT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Ow;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nT(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:tT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tT(i){return i===ss?void 0:i}function nT(i){return i.instantiationMode==="EAGER"}class rT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ce;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ce||(Ce={}));const iT={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},sT=Ce.INFO,oT={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},aT=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=oT[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jf{constructor(e){this.name=e,this._logLevel=sT,this._logHandler=aT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const lT=(i,e)=>e.some(t=>i instanceof t);let ig,sg;function uT(){return ig||(ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cT(){return sg||(sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const By=new WeakMap,ff=new WeakMap,$y=new WeakMap,Zh=new WeakMap,zf=new WeakMap;function hT(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(mi(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&By.set(t,i)}).catch(()=>{}),zf.set(e,i),e}function fT(i){if(ff.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});ff.set(i,e)}let df={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ff.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$y.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function dT(i){df=i(df)}function pT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(ef(this),e,...t);return $y.set(s,e.sort?e.sort():[e]),mi(s)}:cT().includes(i)?function(...e){return i.apply(ef(this),e),mi(By.get(this))}:function(...e){return mi(i.apply(ef(this),e))}}function mT(i){return typeof i=="function"?pT(i):(i instanceof IDBTransaction&&fT(i),lT(i,uT())?new Proxy(i,df):i)}function mi(i){if(i instanceof IDBRequest)return hT(i);if(Zh.has(i))return Zh.get(i);const e=mT(i);return e!==i&&(Zh.set(i,e),zf.set(e,i)),e}const ef=i=>zf.get(i);function gT(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),m=mi(h);return s&&h.addEventListener("upgradeneeded",y=>{s(mi(h.result),y.oldVersion,y.newVersion,mi(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const yT=["get","getKey","getAll","getAllKeys","count"],_T=["put","add","delete","clear"],tf=new Map;function og(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(tf.get(e))return tf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=_T.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||yT.includes(t)))return;const u=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&y.done]))[0]};return tf.set(e,u),u}dT(i=>({...i,get:(e,t,s)=>og(e,t)||i.get(e,t,s),has:(e,t)=>!!og(e,t)||i.has(e,t)}));class vT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ET(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function ET(i){return i.getComponent()?.type==="VERSION"}const pf="@firebase/app",ag="0.14.6";const Rr=new jf("@firebase/app"),wT="@firebase/app-compat",TT="@firebase/analytics-compat",IT="@firebase/analytics",ST="@firebase/app-check-compat",AT="@firebase/app-check",RT="@firebase/auth",CT="@firebase/auth-compat",PT="@firebase/database",kT="@firebase/data-connect",NT="@firebase/database-compat",DT="@firebase/functions",VT="@firebase/functions-compat",xT="@firebase/installations",OT="@firebase/installations-compat",LT="@firebase/messaging",MT="@firebase/messaging-compat",bT="@firebase/performance",FT="@firebase/performance-compat",UT="@firebase/remote-config",jT="@firebase/remote-config-compat",zT="@firebase/storage",BT="@firebase/storage-compat",$T="@firebase/firestore",qT="@firebase/ai",HT="@firebase/firestore-compat",WT="firebase",GT="12.6.0";const mf="[DEFAULT]",KT={[pf]:"fire-core",[wT]:"fire-core-compat",[IT]:"fire-analytics",[TT]:"fire-analytics-compat",[AT]:"fire-app-check",[ST]:"fire-app-check-compat",[RT]:"fire-auth",[CT]:"fire-auth-compat",[PT]:"fire-rtdb",[kT]:"fire-data-connect",[NT]:"fire-rtdb-compat",[DT]:"fire-fn",[VT]:"fire-fn-compat",[xT]:"fire-iid",[OT]:"fire-iid-compat",[LT]:"fire-fcm",[MT]:"fire-fcm-compat",[bT]:"fire-perf",[FT]:"fire-perf-compat",[UT]:"fire-rc",[jT]:"fire-rc-compat",[zT]:"fire-gcs",[BT]:"fire-gcs-compat",[$T]:"fire-fst",[HT]:"fire-fst-compat",[qT]:"fire-vertex","fire-js":"fire-js",[WT]:"fire-js-all"};const Mu=new Map,QT=new Map,gf=new Map;function lg(i,e){try{i.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function mo(i){const e=i.name;if(gf.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,i);for(const t of Mu.values())lg(t,i);for(const t of QT.values())lg(t,i);return!0}function Bf(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Nn(i){return i==null?!1:i.settings!==void 0}const XT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Wa("app","Firebase",XT);class YT{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}const Io=GT;function qy(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:mf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw gi.create("bad-app-name",{appName:String(o)});if(t||(t=Fy()),!t)throw gi.create("no-options");const u=Mu.get(o);if(u){if(us(t,u.options)&&us(s,u.config))return u;throw gi.create("duplicate-app",{appName:o})}const h=new rT(o);for(const y of gf.values())h.addComponent(y);const m=new YT(t,s,h);return Mu.set(o,m),m}function Hy(i=mf){const e=Mu.get(i);if(!e&&i===mf&&Fy())return qy();if(!e)throw gi.create("no-app",{appName:i});return e}function yi(i,e,t){let s=KT[i]??i;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(h.join(" "));return}mo(new cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const JT="firebase-heartbeat-database",ZT=1,Ma="firebase-heartbeat-store";let nf=null;function Wy(){return nf||(nf=gT(JT,ZT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ma)}catch(t){console.warn(t)}}}}).catch(i=>{throw gi.create("idb-open",{originalErrorMessage:i.message})})),nf}async function eI(i){try{const t=(await Wy()).transaction(Ma),s=await t.objectStore(Ma).get(Gy(i));return await t.done,s}catch(e){if(e instanceof Dr)Rr.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e?.message});Rr.warn(t.message)}}}async function ug(i,e){try{const s=(await Wy()).transaction(Ma,"readwrite");await s.objectStore(Ma).put(e,Gy(i)),await s.done}catch(t){if(t instanceof Dr)Rr.warn(t.message);else{const s=gi.create("idb-set",{originalErrorMessage:t?.message});Rr.warn(s.message)}}}function Gy(i){return`${i.name}!${i.options.appId}`}const tI=1024,nI=30;class rI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>nI){const o=oI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Rr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cg(),{heartbeatsToSend:t,unsentEntries:s}=iI(this._heartbeatsCache.heartbeats),o=Lu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Rr.warn(e),""}}}function cg(){return new Date().toISOString().substring(0,10)}function iI(i,e=tI){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),hg(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),hg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class sI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hw()?Ww().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ug(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ug(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hg(i){return Lu(JSON.stringify({version:2,heartbeats:i})).length}function oI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}function aI(i){mo(new cs("platform-logger",e=>new vT(e),"PRIVATE")),mo(new cs("heartbeat",e=>new rI(e),"PRIVATE")),yi(pf,ag,i),yi(pf,ag,"esm2020"),yi("fire-js","")}aI("");var lI="firebase",uI="12.6.0";yi(lI,uI,"app");function Ky(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cI=Ky,Qy=new Wa("auth","Firebase",Ky());const bu=new jf("@firebase/auth");function hI(i,...e){bu.logLevel<=Ce.WARN&&bu.warn(`Auth (${Io}): ${i}`,...e)}function Au(i,...e){bu.logLevel<=Ce.ERROR&&bu.error(`Auth (${Io}): ${i}`,...e)}function Cr(i,...e){throw $f(i,...e)}function Jn(i,...e){return $f(i,...e)}function Xy(i,e,t){const s={...cI(),[e]:t};return new Wa("auth","Firebase",s).create(e,{appName:i.name})}function _i(i){return Xy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $f(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return Qy.create(i,...e)}function ye(i,e,...t){if(!i)throw $f(e,...t)}function Sr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Au(e),new Error(e)}function Pr(i,e){i||Sr(e)}function yf(){return typeof self<"u"&&self.location?.href||""}function fI(){return fg()==="http:"||fg()==="https:"}function fg(){return typeof self<"u"&&self.location?.protocol||null}function dI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fI()||zw()||"connection"in navigator)?navigator.onLine:!0}function pI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Ka{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pr(t>e,"Short delay should be less than long delay!"),this.isMobile=Fw()||Bw()}get(){return dI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qf(i,e){Pr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Yy{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yI=new Ka(3e4,6e4);function tc(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function So(i,e,t,s,o={}){return Jy(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Ga({key:i.config.apiKey,...h}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const v={method:e,headers:y,...u};return jw()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&To(i.emulatorConfig.host)&&(v.credentials="include"),Yy.fetch()(await e_(i,i.config.apiHost,t,m),v)})}async function Jy(i,e,t){i._canInitEmulator=!1;const s={...mI,...e};try{const o=new _I(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw vu(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[y,v]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(i,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw vu(i,"email-already-in-use",h);if(y==="USER_DISABLED")throw vu(i,"user-disabled",h);const w=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Xy(i,w,v);Cr(i,w)}}catch(o){if(o instanceof Dr)throw o;Cr(i,"network-request-failed",{message:String(o)})}}async function Zy(i,e,t,s,o={}){const u=await So(i,e,t,s,o);return"mfaPendingCredential"in u&&Cr(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function e_(i,e,t,s){const o=`${e}${t}?${s}`,u=i,h=u.config.emulator?qf(i.config,o):`${i.config.apiScheme}://${o}`;return gI.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}class _I{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Jn(this.auth,"network-request-failed")),yI.get())})}}function vu(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Jn(i,e,s);return o.customData._tokenResponse=t,o}async function vI(i,e){return So(i,"POST","/v1/accounts:delete",e)}async function Fu(i,e){return So(i,"POST","/v1/accounts:lookup",e)}function Da(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EI(i,e=!1){const t=St(i),s=await t.getIdToken(e),o=Hf(s);ye(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Da(rf(o.auth_time)),issuedAtTime:Da(rf(o.iat)),expirationTime:Da(rf(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function rf(i){return Number(i)*1e3}function Hf(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const o=My(t);return o?JSON.parse(o):(Au("Failed to decode base64 JWT payload"),null)}catch(o){return Au("Caught error parsing JWT payload as JSON",o?.toString()),null}}function dg(i){const e=Hf(i);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ba(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Dr&&wI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function wI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class TI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _f{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uu(i){const e=i.auth,t=await i.getIdToken(),s=await ba(i,Fu(e,{idToken:t}));ye(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?t_(o.providerUserInfo):[],h=SI(i.providerData,u),m=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!h?.length,v=m?y:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new _f(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(i,w)}async function II(i){const e=St(i);await Uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SI(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function t_(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function AI(i,e){const t=await Jy(i,{},async()=>{const s=Ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await e_(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:s};return i.emulatorConfig&&To(i.emulatorConfig.host)&&(y.credentials="include"),Yy.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RI(i,e){return So(i,"POST","/v2/accounts:revokeToken",tc(i,e))}class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const t=dg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await AI(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new co;return s&&(ye(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(ye(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(ye(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Sr("not implemented")}}function ui(i,e){ye(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Dn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new TI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _f(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ba(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EI(this,e)}reload(){return II(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Uu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await ba(this,vI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:A,emailVerified:D,isAnonymous:z,providerData:X,stsTokenManager:Y}=t;ye(A&&Y,e,"internal-error");const H=co.fromJSON(this.name,Y);ye(typeof A=="string",e,"internal-error"),ui(s,e.name),ui(o,e.name),ye(typeof D=="boolean",e,"internal-error"),ye(typeof z=="boolean",e,"internal-error"),ui(u,e.name),ui(h,e.name),ui(m,e.name),ui(y,e.name),ui(v,e.name),ui(w,e.name);const me=new Dn({uid:A,auth:e,email:o,emailVerified:D,displayName:s,isAnonymous:z,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:H,createdAt:v,lastLoginAt:w});return X&&Array.isArray(X)&&(me.providerData=X.map(_e=>({..._e}))),y&&(me._redirectEventId=y),me}static async _fromIdTokenResponse(e,t,s=!1){const o=new co;o.updateFromServerResponse(t);const u=new Dn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Uu(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ye(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?t_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new co;m.updateFromIdToken(s);const y=new Dn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new _f(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,v),y}}const pg=new Map;function Ar(i){Pr(i instanceof Function,"Expected a class definition");let e=pg.get(i);return e?(Pr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,pg.set(i,e),e)}class n_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}n_.type="NONE";const mg=n_;function Ru(i,e,t){return`firebase:${i}:${e}:${t}`}class ho{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Ru(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ru("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fu(this.auth,{idToken:e}).catch(()=>{});return t?Dn._fromGetAccountInfoResponse(this.auth,t,e):null}return Dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ho(Ar(mg),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=o[0]||Ar(mg);const h=Ru(s,e.config.apiKey,e.name);let m=null;for(const v of t)try{const w=await v._get(h);if(w){let A;if(typeof w=="string"){const D=await Fu(e,{idToken:w}).catch(()=>{});if(!D)break;A=await Dn._fromGetAccountInfoResponse(e,D,w)}else A=Dn._fromJSON(e,w);v!==u&&(m=A),u=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new ho(u,e,s):(u=y[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(h)}catch{}})),new ho(u,e,s))}}function gg(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l_(e))return"Blackberry";if(u_(e))return"Webos";if(i_(e))return"Safari";if((e.includes("chrome/")||s_(e))&&!e.includes("edge/"))return"Chrome";if(a_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function r_(i=zt()){return/firefox\//i.test(i)}function i_(i=zt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s_(i=zt()){return/crios\//i.test(i)}function o_(i=zt()){return/iemobile/i.test(i)}function a_(i=zt()){return/android/i.test(i)}function l_(i=zt()){return/blackberry/i.test(i)}function u_(i=zt()){return/webos/i.test(i)}function Wf(i=zt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function CI(i=zt()){return Wf(i)&&!!window.navigator?.standalone}function PI(){return $w()&&document.documentMode===10}function c_(i=zt()){return Wf(i)||a_(i)||u_(i)||l_(i)||/windows phone/i.test(i)||o_(i)}function h_(i,e=[]){let t;switch(i){case"Browser":t=gg(zt());break;case"Worker":t=`${gg(zt())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${s}`}class kI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,m)=>{try{const y=e(u);h(y)}catch(y){m(y)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function NI(i,e={}){return So(i,"GET","/v2/passwordPolicy",tc(i,e))}const DI=6;class VI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class xI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yg(this),this.idTokenSubscription=new yg(this),this.beforeStateQueue=new kI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fu(this,{idToken:e}),s=await Dn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(_i(this));const t=e?St(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NI(this),t=new VI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wa("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await RI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nc(i){return St(i)}class yg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yw(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OI(i){Gf=i}function LI(i){return Gf.loadJS(i)}function MI(){return Gf.gapiScript}function bI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function FI(i,e){const t=Bf(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(us(u,e??{}))return o;Cr(o,"already-initialized")}return t.initialize({options:e})}function UI(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Ar);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function jI(i,e,t){const s=nc(i);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=f_(e),{host:h,port:m}=zI(e),y=m===null?"":`:${m}`,v={url:`${u}//${h}${y}/`},w=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(us(v,s.config.emulator)&&us(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,To(h)?(jy(`${u}//${h}${y}`),zy("Auth",!0)):BI()}function f_(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function zI(i){const e=f_(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:_g(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:_g(h)}}}function _g(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function BI(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class d_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}async function fo(i,e){return Zy(i,"POST","/v1/accounts:signInWithIdp",tc(i,e))}const $I="http://localhost";class hs extends d_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const h=new hs(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}buildRequest(){const e={requestUri:$I,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ga(t)}return e}}class p_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qa extends p_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ci extends Qa{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";class hi extends Qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";class fi extends Qa{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";class di extends Qa{constructor(){super("twitter.com")}static credential(e,t){return hs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return di.credential(t,s)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";async function qI(i,e){return Zy(i,"POST","/v1/accounts:signUp",tc(i,e))}class Ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await Dn._fromIdTokenResponse(e,s,o),h=vg(s);return new Ti({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=vg(s);return new Ti({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function vg(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function HI(i){if(Nn(i.app))return Promise.reject(_i(i));const e=nc(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ti({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await qI(e,{returnSecureToken:!0}),s=await Ti._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}class ju extends Dr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ju.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ju(e,t,s,o)}}function m_(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ju._fromErrorAndOperation(i,u,e,s):u})}async function WI(i,e,t=!1){const s=await ba(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ti._forOperation(i,"link",s)}async function GI(i,e,t=!1){const{auth:s}=i;if(Nn(s.app))return Promise.reject(_i(s));const o="reauthenticate";try{const u=await ba(i,m_(s,o,e,i),t);ye(u.idToken,s,"internal-error");const h=Hf(u.idToken);ye(h,s,"internal-error");const{sub:m}=h;return ye(i.uid===m,s,"user-mismatch"),Ti._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Cr(s,"user-mismatch"),u}}async function KI(i,e,t=!1){if(Nn(i.app))return Promise.reject(_i(i));const s="signIn",o=await m_(i,s,e),u=await Ti._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}function QI(i,e,t,s){return St(i).onIdTokenChanged(e,t,s)}function XI(i,e,t){return St(i).beforeAuthStateChanged(e,t)}function YI(i,e,t,s){return St(i).onAuthStateChanged(e,t,s)}const zu="__sak";class g_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zu,"1"),this.storage.removeItem(zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const JI=1e3,ZI=10;class y_ extends g_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=c_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,y)=>{this.notifyListeners(h,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);PI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ZI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},JI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}y_.type="LOCAL";const e0=y_;class __ extends g_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}__.type="SESSION";const v_=__;function t0(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new rc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,u)),y=await t0(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rc.receivers=[];function Kf(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}class n0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,y)=>{const v=Kf("",20);o.port1.start();const w=setTimeout(()=>{y(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(A){const D=A;if(D.data.eventId===v)switch(D.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(D.data.response);break;default:clearTimeout(w),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Zn(){return window}function r0(i){Zn().location.href=i}function E_(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function i0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s0(){return navigator?.serviceWorker?.controller||null}function o0(){return E_()?self:null}const w_="firebaseLocalStorageDb",a0=1,Bu="firebaseLocalStorage",T_="fbase_key";class Xa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ic(i,e){return i.transaction([Bu],e?"readwrite":"readonly").objectStore(Bu)}function l0(){const i=indexedDB.deleteDatabase(w_);return new Xa(i).toPromise()}function vf(){const i=indexedDB.open(w_,a0);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Bu,{keyPath:T_})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Bu)?e(s):(s.close(),await l0(),e(await vf()))})})}async function Eg(i,e,t){const s=ic(i,!0).put({[T_]:e,value:t});return new Xa(s).toPromise()}async function u0(i,e){const t=ic(i,!1).get(e),s=await new Xa(t).toPromise();return s===void 0?null:s.value}function wg(i,e){const t=ic(i,!0).delete(e);return new Xa(t).toPromise()}const c0=800,h0=3;class I_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>h0)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rc._getInstance(o0()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i0(),!this.activeServiceWorker)return;this.sender=new n0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await Eg(e,zu,"1"),await wg(e,zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Eg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>u0(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=ic(o,!1).getAll();return new Xa(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I_.type="LOCAL";const f0=I_;new Ka(3e4,6e4);function d0(i,e){return e?Ar(e):(ye(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Qf extends d_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function p0(i){return KI(i.auth,new Qf(i),i.bypassAuthState)}function m0(i){const{auth:e,user:t}=i;return ye(t,e,"internal-error"),GI(t,new Qf(i),i.bypassAuthState)}async function g0(i){const{auth:e,user:t}=i;return ye(t,e,"internal-error"),WI(t,new Qf(i),i.bypassAuthState)}class S_{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p0;case"linkViaPopup":case"linkViaRedirect":return g0;case"reauthViaPopup":case"reauthViaRedirect":return m0;default:Cr(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const y0=new Ka(2e3,1e4);class uo extends S_{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=Kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y0.get())};e()}}uo.currentPopupAction=null;const _0="pendingRedirect",Cu=new Map;class v0 extends S_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const s=await E0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E0(i,e){const t=I0(e),s=T0(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function w0(i,e){Cu.set(i._key(),e)}function T0(i){return Ar(i._redirectPersistence)}function I0(i){return Ru(_0,i.config.apiKey,i.name)}async function S0(i,e,t=!1){if(Nn(i.app))return Promise.reject(_i(i));const s=nc(i),o=d0(s,e),h=await new v0(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const A0=600*1e3;class R0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C0(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!A_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Jn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A0&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tg(e))}saveEventToCache(e){this.cachedEventUids.add(Tg(e)),this.lastProcessedEventTime=Date.now()}}function Tg(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function A_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function C0(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A_(i);default:return!1}}async function P0(i,e={}){return So(i,"GET","/v1/projects",e)}const k0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N0=/^https?/;async function D0(i){if(i.config.emulator)return;const{authorizedDomains:e}=await P0(i);for(const t of e)try{if(V0(t))return}catch{}Cr(i,"unauthorized-domain")}function V0(i){const e=yf(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!N0.test(t))return!1;if(k0.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const x0=new Ka(3e4,6e4);function Ig(){const i=Zn().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function O0(i){return new Promise((e,t)=>{function s(){Ig(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ig(),t(Jn(i,"network-request-failed"))},timeout:x0.get()})}if(Zn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zn().gapi?.load)s();else{const o=bI("iframefcb");return Zn()[o]=()=>{gapi.load?s():t(Jn(i,"network-request-failed"))},LI(`${MI()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Pu=null,e})}let Pu=null;function L0(i){return Pu=Pu||O0(i),Pu}const M0=new Ka(5e3,15e3),b0="__/auth/iframe",F0="emulator/auth/iframe",U0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z0(i){const e=i.config;ye(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?qf(e,F0):`https://${i.config.authDomain}/${b0}`,s={apiKey:e.apiKey,appName:i.name,v:Io},o=j0.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Ga(s).slice(1)}`}async function B0(i){const e=await L0(i),t=Zn().gapi;return ye(t,i,"internal-error"),e.open({where:document.body,url:z0(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U0,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Jn(i,"network-request-failed"),m=Zn().setTimeout(()=>{u(h)},M0.get());function y(){Zn().clearTimeout(m),o(s)}s.ping(y).then(y,()=>{u(h)})}))}const $0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q0=500,H0=600,W0="_blank",G0="http://localhost";class Sg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K0(i,e,t,s=q0,o=H0){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const y={...$0,width:s.toString(),height:o.toString(),top:u,left:h},v=zt().toLowerCase();t&&(m=s_(v)?W0:t),r_(v)&&(e=e||G0,y.scrollbars="yes");const w=Object.entries(y).reduce((D,[z,X])=>`${D}${z}=${X},`,"");if(CI(v)&&m!=="_self")return Q0(e||"",m),new Sg(null);const A=window.open(e||"",m,w);ye(A,i,"popup-blocked");try{A.focus()}catch{}return new Sg(A)}function Q0(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const X0="__/auth/handler",Y0="emulator/auth/handler",J0=encodeURIComponent("fac");async function Ag(i,e,t,s,o,u){ye(i.config.authDomain,i,"auth-domain-config-required"),ye(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:Io,eventId:o};if(e instanceof p_){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",Xw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,A]of Object.entries({}))h[w]=A}if(e instanceof Qa){const w=e.getScopes().filter(A=>A!=="");w.length>0&&(h.scopes=w.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const y=await i._getAppCheckToken(),v=y?`#${J0}=${encodeURIComponent(y)}`:"";return`${Z0(i)}?${Ga(m).slice(1)}${v}`}function Z0({config:i}){return i.emulator?qf(i,Y0):`https://${i.authDomain}/${X0}`}const sf="webStorageSupport";class eS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v_,this._completeRedirectFn=S0,this._overrideRedirectResult=w0}async _openPopup(e,t,s,o){Pr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Ag(e,t,s,yf(),o);return K0(e,u,Kf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await Ag(e,t,s,yf(),o);return r0(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Pr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await B0(e),s=new R0(e);return t.register("authEvent",o=>(ye(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sf,{type:sf},o=>{const u=o?.[0]?.[sf];u!==void 0&&t(!!u),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=D0(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return c_()||i_()||Wf()}}const tS=eS;var Rg="@firebase/auth",Cg="1.11.1";class nS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rS(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iS(i){mo(new cs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;ye(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h_(i)},v=new xI(s,o,u,y);return UI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),mo(new cs("auth-internal",e=>{const t=nc(e.getProvider("auth").getImmediate());return(s=>new nS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(Rg,Cg,rS(i)),yi(Rg,Cg,"esm2020")}const sS=300,oS=Uy("authIdTokenMaxAge")||sS;let Pg=null;const aS=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>oS)return;const o=t?.token;Pg!==o&&(Pg=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lS(i=Hy()){const e=Bf(i,"auth");if(e.isInitialized())return e.getImmediate();const t=FI(i,{popupRedirectResolver:tS,persistence:[f0,e0,v_]}),s=Uy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=aS(u.toString());XI(t,h,()=>h(t.currentUser)),QI(t,m=>h(m))}}const o=by("auth");return o&&jI(t,`http://${o}`),t}function uS(){return document.getElementsByTagName("head")?.[0]??document}OI({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Jn("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",uS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iS("Browser");var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vi,R_;(function(){var i;function e(N,I){function R(){}R.prototype=I.prototype,N.F=I.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(x,k,O){for(var S=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)S[ze-2]=arguments[ze];return I.prototype[k].apply(x,S)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,R){R||(R=0);const x=Array(16);if(typeof I=="string")for(var k=0;k<16;++k)x[k]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(k=0;k<16;++k)x[k]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=N.g[0],R=N.g[1],k=N.g[2];let O=N.g[3],S;S=I+(O^R&(k^O))+x[0]+3614090360&4294967295,I=R+(S<<7&4294967295|S>>>25),S=O+(k^I&(R^k))+x[1]+3905402710&4294967295,O=I+(S<<12&4294967295|S>>>20),S=k+(R^O&(I^R))+x[2]+606105819&4294967295,k=O+(S<<17&4294967295|S>>>15),S=R+(I^k&(O^I))+x[3]+3250441966&4294967295,R=k+(S<<22&4294967295|S>>>10),S=I+(O^R&(k^O))+x[4]+4118548399&4294967295,I=R+(S<<7&4294967295|S>>>25),S=O+(k^I&(R^k))+x[5]+1200080426&4294967295,O=I+(S<<12&4294967295|S>>>20),S=k+(R^O&(I^R))+x[6]+2821735955&4294967295,k=O+(S<<17&4294967295|S>>>15),S=R+(I^k&(O^I))+x[7]+4249261313&4294967295,R=k+(S<<22&4294967295|S>>>10),S=I+(O^R&(k^O))+x[8]+1770035416&4294967295,I=R+(S<<7&4294967295|S>>>25),S=O+(k^I&(R^k))+x[9]+2336552879&4294967295,O=I+(S<<12&4294967295|S>>>20),S=k+(R^O&(I^R))+x[10]+4294925233&4294967295,k=O+(S<<17&4294967295|S>>>15),S=R+(I^k&(O^I))+x[11]+2304563134&4294967295,R=k+(S<<22&4294967295|S>>>10),S=I+(O^R&(k^O))+x[12]+1804603682&4294967295,I=R+(S<<7&4294967295|S>>>25),S=O+(k^I&(R^k))+x[13]+4254626195&4294967295,O=I+(S<<12&4294967295|S>>>20),S=k+(R^O&(I^R))+x[14]+2792965006&4294967295,k=O+(S<<17&4294967295|S>>>15),S=R+(I^k&(O^I))+x[15]+1236535329&4294967295,R=k+(S<<22&4294967295|S>>>10),S=I+(k^O&(R^k))+x[1]+4129170786&4294967295,I=R+(S<<5&4294967295|S>>>27),S=O+(R^k&(I^R))+x[6]+3225465664&4294967295,O=I+(S<<9&4294967295|S>>>23),S=k+(I^R&(O^I))+x[11]+643717713&4294967295,k=O+(S<<14&4294967295|S>>>18),S=R+(O^I&(k^O))+x[0]+3921069994&4294967295,R=k+(S<<20&4294967295|S>>>12),S=I+(k^O&(R^k))+x[5]+3593408605&4294967295,I=R+(S<<5&4294967295|S>>>27),S=O+(R^k&(I^R))+x[10]+38016083&4294967295,O=I+(S<<9&4294967295|S>>>23),S=k+(I^R&(O^I))+x[15]+3634488961&4294967295,k=O+(S<<14&4294967295|S>>>18),S=R+(O^I&(k^O))+x[4]+3889429448&4294967295,R=k+(S<<20&4294967295|S>>>12),S=I+(k^O&(R^k))+x[9]+568446438&4294967295,I=R+(S<<5&4294967295|S>>>27),S=O+(R^k&(I^R))+x[14]+3275163606&4294967295,O=I+(S<<9&4294967295|S>>>23),S=k+(I^R&(O^I))+x[3]+4107603335&4294967295,k=O+(S<<14&4294967295|S>>>18),S=R+(O^I&(k^O))+x[8]+1163531501&4294967295,R=k+(S<<20&4294967295|S>>>12),S=I+(k^O&(R^k))+x[13]+2850285829&4294967295,I=R+(S<<5&4294967295|S>>>27),S=O+(R^k&(I^R))+x[2]+4243563512&4294967295,O=I+(S<<9&4294967295|S>>>23),S=k+(I^R&(O^I))+x[7]+1735328473&4294967295,k=O+(S<<14&4294967295|S>>>18),S=R+(O^I&(k^O))+x[12]+2368359562&4294967295,R=k+(S<<20&4294967295|S>>>12),S=I+(R^k^O)+x[5]+4294588738&4294967295,I=R+(S<<4&4294967295|S>>>28),S=O+(I^R^k)+x[8]+2272392833&4294967295,O=I+(S<<11&4294967295|S>>>21),S=k+(O^I^R)+x[11]+1839030562&4294967295,k=O+(S<<16&4294967295|S>>>16),S=R+(k^O^I)+x[14]+4259657740&4294967295,R=k+(S<<23&4294967295|S>>>9),S=I+(R^k^O)+x[1]+2763975236&4294967295,I=R+(S<<4&4294967295|S>>>28),S=O+(I^R^k)+x[4]+1272893353&4294967295,O=I+(S<<11&4294967295|S>>>21),S=k+(O^I^R)+x[7]+4139469664&4294967295,k=O+(S<<16&4294967295|S>>>16),S=R+(k^O^I)+x[10]+3200236656&4294967295,R=k+(S<<23&4294967295|S>>>9),S=I+(R^k^O)+x[13]+681279174&4294967295,I=R+(S<<4&4294967295|S>>>28),S=O+(I^R^k)+x[0]+3936430074&4294967295,O=I+(S<<11&4294967295|S>>>21),S=k+(O^I^R)+x[3]+3572445317&4294967295,k=O+(S<<16&4294967295|S>>>16),S=R+(k^O^I)+x[6]+76029189&4294967295,R=k+(S<<23&4294967295|S>>>9),S=I+(R^k^O)+x[9]+3654602809&4294967295,I=R+(S<<4&4294967295|S>>>28),S=O+(I^R^k)+x[12]+3873151461&4294967295,O=I+(S<<11&4294967295|S>>>21),S=k+(O^I^R)+x[15]+530742520&4294967295,k=O+(S<<16&4294967295|S>>>16),S=R+(k^O^I)+x[2]+3299628645&4294967295,R=k+(S<<23&4294967295|S>>>9),S=I+(k^(R|~O))+x[0]+4096336452&4294967295,I=R+(S<<6&4294967295|S>>>26),S=O+(R^(I|~k))+x[7]+1126891415&4294967295,O=I+(S<<10&4294967295|S>>>22),S=k+(I^(O|~R))+x[14]+2878612391&4294967295,k=O+(S<<15&4294967295|S>>>17),S=R+(O^(k|~I))+x[5]+4237533241&4294967295,R=k+(S<<21&4294967295|S>>>11),S=I+(k^(R|~O))+x[12]+1700485571&4294967295,I=R+(S<<6&4294967295|S>>>26),S=O+(R^(I|~k))+x[3]+2399980690&4294967295,O=I+(S<<10&4294967295|S>>>22),S=k+(I^(O|~R))+x[10]+4293915773&4294967295,k=O+(S<<15&4294967295|S>>>17),S=R+(O^(k|~I))+x[1]+2240044497&4294967295,R=k+(S<<21&4294967295|S>>>11),S=I+(k^(R|~O))+x[8]+1873313359&4294967295,I=R+(S<<6&4294967295|S>>>26),S=O+(R^(I|~k))+x[15]+4264355552&4294967295,O=I+(S<<10&4294967295|S>>>22),S=k+(I^(O|~R))+x[6]+2734768916&4294967295,k=O+(S<<15&4294967295|S>>>17),S=R+(O^(k|~I))+x[13]+1309151649&4294967295,R=k+(S<<21&4294967295|S>>>11),S=I+(k^(R|~O))+x[4]+4149444226&4294967295,I=R+(S<<6&4294967295|S>>>26),S=O+(R^(I|~k))+x[11]+3174756917&4294967295,O=I+(S<<10&4294967295|S>>>22),S=k+(I^(O|~R))+x[2]+718787259&4294967295,k=O+(S<<15&4294967295|S>>>17),S=R+(O^(k|~I))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+O&4294967295}s.prototype.v=function(N,I){I===void 0&&(I=N.length);const R=I-this.blockSize,x=this.C;let k=this.h,O=0;for(;O<I;){if(k==0)for(;O<=R;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<I;)if(x[k++]=N.charCodeAt(O++),k==this.blockSize){o(this,x),k=0;break}}else for(;O<I;)if(x[k++]=N[O++],k==this.blockSize){o(this,x),k=0;break}}this.h=k,this.o+=I},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;I=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=I&255,I/=256;for(this.v(N),N=Array(16),I=0,R=0;R<4;++R)for(let x=0;x<32;x+=8)N[I++]=this.g[R]>>>x&255;return N};function u(N,I){var R=m;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=I(N)}function h(N,I){this.h=I;const R=[];let x=!0;for(let k=N.length-1;k>=0;k--){const O=N[k]|0;x&&O==I||(R[k]=O,x=!1)}this.g=R}var m={};function y(N){return-128<=N&&N<128?u(N,function(I){return new h([I|0],I<0?-1:0)}):new h([N|0],N<0?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return A;if(N<0)return H(v(-N));const I=[];let R=1;for(let x=0;N>=R;x++)I[x]=N/R|0,R*=4294967296;return new h(I,0)}function w(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return H(w(N.substring(1),I));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=v(Math.pow(I,8));let x=A;for(let O=0;O<N.length;O+=8){var k=Math.min(8,N.length-O);const S=parseInt(N.substring(O,O+k),I);k<8?(k=v(Math.pow(I,k)),x=x.j(k).add(v(S))):(x=x.j(R),x=x.add(v(S)))}return x}var A=y(0),D=y(1),z=y(16777216);i=h.prototype,i.m=function(){if(Y(this))return-H(this).m();let N=0,I=1;for(let R=0;R<this.g.length;R++){const x=this.i(R);N+=(x>=0?x:4294967296+x)*I,I*=4294967296}return N},i.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(X(this))return"0";if(Y(this))return"-"+H(this).toString(N);const I=v(Math.pow(N,6));var R=this;let x="";for(;;){const k=Ne(R,I).g;R=me(R,k.j(I));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=k,X(R))return O+x;for(;O.length<6;)O="0"+O;x=O+x}},i.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function X(N){if(N.h!=0)return!1;for(let I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function Y(N){return N.h==-1}i.l=function(N){return N=me(this,N),Y(N)?-1:X(N)?0:1};function H(N){const I=N.g.length,R=[];for(let x=0;x<I;x++)R[x]=~N.g[x];return new h(R,~N.h).add(D)}i.abs=function(){return Y(this)?H(this):this},i.add=function(N){const I=Math.max(this.g.length,N.g.length),R=[];let x=0;for(let k=0;k<=I;k++){let O=x+(this.i(k)&65535)+(N.i(k)&65535),S=(O>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);x=S>>>16,O&=65535,S&=65535,R[k]=S<<16|O}return new h(R,R[R.length-1]&-2147483648?-1:0)};function me(N,I){return N.add(H(I))}i.j=function(N){if(X(this)||X(N))return A;if(Y(this))return Y(N)?H(this).j(H(N)):H(H(this).j(N));if(Y(N))return H(this.j(H(N)));if(this.l(z)<0&&N.l(z)<0)return v(this.m()*N.m());const I=this.g.length+N.g.length,R=[];for(var x=0;x<2*I;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(let k=0;k<N.g.length;k++){const O=this.i(x)>>>16,S=this.i(x)&65535,ze=N.i(k)>>>16,lt=N.i(k)&65535;R[2*x+2*k]+=S*lt,_e(R,2*x+2*k),R[2*x+2*k+1]+=O*lt,_e(R,2*x+2*k+1),R[2*x+2*k+1]+=S*ze,_e(R,2*x+2*k+1),R[2*x+2*k+2]+=O*ze,_e(R,2*x+2*k+2)}for(N=0;N<I;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=I;N<2*I;N++)R[N]=0;return new h(R,0)};function _e(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function ve(N,I){this.g=N,this.h=I}function Ne(N,I){if(X(I))throw Error("division by zero");if(X(N))return new ve(A,A);if(Y(N))return I=Ne(H(N),I),new ve(H(I.g),H(I.h));if(Y(I))return I=Ne(N,H(I)),new ve(H(I.g),I.h);if(N.g.length>30){if(Y(N)||Y(I))throw Error("slowDivide_ only works with positive integers.");for(var R=D,x=I;x.l(N)<=0;)R=be(R),x=be(x);var k=Re(R,1),O=Re(x,1);for(x=Re(x,2),R=Re(R,2);!X(x);){var S=O.add(x);S.l(N)<=0&&(k=k.add(R),O=S),x=Re(x,1),R=Re(R,1)}return I=me(N,k.j(I)),new ve(k,I)}for(k=A;N.l(I)>=0;){for(R=Math.max(1,Math.floor(N.m()/I.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),O=v(R),S=O.j(I);Y(S)||S.l(N)>0;)R-=x,O=v(R),S=O.j(I);X(O)&&(O=D),k=k.add(O),N=me(N,S)}return new ve(k,N)}i.B=function(N){return Ne(this,N).h},i.and=function(N){const I=Math.max(this.g.length,N.g.length),R=[];for(let x=0;x<I;x++)R[x]=this.i(x)&N.i(x);return new h(R,this.h&N.h)},i.or=function(N){const I=Math.max(this.g.length,N.g.length),R=[];for(let x=0;x<I;x++)R[x]=this.i(x)|N.i(x);return new h(R,this.h|N.h)},i.xor=function(N){const I=Math.max(this.g.length,N.g.length),R=[];for(let x=0;x<I;x++)R[x]=this.i(x)^N.i(x);return new h(R,this.h^N.h)};function be(N){const I=N.g.length+1,R=[];for(let x=0;x<I;x++)R[x]=N.i(x)<<1|N.i(x-1)>>>31;return new h(R,N.h)}function Re(N,I){const R=I>>5;I%=32;const x=N.g.length-R,k=[];for(let O=0;O<x;O++)k[O]=I>0?N.i(O+R)>>>I|N.i(O+R+1)<<32-I:N.i(O+R);return new h(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,R_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,vi=h}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var C_,Ra,P_,ku,Ef,k_,N_,D_;(function(){var i,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=t(this);function o(l,p){if(p)e:{var g=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var M=l[E];if(!(M in g))break e;g=g[M]}l=l[l.length-1],E=g[l],p=p(E),p!=E&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(l){return l||function(p){var g=[],E;for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&g.push([E,p[E]]);return g}});var u=u||{},h=this||self;function m(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function y(l,p,g){return l.call.apply(l.bind,arguments)}function v(l,p,g){return v=y,v.apply(null,arguments)}function w(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function A(l,p){function g(){}g.prototype=p.prototype,l.Z=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(E,M,U){for(var J=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)J[Te-2]=arguments[Te];return p.prototype[M].apply(E,J)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function z(l){const p=l.length;if(p>0){const g=Array(p);for(let E=0;E<p;E++)g[E]=l[E];return g}return[]}function X(l,p){for(let E=1;E<arguments.length;E++){const M=arguments[E];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=l.length||0;const U=M.length||0;l.length=g+U;for(let J=0;J<U;J++)l[g+J]=M[J]}else l.push(M)}}class Y{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function H(l){h.setTimeout(()=>{throw l},0)}function me(){var l=N;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class _e{constructor(){this.h=this.g=null}add(p,g){const E=ve.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var ve=new Y(()=>new Ne,l=>l.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let be,Re=!1,N=new _e,I=()=>{const l=Promise.resolve(void 0);be=()=>{l.then(R)}};function R(){for(var l;l=me();){try{l.h.call(l.g)}catch(g){H(g)}var p=ve;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}Re=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};h.addEventListener("test",g,p),h.removeEventListener("test",g,p)}catch{}return l})();function S(l){return/^[\s\xa0]*$/.test(l)}function ze(l,p){k.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}A(ze,k),ze.prototype.init=function(l,p){const g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),gt=0;function qe(l,p,g,E,M){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=M,this.key=++gt,this.da=this.fa=!1}function Z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ce(l,p,g){for(const E in l)p.call(g,l[E],E,l)}function B(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function P(l){const p={};for(const g in l)p[g]=l[g];return p}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(l,p){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)l[g]=E[g];for(let U=0;U<j.length;U++)g=j[U],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function ue(l){this.src=l,this.g={},this.h=0}ue.prototype.add=function(l,p,g,E,M){const U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);const J=we(l,p,E,M);return J>-1?(p=l[J],g||(p.fa=!1)):(p=new qe(p,this.src,U,!!E,M),p.fa=g,l.push(p)),p};function ae(l,p){const g=p.type;if(g in l.g){var E=l.g[g],M=Array.prototype.indexOf.call(E,p,void 0),U;(U=M>=0)&&Array.prototype.splice.call(E,M,1),U&&(Z(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function we(l,p,g,E){for(let M=0;M<l.length;++M){const U=l[M];if(!U.da&&U.listener==p&&U.capture==!!g&&U.ha==E)return M}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),Oe={};function Be(l,p,g,E,M){if(Array.isArray(p)){for(let U=0;U<p.length;U++)Be(l,p[U],g,E,M);return null}return g=Do(g),l&&l[lt]?l.J(p,g,m(E)?!!E.capture:!1,M):Bt(l,p,g,!1,E,M)}function Bt(l,p,g,E,M,U){if(!p)throw Error("Invalid event type");const J=m(M)?!!M.capture:!!M;let Te=vs(l);if(Te||(l[Ve]=Te=new ue(l)),g=Te.add(p,g,E,J,U),g.proxy)return g;if(E=ys(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)O||(M=J),M===void 0&&(M=!1),l.addEventListener(p.toString(),E,M);else if(l.attachEvent)l.attachEvent(_s(p.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ys(){function l(g){return p.call(l.src,l.listener,g)}const p=rl;return l}function No(l,p,g,E,M){if(Array.isArray(p))for(var U=0;U<p.length;U++)No(l,p[U],g,E,M);else E=m(E)?!!E.capture:!!E,g=Do(g),l&&l[lt]?(l=l.i,U=String(p).toString(),U in l.g&&(p=l.g[U],g=we(p,g,E,M),g>-1&&(Z(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete l.g[U],l.h--)))):l&&(l=vs(l))&&(p=l.g[p.toString()],l=-1,p&&(l=we(p,g,E,M)),(g=l>-1?p[l]:null)&&xr(g))}function xr(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[lt])ae(p.i,l);else{var g=l.type,E=l.proxy;p.removeEventListener?p.removeEventListener(g,E,l.capture):p.detachEvent?p.detachEvent(_s(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=vs(p))?(ae(g,l),g.h==0&&(g.src=null,p[Ve]=null)):Z(l)}}}function _s(l){return l in Oe?Oe[l]:Oe[l]="on"+l}function rl(l,p){if(l.da)l=!0;else{p=new ze(p,this);const g=l.listener,E=l.ha||l.src;l.fa&&xr(l),l=g.call(E,p)}return l}function vs(l){return l=l[Ve],l instanceof ue?l:null}var Di="__closure_events_fn_"+(Math.random()*1e9>>>0);function Do(l){return typeof l=="function"?l:(l[Di]||(l[Di]=function(p){return l.handleEvent(p)}),l[Di])}function ut(){x.call(this),this.i=new ue(this),this.M=this,this.G=null}A(ut,x),ut.prototype[lt]=!0,ut.prototype.removeEventListener=function(l,p,g,E){No(this,l,p,g,E)};function rt(l,p){var g,E=l.G;if(E)for(g=[];E;E=E.G)g.push(E);if(l=l.M,E=p.type||p,typeof p=="string")p=new k(p,l);else if(p instanceof k)p.target=p.target||l;else{var M=p;p=new k(E,l),le(p,M)}M=!0;let U,J;if(g)for(J=g.length-1;J>=0;J--)U=p.g=g[J],M=En(U,E,!0,p)&&M;if(U=p.g=l,M=En(U,E,!0,p)&&M,M=En(U,E,!1,p)&&M,g)for(J=0;J<g.length;J++)U=p.g=g[J],M=En(U,E,!1,p)&&M}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const g=l.g[p];for(let E=0;E<g.length;E++)Z(g[E]);delete l.g[p],l.h--}}this.G=null},ut.prototype.J=function(l,p,g,E){return this.i.add(String(l),p,!1,g,E)},ut.prototype.K=function(l,p,g,E){return this.i.add(String(l),p,!0,g,E)};function En(l,p,g,E){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let U=0;U<p.length;++U){const J=p[U];if(J&&!J.da&&J.capture==g){const Te=J.listener,it=J.ha||J.src;J.fa&&ae(l.i,J),M=Te.call(it,E)!==!1&&M}}return M&&!E.defaultPrevented}function Vo(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(l,p||0)}function xo(l){l.g=Vo(()=>{l.g=null,l.i&&(l.i=!1,xo(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class il extends x{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:xo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(l){x.call(this),this.h=l,this.g={}}A(Or,x);var Oo=[];function Es(l){ce(l.g,function(p,g){this.g.hasOwnProperty(g)&&xr(p)},l),l.g={}}Or.prototype.N=function(){Or.Z.N.call(this),Es(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lr=h.JSON.stringify,sl=h.JSON.parse,Vi=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function Mr(){}function ol(){}var br={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ws(){k.call(this,"d")}A(ws,k);function Lo(){k.call(this,"c")}A(Lo,k);var wn={},Ts=null;function Fr(){return Ts=Ts||new ut}wn.Ia="serverreachability";function Is(l){k.call(this,wn.Ia,l)}A(Is,k);function or(l){const p=Fr();rt(p,new Is(p))}wn.STAT_EVENT="statevent";function ar(l,p){k.call(this,wn.STAT_EVENT,l),this.stat=p}A(ar,k);function tt(l){const p=Fr();rt(p,new ar(p,l))}wn.Ja="timingevent";function Mo(l,p){k.call(this,wn.Ja,l),this.size=p}A(Mo,k);function Ur(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},p)}function jr(){this.g=!0}jr.prototype.ua=function(){this.g=!1};function al(l,p,g,E,M,U){l.info(function(){if(l.g)if(U){var J="",Te=U.split("&");for(let je=0;je<Te.length;je++){var it=Te[je].split("=");if(it.length>1){const ct=it[0];it=it[1];const sn=ct.split("_");J=sn.length>=2&&sn[1]=="type"?J+(ct+"="+it+"&"):J+(ct+"=redacted&")}}}else J=null;else J=U;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+p+`
`+g+`
`+J})}function ll(l,p,g,E,M,U,J){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+p+`
`+g+`
`+U+" "+J})}function xn(l,p,g,E){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+xi(l,g)+(E?" "+E:"")})}function ul(l,p){l.info(function(){return"TIMEOUT: "+p})}jr.prototype.info=function(){};function xi(l,p){if(!l.g)return p;if(!p)return null;try{const U=JSON.parse(p);if(U){for(l=0;l<U.length;l++)if(Array.isArray(U[l])){var g=U[l];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var M=E[0];if(M!="noop"&&M!="stop"&&M!="close")for(let J=1;J<E.length;J++)E[J]=""}}}}return Lr(U)}catch{return p}}var zr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Br={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cl;function lr(){}A(lr,Mr),lr.prototype.g=function(){return new XMLHttpRequest},cl=new lr;function On(l){return encodeURIComponent(String(l))}function Ss(l){var p=1;l=l.split(":");const g=[];for(;p>0&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function hn(l,p,g,E){this.j=l,this.i=p,this.l=g,this.S=E||1,this.V=new Or(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hl}function hl(){this.i=null,this.g="",this.h=!1}var fl={},bo={};function Tn(l,p,g){l.M=1,l.A=cr(fn(p)),l.u=g,l.R=!0,Fo(l,null)}function Fo(l,p){l.F=Date.now(),Oi(l),l.B=fn(l.A);var g=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),Ko(g.i,"t",E),l.C=0,g=l.j.L,l.h=new hl,l.g=Tl(l.j,g?p:null,!l.u),l.P>0&&(l.O=new il(v(l.Y,l,l.g),l.P)),p=l.V,g=l.g,E=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(Oo[0]=M.toString()),M=Oo);for(let U=0;U<M.length;U++){const J=Be(g,M[U],E||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=l.J?P(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),or(),al(l.i,l.v,l.B,l.l,l.S,l.u)}hn.prototype.ba=function(l){l=l.target;const p=this.O;p&&zn(l)==3?p.j():this.Y(l)},hn.prototype.Y=function(l){try{if(l==this.g)e:{const Te=zn(this.g),it=this.g.ya(),je=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||El(this.g)))){this.K||Te!=4||it==7||(it==8||je<=0?or(3):or(2)),As(this);var p=this.g.ca();this.X=p;var g=dl(this);if(this.o=p==200,ll(this.i,this.v,this.B,this.l,this.S,Te,p),this.o){if(this.U&&!this.L){t:{if(this.g){var E,M=this.g;if((E=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(E)){var U=E;break t}}U=null}if(l=U)xn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ge(this,l);else{this.o=!1,this.m=3,tt(12),ur(this),Li(this);break e}}if(this.R){l=!0;let ct;for(;!this.K&&this.C<g.length;)if(ct=ml(this,g),ct==bo){Te==4&&(this.m=4,tt(14),l=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==fl){this.m=4,tt(15),xn(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else xn(this.i,this.l,ct,null),Ge(this,ct);if(pl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||g.length!=0||this.h.h||(this.m=1,tt(16),l=!1),this.o=this.o&&l,!l)xn(this.i,this.l,g,"[Invalid Chunked Response]"),ur(this),Li(this);else if(g.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),qi(J),J.P=!0,tt(11))}}else xn(this.i,this.l,g,null),Ge(this,g);Te==4&&ur(this),this.o&&!this.K&&(Te==4?Ls(this.j,this):(this.o=!1,Oi(this)))}else Xo(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,tt(12)):(this.m=0,tt(13)),ur(this),Li(this)}}}catch{}finally{}};function dl(l){if(!pl(l))return l.g.la();const p=El(l.g);if(p==="")return"";let g="";const E=p.length,M=zn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ur(l),Li(l),"";l.h.i=new h.TextDecoder}for(let U=0;U<E;U++)l.h.h=!0,g+=l.h.i.decode(p[U],{stream:!(M&&U==E-1)});return p.length=0,l.h.g+=g,l.C=0,l.h.g}function pl(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function ml(l,p){var g=l.C,E=p.indexOf(`
`,g);return E==-1?bo:(g=Number(p.substring(g,E)),isNaN(g)?fl:(E+=1,E+g>p.length?bo:(p=p.slice(E,E+g),l.C=E+g,p)))}hn.prototype.cancel=function(){this.K=!0,ur(this)};function Oi(l){l.T=Date.now()+l.H,Uo(l,l.H)}function Uo(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ur(v(l.aa,l),p)}function As(l){l.D&&(h.clearTimeout(l.D),l.D=null)}hn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(ul(this.i,this.B),this.M!=2&&(or(),tt(17)),ur(this),this.m=2,Li(this)):Uo(this,this.T-l)};function Li(l){l.j.I==0||l.K||Ls(l.j,l)}function ur(l){As(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Es(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Ge(l,p){try{var g=l.j;if(g.I!=0&&(g.g==l||zo(g.h,l))){if(!l.L&&zo(g.h,l)&&g.I==3){try{var E=g.Ba.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Os(g),nn(g);else break e;qn(g),tt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ur(v(g.Va,g),6e3));Mi(g.h)<=1&&g.ta&&(g.ta=void 0)}else rn(g,11)}else if((l.L||g.g==l)&&Os(g),!S(p))for(M=g.Ba.g.parse(p),p=0;p<M.length;p++){let je=M[p];const ct=je[0];if(!(ct<=g.K))if(g.K=ct,je=je[1],g.I==2)if(je[0]=="c"){g.M=je[1],g.ba=je[2];const sn=je[3];sn!=null&&(g.ka=sn,g.j.info("VER="+g.ka));const mr=je[4];mr!=null&&(g.za=mr,g.j.info("SVER="+g.za));const Hn=je[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(E=1.5*Hn,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Wn=l.g;if(Wn){const Fs=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var U=E.h;U.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Cs(U,U.h),U.h=null))}if(E.G){const Zo=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(E.wa=Zo,Fe(E.J,E.G,Zo))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var J=l;if(E.na=Jo(E,E.L?E.ba:null,E.W),J.L){bi(E.h,J);var Te=J,it=E.O;it&&(Te.H=it),Te.D&&(As(Te),Oi(Te)),E.g=J}else xt(E);g.i.length>0&&pr(g)}else je[0]!="stop"&&je[0]!="close"||rn(g,7);else g.I==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?rn(g,7):Vs(g):je[0]!="noop"&&g.l&&g.l.qa(je),g.A=0)}}or(4)}catch{}}var Ic=class{constructor(l,p){this.g=l,this.map=p}};function Rs(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Mi(l){return l.h?1:l.g?l.g.size:0}function zo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Cs(l,p){l.g?l.g.add(p):l.h=p}function bi(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Rs.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Zt(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.G);return p}return z(l.i)}var gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(l,p){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const E=l[g].indexOf("=");let M,U=null;E>=0?(M=l[g].substring(0,E),U=l[g].substring(E+1)):M=l[g],p(M,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ln(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Ln?(this.l=l.l,Fi(this,l.j),this.o=l.o,this.g=l.g,Mn(this,l.u),this.h=l.h,$r(this,Qo(l.i)),this.m=l.m):l&&(p=String(l).match(gl))?(this.l=!1,Fi(this,p[1]||"",!0),this.o=Ui(p[2]||""),this.g=Ui(p[3]||"",!0),Mn(this,p[4]),this.h=Ui(p[5]||"",!0),$r(this,p[6]||"",!0),this.m=Ui(p[7]||"")):(this.l=!1,this.i=new De(null,this.l))}Ln.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(ji(p,$o,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(ji(p,$o,!0),"@"),l.push(On(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ji(g,g.charAt(0)=="/"?zi:qo,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ji(g,Ho)),l.join("")},Ln.prototype.resolve=function(l){const p=fn(this);let g=!!l.j;g?Fi(p,l.j):g=!!l.o,g?p.o=l.o:g=!!l.g,g?p.g=l.g:g=l.u!=null;var E=l.h;if(g)Mn(p,l.u);else if(g=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var M=p.h.lastIndexOf("/");M!=-1&&(E=p.h.slice(0,M+1)+E)}if(M=E,M==".."||M==".")E="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){E=M.lastIndexOf("/",0)==0,M=M.split("/");const U=[];for(let J=0;J<M.length;){const Te=M[J++];Te=="."?E&&J==M.length&&U.push(""):Te==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),E&&J==M.length&&U.push("")):(U.push(Te),E=!0)}E=U.join("/")}else E=M}return g?p.h=E:g=l.i.toString()!=="",g?$r(p,Qo(l.i)):g=!!l.m,g&&(p.m=l.m),p};function fn(l){return new Ln(l)}function Fi(l,p,g){l.j=g?Ui(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Mn(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function $r(l,p,g){p instanceof De?(l.i=p,ks(l.i,l.l)):(g||(p=ji(p,Sc)),l.i=new De(p,l.l))}function Fe(l,p,g){l.i.set(p,g)}function cr(l){return Fe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ui(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ji(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,Bo),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Bo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var $o=/[#\/\?@]/g,qo=/[#\?:]/g,zi=/[#\?]/g,Sc=/[#\?@]/g,Ho=/#/g;function De(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function bn(l){l.g||(l.g=new Map,l.h=0,l.i&&en(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}i=De.prototype,i.add=function(l,p){bn(this),this.i=null,l=Fn(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function Wo(l,p){bn(l),p=Fn(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Ps(l,p){return bn(l),p=Fn(l,p),l.g.has(p)}i.forEach=function(l,p){bn(this),this.g.forEach(function(g,E){g.forEach(function(M){l.call(p,M,E,this)},this)},this)};function Go(l,p){bn(l);let g=[];if(typeof p=="string")Ps(l,p)&&(g=g.concat(l.g.get(Fn(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)g=g.concat(l[p]);return g}i.set=function(l,p){return bn(this),this.i=null,l=Fn(this,l),Ps(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},i.get=function(l,p){return l?(l=Go(this,l),l.length>0?String(l[0]):p):p};function Ko(l,p,g){Wo(l,p),g.length>0&&(l.i=null,l.g.set(Fn(l,p),z(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let E=0;E<p.length;E++){var g=p[E];const M=On(g);g=Go(this,g);for(let U=0;U<g.length;U++){let J=M;g[U]!==""&&(J+="="+On(g[U])),l.push(J)}}return this.i=l.join("&")};function Qo(l){const p=new De;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function Fn(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function ks(l,p){p&&!l.j&&(bn(l),l.i=null,l.g.forEach(function(g,E){const M=E.toLowerCase();E!=M&&(Wo(this,E),Ko(this,M,g))},l)),l.j=p}function Un(l,p){const g=new jr;if(h.Image){const E=new Image;E.onload=w(At,g,"TestLoadImage: loaded",!0,p,E),E.onerror=w(At,g,"TestLoadImage: error",!1,p,E),E.onabort=w(At,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=w(At,g,"TestLoadImage: timeout",!1,p,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else p(!1)}function jn(l,p){const g=new jr,E=new AbortController,M=setTimeout(()=>{E.abort(),At(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:E.signal}).then(U=>{clearTimeout(M),U.ok?At(g,"TestPingServer: ok",!0,p):At(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),At(g,"TestPingServer: error",!1,p)})}function At(l,p,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function Bi(){this.g=new Vi}function hr(l){this.i=l.Sb||null,this.h=l.ab||!1}A(hr,Mr),hr.prototype.g=function(){return new tn(this.i,this.h)};function tn(l,p){ut.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(tn,ut),i=tn.prototype,i.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,In(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},i.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yl(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function yl(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}i.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?qr(this):In(this),this.readyState==3&&yl(this)}},i.Oa=function(l){this.g&&(this.response=this.responseText=l,qr(this))},i.Na=function(l){this.g&&(this.response=l,qr(this))},i.ga=function(){this.g&&qr(this)};function qr(l){l.readyState=4,l.l=null,l.j=null,l.B=null,In(l)}i.setRequestHeader=function(l,p){this.A.append(l,p)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function In(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _l(l){let p="";return ce(l,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function Ns(l,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=_l(g),typeof l=="string"?g!=null&&On(g):Fe(l,p,g))}function $e(l){ut.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A($e,ut);var vl=/^https?$/i,Ac=["POST","PUT"];i=$e.prototype,i.Fa=function(l){this.H=l},i.ea=function(l,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cl.g(),this.g.onreadystatechange=D(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(U){Hr(this,U);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())g.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),M=h.FormData&&l instanceof h.FormData,!(Array.prototype.indexOf.call(Ac,p,void 0)>=0)||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of g)this.g.setRequestHeader(U,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(U){Hr(this,U)}};function Hr(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Wr(l),dr(l)}function Wr(l){l.A||(l.A=!0,rt(l,"complete"),rt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,rt(this,"complete"),rt(this,"abort"),dr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),$e.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?fr(this):this.Xa())},i.Xa=function(){fr(this)};function fr(l){if(l.h&&typeof u<"u"){if(l.v&&zn(l)==4)setTimeout(l.Ca.bind(l),0);else if(rt(l,"readystatechange"),zn(l)==4){l.h=!1;try{const U=l.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=U===0){let J=String(l.D).match(gl)[1]||null;!J&&h.self&&h.self.location&&(J=h.self.location.protocol.slice(0,-1)),E=!vl.test(J?J.toLowerCase():"")}g=E}if(g)rt(l,"complete"),rt(l,"success");else{l.o=6;try{var M=zn(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",Wr(l)}}finally{dr(l)}}}}function dr(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,p||rt(l,"ready");try{g.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function zn(l){return l.g?l.g.readyState:0}i.ca=function(){try{return zn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),sl(p)}};function El(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Xo(l){const p={};l=(l.g&&zn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(S(l[E]))continue;var g=Ss(l[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=p[M]||[];p[M]=U,U.push(g)}B(p,function(E){return E.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function Ds(l){this.za=0,this.i=[],this.j=new jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bn("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bn("baseRetryDelayMs",5e3,l),this.Za=Bn("retryDelaySeedMs",1e4,l),this.Ta=Bn("forwardChannelMaxRetries",2,l),this.va=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Rs(l&&l.concurrentRequestLimit),this.Ba=new Bi,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ds.prototype,i.ka=8,i.I=1,i.connect=function(l,p,g,E){tt(0),this.W=l,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=Jo(this,null,this.W),pr(this)};function Vs(l){if(xs(l),l.I==3){var p=l.V++,g=fn(l.J);if(Fe(g,"SID",l.M),Fe(g,"RID",p),Fe(g,"TYPE","terminate"),$n(l,g),p=new hn(l,l.j,p),p.M=2,p.A=cr(fn(g)),g=!1,h.navigator&&h.navigator.sendBeacon)try{g=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&h.Image&&(new Image().src=p.A,g=!0),g||(p.g=Tl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Oi(p)}Hi(l)}function nn(l){l.g&&(qi(l),l.g.cancel(),l.g=null)}function xs(l){nn(l),l.v&&(h.clearTimeout(l.v),l.v=null),Os(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&h.clearTimeout(l.m),l.m=null)}function pr(l){if(!jo(l.h)&&!l.m){l.m=!0;var p=l.Ea;be||I(),Re||(be(),Re=!0),N.add(p,l),l.D=0}}function wl(l,p){return Mi(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ur(v(l.Ea,l,p),Ms(l,l.D)),l.D++,!0)}i.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const M=new hn(this,this.j,l);let U=this.o;if(this.U&&(U?(U=P(U),le(U,this.U)):U=this.U),this.u!==null||this.R||(M.J=U,U=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Yo(this,M,p),g=fn(this.J),Fe(g,"RID",l),Fe(g,"CVER",22),this.G&&Fe(g,"X-HTTP-Session-Id",this.G),$n(this,g),U&&(this.R?p="headers="+On(_l(U))+"&"+p:this.u&&Ns(g,this.u,U)),Cs(this.h,M),this.Ra&&Fe(g,"TYPE","init"),this.S?(Fe(g,"$req",p),Fe(g,"SID","null"),M.U=!0,Tn(M,g,null)):Tn(M,g,p),this.I=2}}else this.I==3&&(l?$i(this,l):this.i.length==0||jo(this.h)||$i(this))};function $i(l,p){var g;p?g=p.l:g=l.V++;const E=fn(l.J);Fe(E,"SID",l.M),Fe(E,"RID",g),Fe(E,"AID",l.K),$n(l,E),l.u&&l.o&&Ns(E,l.u,l.o),g=new hn(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Yo(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Cs(l.h,g),Tn(g,E,p)}function $n(l,p){l.H&&ce(l.H,function(g,E){Fe(p,E,g)}),l.l&&ce({},function(g,E){Fe(p,E,g)})}function Yo(l,p,g){g=Math.min(l.i.length,g);const E=l.l?v(l.l.Ka,l.l,l):null;e:{var M=l.i;let Te=-1;for(;;){const it=["count="+g];Te==-1?g>0?(Te=M[0].g,it.push("ofs="+Te)):Te=0:it.push("ofs="+Te);let je=!0;for(let ct=0;ct<g;ct++){var U=M[ct].g;const sn=M[ct].map;if(U-=Te,U<0)Te=Math.max(0,M[ct].g-100),je=!1;else try{U="req"+U+"_"||"";try{var J=sn instanceof Map?sn:Object.entries(sn);for(const[mr,Hn]of J){let Wn=Hn;m(Hn)&&(Wn=Lr(Hn)),it.push(U+mr+"="+encodeURIComponent(Wn))}}catch(mr){throw it.push(U+"type="+encodeURIComponent("_badmap")),mr}}catch{E&&E(sn)}}if(je){J=it.join("&");break e}}J=void 0}return l=l.i.splice(0,g),p.G=l,J}function xt(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;be||I(),Re||(be(),Re=!0),N.add(p,l),l.A=0}}function qn(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ur(v(l.Da,l),Ms(l,l.A)),l.A++,!0)}i.Da=function(){if(this.v=null,Gr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ur(v(this.Wa,this),l)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tt(10),nn(this),Gr(this))};function qi(l){l.B!=null&&(h.clearTimeout(l.B),l.B=null)}function Gr(l){l.g=new hn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=fn(l.na);Fe(p,"RID","rpc"),Fe(p,"SID",l.M),Fe(p,"AID",l.K),Fe(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Fe(p,"TO",l.ia),Fe(p,"TYPE","xmlhttp"),$n(l,p),l.u&&l.o&&Ns(p,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=cr(fn(p)),g.u=null,g.R=!0,Fo(g,l)}i.Va=function(){this.C!=null&&(this.C=null,nn(this),qn(this),tt(19))};function Os(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function Ls(l,p){var g=null;if(l.g==p){Os(l),qi(l),l.g=null;var E=2}else if(zo(l.h,p))g=p.G,bi(l.h,p),E=1;else return;if(l.I!=0){if(p.o)if(E==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var M=l.D;E=Fr(),rt(E,new Mo(E,g)),pr(l)}else xt(l);else if(M=p.m,M==3||M==0&&p.X>0||!(E==1&&wl(l,p)||E==2&&qn(l)))switch(g&&g.length>0&&(p=l.h,p.i=p.i.concat(g)),M){case 1:rn(l,5);break;case 4:rn(l,10);break;case 3:rn(l,6);break;default:rn(l,2)}}}function Ms(l,p){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*p}function rn(l,p){if(l.j.info("Error code "+p),p==2){var g=v(l.bb,l),E=l.Ua;const M=!E;E=new Ln(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Fi(E,"https"),cr(E),M?Un(E.toString(),g):jn(E.toString(),g)}else tt(2);l.I=0,l.l&&l.l.pa(p),Hi(l),xs(l)}i.bb=function(l){l?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Hi(l){if(l.I=0,l.ja=[],l.l){const p=Zt(l.h);(p.length!=0||l.i.length!=0)&&(X(l.ja,p),X(l.ja,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.oa()}}function Jo(l,p,g){var E=g instanceof Ln?fn(g):new Ln(g);if(E.g!="")p&&(E.g=p+"."+E.g),Mn(E,E.u);else{var M=h.location;E=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const U=new Ln(null);E&&Fi(U,E),p&&(U.g=p),M&&Mn(U,M),g&&(U.h=g),E=U}return g=l.G,p=l.wa,g&&p&&Fe(E,g,p),Fe(E,"VER",l.ka),$n(l,E),E}function Tl(l,p,g){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new $e(new hr({ab:g})):new $e(l.ma),p.Fa(l.L),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Il(){}i=Il.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function bs(){}bs.prototype.g=function(l,p){return new Rt(l,p)};function Rt(l,p){ut.call(this),this.g=new Ds(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!S(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Kr(this)}A(Rt,ut),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Vs(this.g)},Rt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Lr(l),l=g);p.i.push(new Ic(p.Ya++,l)),p.I==3&&pr(p)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,Rt.Z.N.call(this)};function Sl(l){ws.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}A(Sl,ws);function Al(){Lo.call(this),this.status=1}A(Al,Lo);function Kr(l){this.g=l}A(Kr,Il),Kr.prototype.ra=function(){rt(this.g,"a")},Kr.prototype.qa=function(l){rt(this.g,new Sl(l))},Kr.prototype.pa=function(l){rt(this.g,new Al)},Kr.prototype.oa=function(){rt(this.g,"b")},bs.prototype.createWebChannel=bs.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,D_=function(){return new bs},N_=function(){return Fr()},k_=wn,Ef={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,ku=zr,Br.COMPLETE="complete",P_=Br,ol.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Ra=ol,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,C_=$e}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore",Dg="4.9.2";class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");let Ao="12.3.0";const fs=new jf("@firebase/firestore");function so(){return fs.logLevel}function ne(i,...e){if(fs.logLevel<=Ce.DEBUG){const t=e.map(Xf);fs.debug(`Firestore (${Ao}): ${i}`,...t)}}function kr(i,...e){if(fs.logLevel<=Ce.ERROR){const t=e.map(Xf);fs.error(`Firestore (${Ao}): ${i}`,...t)}}function go(i,...e){if(fs.logLevel<=Ce.WARN){const t=e.map(Xf);fs.warn(`Firestore (${Ao}): ${i}`,...t)}}function Xf(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function pe(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,V_(i,s,t)}function V_(i,e,t){let s=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw kr(s),new Error(s)}function Ue(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||V_(e,o,s)}function Ie(i,e){return i}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ei{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class x_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class hS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fS{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let u=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ei,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ei)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string",31837,{l:s}),new x_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class dS{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pS{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new dS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ue(this.o===void 0,3512);const s=u=>{u.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ne("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ue(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Vg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gS(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class Yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=gS(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Pe(i,e){return i<e?-1:i>e?1:0}function wf(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return of(o)===of(u)?Pe(o,u):of(o)?1:-1}return Pe(i.length,e.length)}const yS=55296,_S=57343;function of(i){const e=i.charCodeAt(0);return e>=yS&&e<=_S}function yo(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}const xg="__name__";class Yn{constructor(e,t,s){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&pe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Yn.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Pe(e.length,t.length)}static compareSegments(e,t){const s=Yn.isNumericId(e),o=Yn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Yn.extractNumericId(e).compare(Yn.extractNumericId(t)):wf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class We extends Yn{construct(e,t,s){return new We(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const vS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Yn{construct(e,t,s){return new Dt(e,t,s)}static isValidIdentifier(e){return vS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xg}static keyField(){return new Dt([xg])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(We.fromString(e))}static fromName(e){return new he(We.fromString(e).popFirst(5))}static empty(){return new he(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new We(e.slice()))}}function O_(i,e,t){if(!t)throw new ee($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ES(i,e,t,s){if(e===!0&&s===!0)throw new ee($.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Og(i){if(!he.isDocumentKey(i))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Lg(i){if(he.isDocumentKey(i))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function L_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function sc(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe(12329,{type:typeof i})}function er(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sc(i);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Ya(i,e){if(!L_(i))throw new ee($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new ee($.INVALID_ARGUMENT,t);return!0}const Mg=-62135596800,bg=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*bg);return new Xe(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mg)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bg}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ya(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:pt("string",Xe._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Xe(0,0))}static max(){return new Ee(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Fa=-1;function wS(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(s===1e9?new Xe(t+1,0):new Xe(t,s));return new Ii(o,he.empty(),e)}function TS(i){return new Ii(i.readTime,i.key,Fa)}class Ii{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ii(Ee.min(),he.empty(),Fa)}static max(){return new Ii(Ee.max(),he.empty(),Fa)}}function IS(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(i.documentKey,e.documentKey),t!==0?t:Pe(i.largestBatchId,e.largestBatchId))}const SS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ro(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==SS)throw i;ne("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,s)=>{t(e)}))}static reject(e){return new q(((t,s)=>{s(e)}))}static waitFor(e){return new q(((t,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(y=>s(y)))})),h=!0,u===o&&t()}))}static or(e){let t=q.resolve(!1);for(const s of e)t=t.next((o=>o?q.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new q(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let y=0;y<u;y++){const v=y;t(e[v]).next((w=>{h[v]=w,++m,m===u&&s(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new q(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function RS(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Co(i){return i.name==="IndexedDbTransactionError"}class oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}oc.ce=-1;const Jf=-1;function ac(i){return i==null}function $u(i){return i===0&&1/i==-1/0}function CS(i){return typeof i=="number"&&Number.isInteger(i)&&!$u(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const M_="";function PS(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Fg(e)),e=kS(i.get(t),e);return Fg(e)}function kS(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case M_:t+="";break;default:t+=u}}return t}function Fg(i){return i+M_+""}function Ug(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ki(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function b_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class et{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Nt.RED,this.left=o??Nt.EMPTY,this.right=u??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Nt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jg(this.data.getIterator())}getIteratorFrom(e){return new jg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class jg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class un{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new un([])}unionWith(e){let t=new vt(Dt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class F_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new F_("Invalid base64 string: "+u):u}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const NS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(i){if(Ue(!!i,39018),typeof i=="string"){let e=0;const t=NS.exec(i);if(Ue(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:at(i.seconds),nanos:at(i.nanos)}}function at(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ai(i){return typeof i=="string"?Vt.fromBase64String(i):Vt.fromUint8Array(i)}const U_="server_timestamp",j_="__type__",z_="__previous_value__",B_="__local_write_time__";function Zf(i){return(i?.mapValue?.fields||{})[j_]?.stringValue===U_}function lc(i){const e=i.mapValue.fields[z_];return Zf(e)?lc(e):e}function Ua(i){const e=Si(i.mapValue.fields[B_].timestampValue);return new Xe(e.seconds,e.nanos)}class DS{constructor(e,t,s,o,u,h,m,y,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=w}}const qu="(default)";class ja{constructor(e,t){this.projectId=e,this.database=t||qu}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database===qu}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}const $_="__type__",VS="__max__",Tu={mapValue:{}},q_="__vector__",Hu="value";function Ri(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zf(i)?4:OS(i)?9007199254740991:xS(i)?10:11:pe(28295,{value:i})}function sr(i,e){if(i===e)return!0;const t=Ri(i);if(t!==Ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ua(i).isEqual(Ua(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Si(o.timestampValue),m=Si(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Ai(o.bytesValue).isEqual(Ai(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return at(o.geoPointValue.latitude)===at(u.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return at(o.integerValue)===at(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=at(o.doubleValue),m=at(u.doubleValue);return h===m?$u(h)===$u(m):isNaN(h)&&isNaN(m)}return!1})(i,e);case 9:return yo(i.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Ug(h)!==Ug(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!sr(h[y],m[y])))return!1;return!0})(i,e);default:return pe(52216,{left:i})}}function za(i,e){return(i.values||[]).find((t=>sr(t,e)))!==void 0}function _o(i,e){if(i===e)return 0;const t=Ri(i),s=Ri(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=at(u.integerValue||u.doubleValue),y=at(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(i,e);case 3:return zg(i.timestampValue,e.timestampValue);case 4:return zg(Ua(i),Ua(e));case 5:return wf(i.stringValue,e.stringValue);case 6:return(function(u,h){const m=Ai(u),y=Ai(h);return m.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),y=h.split("/");for(let v=0;v<m.length&&v<y.length;v++){const w=Pe(m[v],y[v]);if(w!==0)return w}return Pe(m.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Pe(at(u.latitude),at(h.latitude));return m!==0?m:Pe(at(u.longitude),at(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Bg(i.arrayValue,e.arrayValue);case 10:return(function(u,h){const m=u.fields||{},y=h.fields||{},v=m[Hu]?.arrayValue,w=y[Hu]?.arrayValue,A=Pe(v?.values?.length||0,w?.values?.length||0);return A!==0?A:Bg(v,w)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Tu.mapValue&&h===Tu.mapValue)return 0;if(u===Tu.mapValue)return 1;if(h===Tu.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),v=h.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let A=0;A<y.length&&A<w.length;++A){const D=wf(y[A],w[A]);if(D!==0)return D;const z=_o(m[y[A]],v[w[A]]);if(z!==0)return z}return Pe(y.length,w.length)})(i.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function zg(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Pe(i,e);const t=Si(i),s=Si(e),o=Pe(t.seconds,s.seconds);return o!==0?o:Pe(t.nanos,s.nanos)}function Bg(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=_o(t[o],s[o]);if(u)return u}return Pe(t.length,s.length)}function vo(i){return Tf(i)}function Tf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=Si(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ai(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return he.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Tf(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Tf(t.fields[h])}`;return o+"}"})(i.mapValue):pe(61005,{value:i})}function Nu(i){switch(Ri(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lc(i);return e?16+Nu(e):16;case 5:return 2*i.stringValue.length;case 6:return Ai(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Nu(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return ki(s.fields,((u,h)=>{o+=u.length+Nu(h)})),o})(i.mapValue);default:throw pe(13486,{value:i})}}function $g(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function If(i){return!!i&&"integerValue"in i}function ed(i){return!!i&&"arrayValue"in i}function qg(i){return!!i&&"nullValue"in i}function Hg(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Du(i){return!!i&&"mapValue"in i}function xS(i){return(i?.mapValue?.fields||{})[$_]?.stringValue===q_}function Va(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ki(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Va(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Va(i.arrayValue.values[t]);return e}return{...i}}function OS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===VS}class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Du(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(t)}setAll(e){let t=Dt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=Va(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Du(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Du(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ki(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Jt(Va(this.value))}}function H_(i){const e=[];return ki(i.fields,((t,s)=>{const o=new Dt([t]);if(Du(s)){const u=H_(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new un(e)}class jt{constructor(e,t,s,o,u,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new jt(e,0,Ee.min(),Ee.min(),Ee.min(),Jt.empty(),0)}static newFoundDocument(e,t,s,o){return new jt(e,1,t,Ee.min(),s,o,0)}static newNoDocument(e,t){return new jt(e,2,t,Ee.min(),Ee.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,Ee.min(),Ee.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wu{constructor(e,t){this.position=e,this.inclusive=t}}function Wg(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=he.comparator(he.fromName(h.referenceValue),t.key):s=_o(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Gg(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!sr(i.position[t],e.position[t]))return!1;return!0}class Ba{constructor(e,t="asc"){this.field=e,this.dir=t}}function LS(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class W_{}class dt extends W_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new bS(e,t,s):t==="array-contains"?new jS(e,s):t==="in"?new zS(e,s):t==="not-in"?new BS(e,s):t==="array-contains-any"?new $S(e,s):new dt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new FS(e,s):new US(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_o(t,this.value)):t!==null&&Ri(this.value)===Ri(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends W_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Vn(e,t)}matches(e){return G_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function G_(i){return i.op==="and"}function K_(i){return MS(i)&&G_(i)}function MS(i){for(const e of i.filters)if(e instanceof Vn)return!1;return!0}function Sf(i){if(i instanceof dt)return i.field.canonicalString()+i.op.toString()+vo(i.value);if(K_(i))return i.filters.map((e=>Sf(e))).join(",");{const e=i.filters.map((t=>Sf(t))).join(",");return`${i.op}(${e})`}}function Q_(i,e){return i instanceof dt?(function(s,o){return o instanceof dt&&s.op===o.op&&s.field.isEqual(o.field)&&sr(s.value,o.value)})(i,e):i instanceof Vn?(function(s,o){return o instanceof Vn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&Q_(h,o.filters[m])),!0):!1})(i,e):void pe(19439)}function X_(i){return i instanceof dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`})(i):i instanceof Vn?(function(t){return t.op.toString()+" {"+t.getFilters().map(X_).join(" ,")+"}"})(i):"Filter"}class bS extends dt{constructor(e,t,s){super(e,t,s),this.key=he.fromName(s.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class FS extends dt{constructor(e,t){super(e,"in",t),this.keys=Y_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class US extends dt{constructor(e,t){super(e,"not-in",t),this.keys=Y_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y_(i,e){return(e.arrayValue?.values||[]).map((t=>he.fromName(t.referenceValue)))}class jS extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ed(t)&&za(t.arrayValue,this.value)}}class zS extends dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&za(this.value.arrayValue,t)}}class BS extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!za(this.value.arrayValue,t)}}class $S extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ed(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>za(this.value.arrayValue,s)))}}class qS{constructor(e,t=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function Kg(i,e=null,t=[],s=[],o=null,u=null,h=null){return new qS(i,e,t,s,o,u,h)}function td(i){const e=Ie(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Sf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>vo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>vo(s))).join(",")),e.Te=t}return e.Te}function nd(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!LS(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Q_(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Gg(i.startAt,e.startAt)&&Gg(i.endAt,e.endAt)}function Af(i){return he.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Po{constructor(e,t=null,s=[],o=[],u=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HS(i,e,t,s,o,u,h,m){return new Po(i,e,t,s,o,u,h,m)}function rd(i){return new Po(i)}function Qg(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function J_(i){return i.collectionGroup!==null}function xa(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new vt(Dt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Ba(u,s))})),t.has(Dt.keyField().canonicalString())||e.Ie.push(new Ba(Dt.keyField(),s))}return e.Ie}function tr(i){const e=Ie(i);return e.Ee||(e.Ee=WS(e,xa(i))),e.Ee}function WS(i,e){if(i.limitType==="F")return Kg(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Ba(o.field,u)}));const t=i.endAt?new Wu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Wu(i.startAt.position,i.startAt.inclusive):null;return Kg(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Rf(i,e){const t=i.filters.concat([e]);return new Po(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Gu(i,e,t){return new Po(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function uc(i,e){return nd(tr(i),tr(e))&&i.limitType===e.limitType}function Z_(i){return`${td(tr(i))}|lt:${i.limitType}`}function oo(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>X_(o))).join(", ")}]`),ac(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>vo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>vo(o))).join(",")),`Target(${s})`})(tr(i))}; limitType=${i.limitType})`}function cc(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):he.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of xa(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,y){const v=Wg(h,m,y);return h.inclusive?v<=0:v<0})(s.startAt,xa(s),o)||s.endAt&&!(function(h,m,y){const v=Wg(h,m,y);return h.inclusive?v>=0:v>0})(s.endAt,xa(s),o))})(i,e)}function GS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ev(i){return(e,t)=>{let s=!1;for(const o of xa(i)){const u=KS(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function KS(i,e,t){const s=i.field.isKeyField()?he.comparator(e.key,t.key):(function(u,h,m){const y=h.data.field(u),v=m.data.field(u);return y!==null&&v!==null?_o(y,v):pe(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:i.dir})}}class ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return b_(this.inner)}size(){return this.innerSize}}const QS=new et(he.comparator);function Nr(){return QS}const tv=new et(he.comparator);function Ca(...i){let e=tv;for(const t of i)e=e.insert(t.key,t);return e}function nv(i){let e=tv;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function os(){return Oa()}function rv(){return Oa()}function Oa(){return new ms((i=>i.toString()),((i,e)=>i.isEqual(e)))}const XS=new et(he.comparator),YS=new vt(he.comparator);function ke(...i){let e=YS;for(const t of i)e=e.add(t);return e}const JS=new vt(Pe);function ZS(){return JS}function id(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function iv(i){return{integerValue:""+i}}function e1(i,e){return CS(e)?iv(e):id(i,e)}class hc{constructor(){this._=void 0}}function t1(i,e,t){return i instanceof $a?(function(o,u){const h={fields:{[j_]:{stringValue:U_},[B_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Zf(u)&&(u=lc(u)),u&&(h.fields[z_]=u),{mapValue:h}})(t,e):i instanceof qa?ov(i,e):i instanceof Ha?av(i,e):(function(o,u){const h=sv(o,u),m=Xg(h)+Xg(o.Ae);return If(h)&&If(o.Ae)?iv(m):id(o.serializer,m)})(i,e)}function n1(i,e,t){return i instanceof qa?ov(i,e):i instanceof Ha?av(i,e):t}function sv(i,e){return i instanceof Ku?(function(s){return If(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class $a extends hc{}class qa extends hc{constructor(e){super(),this.elements=e}}function ov(i,e){const t=lv(e);for(const s of i.elements)t.some((o=>sr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ha extends hc{constructor(e){super(),this.elements=e}}function av(i,e){let t=lv(e);for(const s of i.elements)t=t.filter((o=>!sr(o,s)));return{arrayValue:{values:t}}}class Ku extends hc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Xg(i){return at(i.integerValue||i.doubleValue)}function lv(i){return ed(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class r1{constructor(e,t){this.field=e,this.transform=t}}function i1(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof qa&&o instanceof qa||s instanceof Ha&&o instanceof Ha?yo(s.elements,o.elements,sr):s instanceof Ku&&o instanceof Ku?sr(s.Ae,o.Ae):s instanceof $a&&o instanceof $a})(i.transform,e.transform)}class s1{constructor(e,t){this.version=e,this.transformResults=t}}class cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class fc{}function uv(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new sd(i.key,cn.none()):new Ja(i.key,i.data,cn.none());{const t=i.data,s=Jt.empty();let o=new vt(Dt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new Ni(i.key,s,new un(o.toArray()),cn.none())}}function o1(i,e,t){i instanceof Ja?(function(o,u,h){const m=o.value.clone(),y=Jg(o.fieldTransforms,u,h.transformResults);m.setAll(y),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,t):i instanceof Ni?(function(o,u,h){if(!Vu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Jg(o.fieldTransforms,u,h.transformResults),y=u.data;y.setAll(cv(o)),y.setAll(m),u.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(i,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function La(i,e,t,s){return i instanceof Ja?(function(u,h,m,y){if(!Vu(u.precondition,h))return m;const v=u.value.clone(),w=Zg(u.fieldTransforms,y,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(i,e,t,s):i instanceof Ni?(function(u,h,m,y){if(!Vu(u.precondition,h))return m;const v=Zg(u.fieldTransforms,y,h),w=h.data;return w.setAll(cv(u)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(i,e,t,s):(function(u,h,m){return Vu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(i,e,t)}function a1(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=sv(s.transform,o||null);u!=null&&(t===null&&(t=Jt.empty()),t.set(s.field,u))}return t||null}function Yg(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&yo(s,o,((u,h)=>i1(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ja extends fc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ni extends fc{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function cv(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function Jg(i,e,t){const s=new Map;Ue(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,n1(h,m,t[o]))}return s}function Zg(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,t1(u,h,e))}return s}class sd extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l1 extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&o1(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=La(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=La(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=rv();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const y=uv(h,m);y!==null&&s.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ee.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((t,s)=>Yg(t,s)))&&yo(this.baseMutations,e.baseMutations,((t,s)=>Yg(t,s)))}}class od{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ue(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return XS})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new od(e,t,s,o)}}class c1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class h1{constructor(e,t){this.count=e,this.unchangedNames=t}}var ft,xe;function f1(i){switch(i){case $.OK:return pe(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return pe(15467,{code:i})}}function hv(i){if(i===void 0)return kr("GRPC error has no .code"),$.UNKNOWN;switch(i){case ft.OK:return $.OK;case ft.CANCELLED:return $.CANCELLED;case ft.UNKNOWN:return $.UNKNOWN;case ft.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ft.INTERNAL:return $.INTERNAL;case ft.UNAVAILABLE:return $.UNAVAILABLE;case ft.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ft.NOT_FOUND:return $.NOT_FOUND;case ft.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ft.ABORTED:return $.ABORTED;case ft.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ft.DATA_LOSS:return $.DATA_LOSS;default:return pe(39323,{code:i})}}(xe=ft||(ft={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";function d1(){return new TextEncoder}const p1=new vi([4294967295,4294967295],0);function ey(i){const e=d1().encode(i),t=new R_;return t.update(e),new Uint8Array(t.digest())}function ty(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new vi([t,s],0),new vi([o,u],0)]}class ad{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pa(`Invalid padding: ${t}`);if(s<0)throw new Pa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Pa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Pa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vi.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(vi.fromNumber(s)));return o.compare(p1)===1&&(o=new vi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ey(e),[s,o]=ty(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ad(u,o,t);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=ey(e),[s,o]=ty(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dc{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Za.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new dc(Ee.min(),o,new et(Pe),Nr(),ke())}}class Za{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Za(s,t,ke(),ke(),ke())}}class xu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class fv{constructor(e,t){this.targetId=e,this.Ce=t}}class dv{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ny{constructor(){this.ve=0,this.Fe=ry(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),s=ke();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:pe(38017,{changeType:u})}})),new Za(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=ry()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class m1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=Iu(),this.He=Iu(),this.Ye=new et(Pe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Af(u))if(s===0){const h=new he(u.path);this.et(t,h,jt.newNoDocument(h,Ee.min()))}else Ue(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const m=this.ut(e),y=m?this.ct(m,e,h):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=Ai(s).toUint8Array()}catch(y){if(y instanceof F_)return go("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new ad(h,o,u)}catch(y){return go(y instanceof Pa?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&Af(m.target)){const y=new he(m.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,jt.newNoDocument(y,e))}u.Be&&(t.set(h,u.ke()),u.qe())}}));let s=ke();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new dc(e,t,this.Ye,this.je,s);return this.je=Nr(),this.Je=Iu(),this.He=Iu(),this.Ye=new et(Pe),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ny,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vt(Pe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vt(Pe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ny),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Iu(){return new et(he.comparator)}function ry(){return new et(he.comparator)}const g1={asc:"ASCENDING",desc:"DESCENDING"},y1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_1={and:"AND",or:"OR"};class v1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cf(i,e){return i.useProto3Json||ac(e)?e:{value:e}}function Qu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pv(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function E1(i,e){return Qu(i,e.toTimestamp())}function nr(i){return Ue(!!i,49232),Ee.fromTimestamp((function(t){const s=Si(t);return new Xe(s.seconds,s.nanos)})(i))}function ld(i,e){return Pf(i,e).canonicalString()}function Pf(i,e){const t=(function(o){return new We(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function mv(i){const e=We.fromString(i);return Ue(Ev(e),10190,{key:e.toString()}),e}function kf(i,e){return ld(i.databaseId,e.path)}function af(i,e){const t=mv(e);if(t.get(1)!==i.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new he(yv(t))}function gv(i,e){return ld(i.databaseId,e)}function w1(i){const e=mv(i);return e.length===4?We.emptyPath():yv(e)}function Nf(i){return new We(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function yv(i){return Ue(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function iy(i,e,t){return{name:kf(i,e),fields:t.value.mapValue.fields}}function T1(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:pe(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(v,w){return v.useProto3Json?(Ue(w===void 0||typeof w=="string",58123),Vt.fromBase64String(w||"")):(Ue(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Vt.fromUint8Array(w||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const w=v.code===void 0?$.UNKNOWN:hv(v.code);return new ee(w,v.message||"")})(h);t=new dv(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=af(i,s.document.name),u=nr(s.document.updateTime),h=s.document.createTime?nr(s.document.createTime):Ee.min(),m=new Jt({mapValue:{fields:s.document.fields}}),y=jt.newFoundDocument(o,u,h,m),v=s.targetIds||[],w=s.removedTargetIds||[];t=new xu(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=af(i,s.document),u=s.readTime?nr(s.readTime):Ee.min(),h=jt.newNoDocument(o,u),m=s.removedTargetIds||[];t=new xu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=af(i,s.document),u=s.removedTargetIds||[];t=new xu([],u,o,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new h1(o,u),m=s.targetId;t=new fv(m,h)}}return t}function I1(i,e){let t;if(e instanceof Ja)t={update:iy(i,e.key,e.value)};else if(e instanceof sd)t={delete:kf(i,e.key)};else if(e instanceof Ni)t={update:iy(i,e.key,e.data),updateMask:V1(e.fieldMask)};else{if(!(e instanceof l1))return pe(16599,{Vt:e.type});t={verify:kf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof $a)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof qa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ha)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ku)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw pe(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:E1(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:pe(27497)})(i,e.precondition)),t}function S1(i,e){return i&&i.length>0?(Ue(e!==void 0,14353),i.map((t=>(function(o,u){let h=o.updateTime?nr(o.updateTime):nr(u);return h.isEqual(Ee.min())&&(h=nr(u)),new s1(h,o.transformResults||[])})(t,e)))):[]}function A1(i,e){return{documents:[gv(i,e.path)]}}function R1(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=gv(i,o);const u=(function(v){if(v.length!==0)return vv(Vn.create(v,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(v){if(v.length!==0)return v.map((w=>(function(D){return{field:ao(D.field),direction:k1(D.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Cf(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function C1(i){let e=w1(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ue(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let u=[];t.where&&(u=(function(A){const D=_v(A);return D instanceof Vn&&K_(D)?D.getFilters():[D]})(t.where));let h=[];t.orderBy&&(h=(function(A){return A.map((D=>(function(X){return new Ba(lo(X.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(D)))})(t.orderBy));let m=null;t.limit&&(m=(function(A){let D;return D=typeof A=="object"?A.value:A,ac(D)?null:D})(t.limit));let y=null;t.startAt&&(y=(function(A){const D=!!A.before,z=A.values||[];return new Wu(z,D)})(t.startAt));let v=null;return t.endAt&&(v=(function(A){const D=!A.before,z=A.values||[];return new Wu(z,D)})(t.endAt)),HS(e,o,h,u,m,"F",y,v)}function P1(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _v(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=lo(t.unaryFilter.field);return dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=lo(t.unaryFilter.field);return dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=lo(t.unaryFilter.field);return dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=lo(t.unaryFilter.field);return dt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(i):i.fieldFilter!==void 0?(function(t){return dt.create(lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Vn.create(t.compositeFilter.filters.map((s=>_v(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(i):pe(30097,{filter:i})}function k1(i){return g1[i]}function N1(i){return y1[i]}function D1(i){return _1[i]}function ao(i){return{fieldPath:i.canonicalString()}}function lo(i){return Dt.fromServerFormat(i.fieldPath)}function vv(i){return i instanceof dt?(function(t){if(t.op==="=="){if(Hg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NAN"}};if(qg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NAN"}};if(qg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(t.field),op:N1(t.op),value:t.value}}})(i):i instanceof Vn?(function(t){const s=t.getFilters().map((o=>vv(o)));return s.length===1?s[0]:{compositeFilter:{op:D1(t.op),filters:s}}})(i):pe(54877,{filter:i})}function V1(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ev(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class pi{constructor(e,t,s,o,u=Ee.min(),h=Ee.min(),m=Vt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class x1{constructor(e){this.yt=e}}function O1(i){const e=C1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Gu(e,e.limit,"L"):e}class L1{constructor(){this.Cn=new M1}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Ii.min())}updateCollectionGroup(e,t,s){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class M1{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new vt(We.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new vt(We.comparator)).toArray()}}const sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wv=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(wv,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);class Eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Eo(0)}static cr(){return new Eo(-1)}}const oy="LruGarbageCollector",b1=1048576;function ay([i,e],[t,s]){const o=Pe(i,t);return o===0?Pe(e,s):o}class F1{constructor(e){this.Ir=e,this.buffer=new vt(ay),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ay(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(oy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Co(t)?ne(oy,"Ignoring IndexedDB error during garbage collection: ",t):await Ro(t)}await this.Vr(3e5)}))}}class j1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(oc.ce);const s=new F1(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(sy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,h,m,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,t)))).next((A=>(u=A,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(v=Date.now(),so()<=Ce.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${A} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function z1(i,e){return new j1(i,e)}class B1{constructor(){this.changes=new ms((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class q1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&La(s.mutation,o,un.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ke()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ke()){const o=os();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let h=Ca();return u.forEach(((m,y)=>{h=h.insert(m,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=os();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ke())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,s,o){let u=Nr();const h=Oa(),m=(function(){return Oa()})();return t.forEach(((y,v)=>{const w=s.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Ni)?u=u.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),La(w.mutation,v,w.mutation.getFieldMask(),Xe.now())):h.set(v.key,un.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>m.set(v,new $1(w,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Oa();let o=new et(((h,m)=>h-m)),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let w=s.get(y)||un.empty();w=m.applyToLocalView(v,w),s.set(y,w);const A=(o.get(m.batchId)||ke()).add(y);o=o.insert(m.batchId,A)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,w=y.value,A=rv();w.forEach((D=>{if(!u.has(D)){const z=uv(t.get(D),s.get(D));z!==null&&A.set(D,z),u=u.add(D)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,A))}return q.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return he.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):J_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):q.resolve(os());let m=Fa,y=u;return h.next((v=>q.forEach(v,((w,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(w)?q.resolve():this.remoteDocumentCache.getEntry(e,w).next((D=>{y=y.insert(w,D)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,y,v,ke()))).next((w=>({batchId:m,changes:nv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((s=>{let o=Ca();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=Ca();return this.indexManager.getCollectionParents(e,u).next((m=>q.forEach(m,(y=>{const v=(function(A,D){return new Po(D,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((w=>{w.forEach(((A,D)=>{h=h.insert(A,D)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((h=>{u.forEach(((y,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,jt.newInvalidDocument(w)))}));let m=Ca();return h.forEach(((y,v)=>{const w=u.get(y);w!==void 0&&La(w.mutation,v,un.empty(),Xe.now()),cc(t,v)&&(m=m.insert(y,v))})),m}))}}class H1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:nr(o.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:O1(o.bundledQuery),readTime:nr(o.readTime)}})(t)),q.resolve()}}class W1{constructor(){this.overlays=new et(he.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=os();return q.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),q.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),q.resolve()}getOverlaysForCollection(e,t,s){const o=os(),u=t.length+1,h=new he(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new et(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=u.get(v.largestBatchId);w===null&&(w=os(),u=u.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const m=os(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,w)=>m.set(v,w))),!(m.size()>=o)););return q.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new c1(t,s));let u=this.qr.get(t);u===void 0&&(u=ke(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}class G1{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class ud{constructor(){this.Qr=new vt(It.$r),this.Ur=new vt(It.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new It(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new It(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new he(new We([])),s=new It(t,e),o=new It(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new he(new We([])),s=new It(t,e),o=new It(t,e+1);let u=ke();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new It(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class It{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||Pe(e.Yr,t.Yr)}static Kr(e,t){return Pe(e.Yr,t.Yr)||he.comparator(e.key,t.key)}}class K1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vt(It.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new u1(u,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new It(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return q.resolve(h)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return q.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Jf:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),q.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new vt(Pe);return t.forEach((o=>{const u=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;he.isDocumentKey(u)||(u=u.child(""));const h=new It(new he(u),0);let m=new vt(Pe);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(m=m.add(y.Yr)),!0)}),h),q.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ue(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return q.forEach(t.mutations,(o=>{const u=new It(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new It(t,0),o=this.Zr.firstAfterOrEqual(s);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Q1{constructor(e){this.ri=e,this.docs=(function(){return new et(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return q.resolve(s?s.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let s=Nr();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():jt.newInvalidDocument(o))})),q.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Nr();const h=t.path,m=new he(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||IS(TS(w),s)<=0||(o.has(w.key)||cc(t,w))&&(u=u.insert(w.key,w.mutableCopy()))}return q.resolve(u)}getAllFromCollectionGroup(e,t,s,o){pe(9500)}ii(e,t){return q.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new X1(this)}getSize(e){return q.resolve(this.size)}}class X1 extends B1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Y1{constructor(e){this.persistence=e,this.si=new ms((t=>td(t)),nd),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new ud,this.targetCount=0,this.ai=Eo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Eo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),q.waitFor(u).next((()=>o))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return q.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),q.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),q.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return q.resolve(s)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}class Tv{constructor(e,t){this.ui={},this.overlays={},this.ci=new oc(0),this.li=!1,this.li=!0,this.hi=new G1,this.referenceDelegate=e(this),this.Pi=new Y1(this),this.indexManager=new L1,this.remoteDocumentCache=(function(o){return new Q1(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new x1(t),this.Ii=new H1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new W1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new K1(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ne("MemoryPersistence","Starting transaction:",e);const o=new J1(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return q.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class J1 extends AS{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.Ri=new ud,this.Vi=null}static mi(e){return new cd(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),q.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(s=>{const o=he.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xu{constructor(e,t){this.persistence=e,this.pi=new ms((s=>PS(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=z1(this,t)}static mi(e,t){return new Xu(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?q.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(s++,u.removeEntry(h,Ee.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nu(e.data.value)),t}br(e,t,s){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return q.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hd{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=ke(),o=ke();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new hd(e,t.fromCache,s,o)}}class Z1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class eA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qw()?8:RS(zt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new Z1;return this.Ss(e,t,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(so()<=Ce.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(so()<=Ce.DEBUG&&ne("QueryEngine","Query:",oo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(so()<=Ce.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(t))):q.resolve())}ys(e,t){if(Qg(t))return q.resolve(null);let s=tr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Gu(t,null,"F"),s=tr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=ke(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const v=this.Ds(t,m);return this.Cs(t,v,h,y.readTime)?this.ys(e,Gu(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ws(e,t,s,o){return Qg(t)||o.isEqual(Ee.min())?q.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(t,u);return this.Cs(t,h,s,o)?q.resolve(null):(so()<=Ce.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(t)),this.vs(e,h,t,wS(o,Fa)).next((m=>m)))}))}Ds(e,t){let s=new vt(ev(e));return t.forEach(((o,u)=>{cc(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return so()<=Ce.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",oo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ii.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const fd="LocalStore",tA=3e8;class nA{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new et(Pe),this.xs=new ms((u=>td(u)),nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rA(i,e,t,s){return new nA(i,e,t,s)}async function Iv(i,e){const t=Ie(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let y=ke();for(const v of o){h.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of u){m.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return t.localDocuments.getDocuments(s,y).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function iA(i,e){const t=Ie(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,v,w){const A=v.batch,D=A.keys();let z=q.resolve();return D.forEach((X=>{z=z.next((()=>w.getEntry(y,X))).next((Y=>{const H=v.docVersions.get(X);Ue(H!==null,48541),Y.version.compareTo(H)<0&&(A.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),w.addEntry(Y)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(y,A)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=ke();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Sv(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sA(i,e){const t=Ie(i),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((w,A)=>{const D=o.get(A);if(!D)return;m.push(t.Pi.removeMatchingKeys(u,w.removedDocuments,A).next((()=>t.Pi.addMatchingKeys(u,w.addedDocuments,A))));let z=D.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?z=z.withResumeToken(Vt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):w.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(w.resumeToken,s)),o=o.insert(A,z),(function(Y,H,me){return Y.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=tA?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0})(D,z,w)&&m.push(t.Pi.updateTargetData(u,z))}));let y=Nr(),v=ke();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))})),m.push(oA(u,h,e.documentUpdates).next((w=>{y=w.ks,v=w.qs}))),!s.isEqual(Ee.min())){const w=t.Pi.getLastRemoteSnapshotVersion(u).next((A=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(w)}return q.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,y,v))).next((()=>y))})).then((u=>(t.Ms=o,u)))}function oA(i,e,t){let s=ke(),o=ke();return t.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=Nr();return t.forEach(((m,y)=>{const v=u.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ee.min())?(e.removeEntry(m,y.readTime),h=h.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(m,y)):ne(fd,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function aA(i,e){const t=Ie(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Jf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function lA(i,e){const t=Ie(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,q.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new pi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Df(i,e,t){const s=Ie(i),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Co(h))throw h;ne(fd,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ly(i,e,t){const s=Ie(i);let o=Ee.min(),u=ke();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,w){const A=Ie(y),D=A.xs.get(w);return D!==void 0?q.resolve(A.Ms.get(D)):A.Pi.getTargetData(v,w)})(s,h,tr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((y=>{u=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Ee.min(),t?u:ke()))).next((m=>(uA(s,GS(e),m),{documents:m,Qs:u})))))}function uA(i,e,t){let s=i.Os.get(e)||Ee.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class uy{constructor(){this.activeTargetIds=ZS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cA{constructor(){this.Mo=new uy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hA{Oo(e){}shutdown(){}}const cy="ConnectivityMonitor";class hy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(cy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(cy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Su=null;function Vf(){return Su===null?Su=(function(){return 268435456+Math.round(2147483648*Math.random())})():Su++,"0x"+Su.toString(16)}const lf="RestConnection",fA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===qu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const h=Vf(),m=this.zo(e,t.toUriEncodedString());ne(lf,`Sending RPC '${e}' ${h}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:v}=new URL(m),w=To(v);return this.Jo(e,m,y,s,w).then((A=>(ne(lf,`Received RPC '${e}' ${h}: `,A),A)),(A=>{throw go(lf,`RPC '${e}' ${h} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,t,s,o,u,h){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ao})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=fA[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class pA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ft="WebChannelConnection";class mA extends dA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const h=Vf();return new Promise(((m,y)=>{const v=new C_;v.setWithCredentials(!0),v.listenOnce(P_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ku.NO_ERROR:const A=v.getResponseJson();ne(Ft,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(A)),m(A);break;case ku.TIMEOUT:ne(Ft,`RPC '${e}' ${h} timed out`),y(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const D=v.getStatus();if(ne(Ft,`RPC '${e}' ${h} failed with status:`,D,"response text:",v.getResponseText()),D>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const X=z?.error;if(X&&X.status&&X.message){const Y=(function(me){const _e=me.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(_e)>=0?_e:$.UNKNOWN})(X.status);y(new ee(Y,X.message))}else y(new ee($.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ee($.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ne(Ft,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ne(Ft,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=Vf(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=D_(),m=N_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const w=u.join("");ne(Ft,`Creating RPC '${e}' stream ${o}: ${w}`,y);const A=h.createWebChannel(w,y);this.I_(A);let D=!1,z=!1;const X=new pA({Yo:H=>{z?ne(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(D||(ne(Ft,`Opening RPC '${e}' stream ${o} transport.`),A.open(),D=!0),ne(Ft,`RPC '${e}' stream ${o} sending:`,H),A.send(H))},Zo:()=>A.close()}),Y=(H,me,_e)=>{H.listen(me,(ve=>{try{_e(ve)}catch(Ne){setTimeout((()=>{throw Ne}),0)}}))};return Y(A,Ra.EventType.OPEN,(()=>{z||(ne(Ft,`RPC '${e}' stream ${o} transport opened.`),X.o_())})),Y(A,Ra.EventType.CLOSE,(()=>{z||(z=!0,ne(Ft,`RPC '${e}' stream ${o} transport closed`),X.a_(),this.E_(A))})),Y(A,Ra.EventType.ERROR,(H=>{z||(z=!0,go(Ft,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),X.a_(new ee($.UNAVAILABLE,"The operation could not be completed")))})),Y(A,Ra.EventType.MESSAGE,(H=>{if(!z){const me=H.data[0];Ue(!!me,16349);const _e=me,ve=_e?.error||_e[0]?.error;if(ve){ne(Ft,`RPC '${e}' stream ${o} received error:`,ve);const Ne=ve.status;let be=(function(I){const R=ft[I];if(R!==void 0)return hv(R)})(Ne),Re=ve.message;be===void 0&&(be=$.INTERNAL,Re="Unknown error status: "+Ne+" with message "+ve.message),z=!0,X.a_(new ee(be,Re)),A.close()}else ne(Ft,`RPC '${e}' stream ${o} received:`,me),X.u_(me)}})),Y(m,k_.STAT_EVENT,(H=>{H.stat===Ef.PROXY?ne(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Ef.NOPROXY&&ne(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function uf(){return typeof document<"u"?document:null}function pc(i){return new v1(i,!0)}class Av{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fy="PersistentStream";class Rv{constructor(e,t,s,o,u,h,m,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Av(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ee($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gA extends Rv{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=T1(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ee.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?nr(h.readTime):Ee.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Nf(this.serializer),t.addTarget=(function(u,h){let m;const y=h.target;if(m=Af(y)?{documents:A1(u,y)}:{query:R1(u,y).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=pv(u,h.resumeToken);const v=Cf(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ee.min())>0){m.readTime=Qu(u,h.snapshotVersion.toTimestamp());const v=Cf(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=P1(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Nf(this.serializer),t.removeTarget=e,this.q_(t)}}class yA extends Rv{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=S1(e.writeResults,e.commitTime),s=nr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Nf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>I1(this.serializer,s)))};this.q_(t)}}class _A{}class vA extends _A{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,Pf(t,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ee($.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Pf(t,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ee($.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kr(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ds="RemoteStore";class wA{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{gs(this)&&(ne(ds,"Restarting streams for network reachability change."),await(async function(y){const v=Ie(y);v.Ea.add(4),await el(v),v.Ra.set("Unknown"),v.Ea.delete(4),await mc(v)})(this))}))})),this.Ra=new EA(s,o)}}async function mc(i){if(gs(i))for(const e of i.da)await e(!0)}async function el(i){for(const e of i.da)await e(!1)}function Cv(i,e){const t=Ie(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),gd(t)?md(t):ko(t).O_()&&pd(t,e))}function dd(i,e){const t=Ie(i),s=ko(t);t.Ia.delete(e),s.O_()&&Pv(t,e),t.Ia.size===0&&(s.O_()?s.L_():gs(t)&&t.Ra.set("Unknown"))}function pd(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ko(i).Y_(e)}function Pv(i,e){i.Va.Ue(e),ko(i).Z_(e)}function md(i){i.Va=new m1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ko(i).start(),i.Ra.ua()}function gd(i){return gs(i)&&!ko(i).x_()&&i.Ia.size>0}function gs(i){return Ie(i).Ea.size===0}function kv(i){i.Va=void 0}async function TA(i){i.Ra.set("Online")}async function IA(i){i.Ia.forEach(((e,t)=>{pd(i,e)}))}async function SA(i,e){kv(i),gd(i)?(i.Ra.ha(e),md(i)):i.Ra.set("Unknown")}async function AA(i,e,t){if(i.Ra.set("Online"),e instanceof dv&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){ne(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yu(i,s)}else if(e instanceof xu?i.Va.Ze(e):e instanceof fv?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ee.min()))try{const s=await Sv(i.localStore);t.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=u.Ia.get(v);w&&u.Ia.set(v,w.withResumeToken(y.resumeToken,h))}})),m.targetMismatches.forEach(((y,v)=>{const w=u.Ia.get(y);if(!w)return;u.Ia.set(y,w.withResumeToken(Vt.EMPTY_BYTE_STRING,w.snapshotVersion)),Pv(u,y);const A=new pi(w.target,y,v,w.sequenceNumber);pd(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){ne(ds,"Failed to raise snapshot:",s),await Yu(i,s)}}async function Yu(i,e,t){if(!Co(e))throw e;i.Ea.add(1),await el(i),i.Ra.set("Offline"),t||(t=()=>Sv(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ne(ds,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await mc(i)}))}function Nv(i,e){return e().catch((t=>Yu(i,t,e)))}async function gc(i){const e=Ie(i),t=Ci(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jf;for(;RA(e);)try{const o=await aA(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,CA(e,o)}catch(o){await Yu(e,o)}Dv(e)&&Vv(e)}function RA(i){return gs(i)&&i.Ta.length<10}function CA(i,e){i.Ta.push(e);const t=Ci(i);t.O_()&&t.X_&&t.ea(e.mutations)}function Dv(i){return gs(i)&&!Ci(i).x_()&&i.Ta.length>0}function Vv(i){Ci(i).start()}async function PA(i){Ci(i).ra()}async function kA(i){const e=Ci(i);for(const t of i.Ta)e.ea(t.mutations)}async function NA(i,e,t){const s=i.Ta.shift(),o=od.from(s,e,t);await Nv(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await gc(i)}async function DA(i,e){e&&Ci(i).X_&&await(async function(s,o){if((function(h){return f1(h)&&h!==$.ABORTED})(o.code)){const u=s.Ta.shift();Ci(s).B_(),await Nv(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await gc(s)}})(i,e),Dv(i)&&Vv(i)}async function dy(i,e){const t=Ie(i);t.asyncQueue.verifyOperationInProgress(),ne(ds,"RemoteStore received new credentials");const s=gs(t);t.Ea.add(3),await el(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mc(t)}async function VA(i,e){const t=Ie(i);e?(t.Ea.delete(2),await mc(t)):e||(t.Ea.add(2),await el(t),t.Ra.set("Unknown"))}function ko(i){return i.ma||(i.ma=(function(t,s,o){const u=Ie(t);return u.sa(),new gA(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:TA.bind(null,i),t_:IA.bind(null,i),r_:SA.bind(null,i),H_:AA.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),gd(i)?md(i):i.Ra.set("Unknown")):(await i.ma.stop(),kv(i))}))),i.ma}function Ci(i){return i.fa||(i.fa=(function(t,s,o){const u=Ie(t);return u.sa(),new yA(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:PA.bind(null,i),r_:DA.bind(null,i),ta:kA.bind(null,i),na:NA.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await gc(i)):(await i.fa.stop(),i.Ta.length>0&&(ne(ds,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class yd{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,m=new yd(e,t,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _d(i,e){if(kr("AsyncQueue",`${e}: ${i}`),Co(i))return new ee($.UNAVAILABLE,`${e}: ${i}`);throw i}class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||he.comparator(t.key,s.key):(t,s)=>he.comparator(t.key,s.key),this.keyedMap=Ca(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class py{constructor(){this.ga=new et(he.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class wo{constructor(e,t,s,o,u,h,m,y,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new wo(e,t,po.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class xA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OA{constructor(){this.queries=my(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ie(t),u=o.queries;o.queries=my(),u.forEach(((h,m)=>{for(const y of m.Sa)y.onError(s)}))})(this,new ee($.ABORTED,"Firestore shutting down"))}}function my(){return new ms((i=>Z_(i)),uc)}async function xv(i,e){const t=Ie(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new xA,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=_d(h,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&vd(t)}async function Ov(i,e){const t=Ie(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function LA(i,e){const t=Ie(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&vd(t)}function MA(i,e,t){const s=Ie(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function vd(i){i.Ca.forEach((e=>{e.next()}))}var xf,gy;(gy=xf||(xf={})).Ma="default",gy.Cache="cache";class Lv{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xf.Cache}}class Mv{constructor(e){this.key=e}}class bv{constructor(e){this.key=e}}class bA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=ev(e),this.tu=new po(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new py,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,A)=>{const D=o.get(w),z=cc(this.query,A)?A:null,X=!!D&&this.mutatedKeys.has(D.key),Y=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let H=!1;D&&z?D.data.isEqual(z.data)?X!==Y&&(s.track({type:3,doc:z}),H=!0):this.su(D,z)||(s.track({type:2,doc:z}),H=!0,(y&&this.eu(z,y)>0||v&&this.eu(z,v)<0)&&(m=!0)):!D&&z?(s.track({type:0,doc:z}),H=!0):D&&!z&&(s.track({type:1,doc:D}),H=!0,(y||v)&&(m=!0)),H&&(z?(h=h.add(z),u=Y?u.add(w):u.delete(w)):(h=h.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),u=u.delete(w.key),s.track({type:1,doc:w})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,A)=>(function(z,X){const Y=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:H})}};return Y(z)-Y(X)})(w.type,A.type)||this.eu(w.doc,A.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,h.length!==0||v?{snapshot:new wo(this.query,e.tu,u,h,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new py,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new bv(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Mv(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ed="SyncEngine";class FA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class UA{constructor(e){this.key=e,this.hu=!1}}class jA{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ms((m=>Z_(m)),uc),this.Iu=new Map,this.Eu=new Set,this.du=new et(he.comparator),this.Au=new Map,this.Ru=new ud,this.Vu={},this.mu=new Map,this.fu=Eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zA(i,e,t=!0){const s=$v(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Fv(s,e,t,!0),o}async function BA(i,e){const t=$v(i);await Fv(t,e,!0,!1)}async function Fv(i,e,t,s){const o=await lA(i.localStore,tr(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await $A(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&Cv(i.remoteStore,o),m}async function $A(i,e,t,s,o){i.pu=(A,D,z)=>(async function(Y,H,me,_e){let ve=H.view.ru(me);ve.Cs&&(ve=await ly(Y.localStore,H.query,!1).then((({documents:N})=>H.view.ru(N,ve))));const Ne=_e&&_e.targetChanges.get(H.targetId),be=_e&&_e.targetMismatches.get(H.targetId)!=null,Re=H.view.applyChanges(ve,Y.isPrimaryClient,Ne,be);return _y(Y,H.targetId,Re.au),Re.snapshot})(i,A,D,z);const u=await ly(i.localStore,e,!0),h=new bA(e,u.Qs),m=h.ru(u.documents),y=Za.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),v=h.applyChanges(m,i.isPrimaryClient,y);_y(i,t,v.au);const w=new FA(e,t,h);return i.Tu.set(e,w),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),v.snapshot}async function qA(i,e,t){const s=Ie(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!uc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Df(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&dd(s.remoteStore,o.targetId),Of(s,o.targetId)})).catch(Ro)):(Of(s,o.targetId),await Df(s.localStore,o.targetId,!0))}async function HA(i,e){const t=Ie(i),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),dd(t.remoteStore,s.targetId))}async function WA(i,e,t){const s=ZA(i);try{const o=await(function(h,m){const y=Ie(h),v=Xe.now(),w=m.reduce(((z,X)=>z.add(X.key)),ke());let A,D;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let X=Nr(),Y=ke();return y.Ns.getEntries(z,w).next((H=>{X=H,X.forEach(((me,_e)=>{_e.isValidDocument()||(Y=Y.add(me))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,X))).next((H=>{A=H;const me=[];for(const _e of m){const ve=a1(_e,A.get(_e.key).overlayedDocument);ve!=null&&me.push(new Ni(_e.key,ve,H_(ve.value.mapValue),cn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,me,m)})).next((H=>{D=H;const me=H.applyToLocalDocumentSet(A,Y);return y.documentOverlayCache.saveOverlays(z,H.batchId,me)}))})).then((()=>({batchId:D.batchId,changes:nv(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,y){let v=h.Vu[h.currentUser.toKey()];v||(v=new et(Pe)),v=v.insert(m,y),h.Vu[h.currentUser.toKey()]=v})(s,o.batchId,t),await tl(s,o.changes),await gc(s.remoteStore)}catch(o){const u=_d(o,"Failed to persist write");t.reject(u)}}async function Uv(i,e){const t=Ie(i);try{const s=await sA(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Au.get(u);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ue(h.hu,14607):o.removedDocuments.size>0&&(Ue(h.hu,42227),h.hu=!1))})),await tl(t,s,e)}catch(s){await Ro(s)}}function yy(i,e,t){const s=Ie(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const y=Ie(h);y.onlineState=m;let v=!1;y.queries.forEach(((w,A)=>{for(const D of A.Sa)D.va(m)&&(v=!0)})),v&&vd(y)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function GA(i,e,t){const s=Ie(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new et(he.comparator);h=h.insert(u,jt.newNoDocument(u,Ee.min()));const m=ke().add(u),y=new dc(Ee.min(),new Map,new et(Pe),h,m);await Uv(s,y),s.du=s.du.remove(u),s.Au.delete(e),wd(s)}else await Df(s.localStore,e,!1).then((()=>Of(s,e,t))).catch(Ro)}async function KA(i,e){const t=Ie(i),s=e.batch.batchId;try{const o=await iA(t.localStore,e);zv(t,s,null),jv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await tl(t,o)}catch(o){await Ro(o)}}async function QA(i,e,t){const s=Ie(i);try{const o=await(function(h,m){const y=Ie(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return y.mutationQueue.lookupMutationBatch(v,m).next((A=>(Ue(A!==null,37113),w=A.keys(),y.mutationQueue.removeMutationBatch(v,A)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>y.localDocuments.getDocuments(v,w)))}))})(s.localStore,e);zv(s,e,t),jv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await tl(s,o)}catch(o){await Ro(o)}}function jv(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function zv(i,e,t){const s=Ie(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Of(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||Bv(i,s)}))}function Bv(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(dd(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),wd(i))}function _y(i,e,t){for(const s of t)s instanceof Mv?(i.Ru.addReference(s.key,e),XA(i,s)):s instanceof bv?(ne(Ed,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||Bv(i,s.key)):pe(19791,{wu:s})}function XA(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(ne(Ed,"New document in limbo: "+t),i.Eu.add(s),wd(i))}function wd(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new he(We.fromString(e)),s=i.fu.next();i.Au.set(s,new UA(t)),i.du=i.du.insert(t,s),Cv(i.remoteStore,new pi(tr(rd(t.path)),s,"TargetPurposeLimboResolution",oc.ce))}}async function tl(i,e,t){const s=Ie(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,y)=>{h.push(s.pu(y,e,t).then((v=>{if((v||t)&&s.isPrimaryClient){const w=v?!v.fromCache:t?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,w?"current":"not-current")}if(v){o.push(v);const w=hd.As(y.targetId,v);u.push(w)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(y,v){const w=Ie(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>q.forEach(v,(D=>q.forEach(D.Es,(z=>w.persistence.referenceDelegate.addReference(A,D.targetId,z))).next((()=>q.forEach(D.ds,(z=>w.persistence.referenceDelegate.removeReference(A,D.targetId,z)))))))))}catch(A){if(!Co(A))throw A;ne(fd,"Failed to update sequence numbers: "+A)}for(const A of v){const D=A.targetId;if(!A.fromCache){const z=w.Ms.get(D),X=z.snapshotVersion,Y=z.withLastLimboFreeSnapshotVersion(X);w.Ms=w.Ms.insert(D,Y)}}})(s.localStore,u))}async function YA(i,e){const t=Ie(i);if(!t.currentUser.isEqual(e)){ne(Ed,"User change. New user:",e.toKey());const s=await Iv(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((y=>{y.reject(new ee($.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tl(t,s.Ls)}}function JA(i,e){const t=Ie(i),s=t.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let o=ke();const u=t.Iu.get(e);if(!u)return o;for(const h of u){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function $v(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GA.bind(null,e),e.Pu.H_=LA.bind(null,e.eventManager),e.Pu.yu=MA.bind(null,e.eventManager),e}function ZA(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QA.bind(null,e),e}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rA(this.persistence,new eA,e.initialUser,this.serializer)}Cu(e){return new Tv(cd.mi,this.serializer)}Du(e){return new cA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class eR extends Ju{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ue(this.persistence.referenceDelegate instanceof Xu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new U1(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Tv((s=>Xu.mi(s,t)),this.serializer)}}class Lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YA.bind(null,this.syncEngine),await VA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OA})()}createDatastore(e){const t=pc(e.databaseInfo.databaseId),s=(function(u){return new mA(u)})(e.databaseInfo);return(function(u,h,m,y){return new vA(u,h,m,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,h,m){return new wA(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>yy(this.syncEngine,t,0)),(function(){return hy.v()?new hy:new hA})())}createSyncEngine(e,t){return(function(o,u,h,m,y,v,w){const A=new jA(o,u,h,m,y,v);return w&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ie(t);ne(ds,"RemoteStore shutting down."),s.Ea.add(5),await el(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lf.provider={build:()=>new Lf};class qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Pi="FirestoreClient";class tR{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=Yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{ne(Pi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ne(Pi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=_d(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cf(i,e){i.asyncQueue.verifyOperationInProgress(),ne(Pi,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Iv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function vy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await nR(i);ne(Pi,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>dy(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>dy(e.remoteStore,o))),i._onlineComponents=e}async function nR(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ne(Pi,"Using user provided OfflineComponentProvider");try{await cf(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),await cf(i,new Ju)}}else ne(Pi,"Using default OfflineComponentProvider"),await cf(i,new eR(void 0));return i._offlineComponents}async function Hv(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ne(Pi,"Using user provided OnlineComponentProvider"),await vy(i,i._uninitializedComponentsProvider._online)):(ne(Pi,"Using default OnlineComponentProvider"),await vy(i,new Lf))),i._onlineComponents}function rR(i){return Hv(i).then((e=>e.syncEngine))}async function Mf(i){const e=await Hv(i),t=e.eventManager;return t.onListen=zA.bind(null,e.syncEngine),t.onUnlisten=qA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HA.bind(null,e.syncEngine),t}function iR(i,e,t={}){const s=new Ei;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,y,v){const w=new qv({next:D=>{w.Nu(),h.enqueueAndForget((()=>Ov(u,A))),D.fromCache&&y.source==="server"?v.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(D)},error:D=>v.reject(D)}),A=new Lv(m,w,{includeMetadataChanges:!0,qa:!0});return xv(u,A)})(await Mf(i),i.asyncQueue,e,t,s))),s.promise}function Wv(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Ey=new Map;const Gv="firestore.googleapis.com",wy=!0;class Ty{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gv,this.ssl=wy}else this.host=e.host,this.ssl=e.ssl??wy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b1)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ES("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wv(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new cS;switch(s.type){case"firstParty":return new pS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Ey.get(t);s&&(ne("ComponentProvider","Removing Datastore"),Ey.delete(t),s.terminate())})(this),Promise.resolve()}}function sR(i,e,t,s={}){i=er(i,yc);const o=To(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(jy(`https://${m}`),zy("Firestore",!0)),u.host!==Gv&&u.host!==m&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:m,ssl:o,emulatorOptions:s};if(!us(y,h)&&(i._setSettings(y),s.mockUserToken)){let v,w;if(typeof s.mockUserToken=="string")v=s.mockUserToken,w=Ut.MOCK_USER;else{v=Lw(s.mockUserToken,i._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ut(A)}i._authCredentials=new hS(new x_(v,w))}}class Vr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Vr(this.firestore,e,this._query)}}class mt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ya(t,mt._jsonSchema))return new mt(e,s||null,new he(We.fromString(t.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:pt("string",mt._jsonSchemaVersion),referencePath:pt("string")};class wi extends Vr{constructor(e,t,s){super(e,t,rd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new he(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function Aa(i,e,...t){if(i=St(i),O_("collection","path",e),i instanceof yc){const s=We.fromString(e,...t);return Lg(s),new wi(i,null,s)}{if(!(i instanceof mt||i instanceof wi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(We.fromString(e,...t));return Lg(s),new wi(i.firestore,null,s)}}function bf(i,e,...t){if(i=St(i),arguments.length===1&&(e=Yf.newId()),O_("doc","path",e),i instanceof yc){const s=We.fromString(e,...t);return Og(s),new mt(i,null,new he(s))}{if(!(i instanceof mt||i instanceof wi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(We.fromString(e,...t));return Og(s),new mt(i.firestore,i instanceof wi?i.converter:null,new he(s))}}const Iy="AsyncQueue";class Sy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Av(this,"async_queue_retry"),this._c=()=>{const s=uf();s&&ne(Iy,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ei;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Co(e))throw e;ne(Iy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,kr("INTERNAL UNHANDLED ERROR: ",Ay(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=yd.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&pe(47125,{Pc:Ay(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ay(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function Ry(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class ps extends yc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Sy,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sy(e),this._firestoreClient=void 0,await e}}}function oR(i,e){const t=typeof i=="object"?i:Hy(),s=typeof i=="string"?i:qu,o=Bf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=xw("firestore");u&&sR(o,...u)}return o}function _c(i){if(i._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||aR(i),i._firestoreClient}function aR(i){const e=i._freezeSettings(),t=(function(o,u,h,m){return new DS(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Wv(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new tR(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(Vt.fromBase64String(e))}catch(t){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ya(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:pt("string",vn._jsonSchemaVersion),bytes:pt("string")};class vc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ec{constructor(e){this._methodName=e}}class rr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rr._jsonSchemaVersion}}static fromJSON(e){if(Ya(e,rr._jsonSchema))return new rr(e.latitude,e.longitude)}}rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:pt("string",rr._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};class ir{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ya(e,ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ir(e.vectorValues);throw new ee($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ir._jsonSchemaVersion="firestore/vectorValue/1.0",ir._jsonSchema={type:pt("string",ir._jsonSchemaVersion),vectorValues:pt("object")};const lR=/^__.*__$/;class uR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ja(e,this.data,t,this.fieldTransforms)}}class Kv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:i})}}class Td{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Td({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Qv(this.Ac)&&lR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||pc(e)}Cc(e,t,s,o=!1){return new Td({Ac:e,methodName:t,Dc:s,path:Dt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wc(i){const e=i._freezeSettings(),t=pc(i._databaseId);return new cR(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Id(i,e,t,s,o,u={}){const h=i.Cc(u.merge||u.mergeFields?2:0,e,t,o);Ad("Data must be an object, but it was:",h,s);const m=Xv(s,h);let y,v;if(u.merge)y=new un(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const w=[];for(const A of u.mergeFields){const D=Ff(e,A,t);if(!h.contains(D))throw new ee($.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);Jv(w,D)||w.push(D)}y=new un(w),v=h.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,v=h.fieldTransforms;return new uR(new Jt(m),y,v)}class Tc extends Ec{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tc}}class Sd extends Ec{_toFieldTransform(e){return new r1(e.path,new $a)}isEqual(e){return e instanceof Sd}}function hR(i,e,t,s){const o=i.Cc(1,e,t);Ad("Data must be an object, but it was:",o,s);const u=[],h=Jt.empty();ki(s,((y,v)=>{const w=Rd(e,y,t);v=St(v);const A=o.yc(w);if(v instanceof Tc)u.push(w);else{const D=nl(v,A);D!=null&&(u.push(w),h.set(w,D))}}));const m=new un(u);return new Kv(h,m,o.fieldTransforms)}function fR(i,e,t,s,o,u){const h=i.Cc(1,e,t),m=[Ff(e,s,t)],y=[o];if(u.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<u.length;D+=2)m.push(Ff(e,u[D])),y.push(u[D+1]);const v=[],w=Jt.empty();for(let D=m.length-1;D>=0;--D)if(!Jv(v,m[D])){const z=m[D];let X=y[D];X=St(X);const Y=h.yc(z);if(X instanceof Tc)v.push(z);else{const H=nl(X,Y);H!=null&&(v.push(z),w.set(z,H))}}const A=new un(v);return new Kv(w,A,h.fieldTransforms)}function dR(i,e,t,s=!1){return nl(t,i.Cc(s?4:3,e))}function nl(i,e){if(Yv(i=St(i)))return Ad("Unsupported field value:",e,i),Xv(i,e);if(i instanceof Ec)return(function(s,o){if(!Qv(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let y=nl(m,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return e1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Xe.fromDate(s);return{timestampValue:Qu(o.serializer,u)}}if(s instanceof Xe){const u=new Xe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qu(o.serializer,u)}}if(s instanceof rr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vn)return{bytesValue:pv(o.serializer,s._byteString)};if(s instanceof mt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ld(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ir)return(function(h,m){return{mapValue:{fields:{[$_]:{stringValue:q_},[Hu]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return id(m.serializer,v)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${sc(s)}`)})(i,e)}function Xv(i,e){const t={};return b_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(i,((s,o)=>{const u=nl(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function Yv(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Xe||i instanceof rr||i instanceof vn||i instanceof mt||i instanceof Ec||i instanceof ir)}function Ad(i,e,t){if(!Yv(t)||!L_(t)){const s=sc(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Ff(i,e,t){if((e=St(e))instanceof vc)return e._internalPath;if(typeof e=="string")return Rd(i,e);throw Zu("Field path arguments must be of type string or ",i,!1,void 0,t)}const pR=new RegExp("[~\\*/\\[\\]]");function Rd(i,e,t){if(e.search(pR)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Zu(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||h)&&(y+=" (found",u&&(y+=` in field ${s}`),h&&(y+=` in document ${o}`),y+=")"),new ee($.INVALID_ARGUMENT,m+i+y)}function Jv(i,e){return i.some((t=>t.isEqual(e)))}class Zv{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mR extends Zv{data(){return super.data()}}function Cd(i,e){return typeof e=="string"?Rd(i,e):e instanceof vc?e._internalPath:e._delegate._internalPath}function eE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pd{}class kd extends Pd{}function Cy(i,e,...t){let s=[];e instanceof Pd&&s.push(e),s=s.concat(t),(function(u){const h=u.filter((y=>y instanceof Dd)).length,m=u.filter((y=>y instanceof Nd)).length;if(h>1||h>0&&m>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Nd extends kd{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Nd(e,t,s)}_apply(e){const t=this._parse(e);return tE(e._query,t),new Vr(e.firestore,e.converter,Rf(e._query,t))}_parse(e){const t=wc(e.firestore);return(function(u,h,m,y,v,w,A){let D;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Ny(A,w);const X=[];for(const Y of A)X.push(ky(y,u,Y));D={arrayValue:{values:X}}}else D=ky(y,u,A)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Ny(A,w),D=dR(m,h,A,w==="in"||w==="not-in");return dt.create(v,w,D)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Dd extends Pd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dd(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const y of m)tE(h,y),h=Rf(h,y)})(e._query,t),new Vr(e.firestore,e.converter,Rf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vd extends kd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vd(e,t)}_apply(e){const t=(function(o,u,h){if(o.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ba(u,h)})(e._query,this._field,this._direction);return new Vr(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new Po(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Py(i,e="asc"){const t=e,s=Cd("orderBy",i);return Vd._create(s,t)}class xd extends kd{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xd(e,t,s)}_apply(e){return new Vr(e.firestore,e.converter,Gu(e._query,this._limit,this._limitType))}}function gR(i){return xd._create("limit",i,"F")}function ky(i,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!J_(e)&&t.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(We.fromString(t));if(!he.isDocumentKey(s))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $g(i,new he(s))}if(t instanceof mt)return $g(i,t._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sc(t)}.`)}function Ny(i,e){if(!Array.isArray(i)||i.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tE(i,e){const t=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class yR{convertValue(e,t="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ki(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[Hu].arrayValue?.values?.map((s=>at(s.doubleValue)));return new ir(t)}convertGeoPoint(e){return new rr(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=lc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const t=Si(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=We.fromString(e);Ue(Ev(s),9688,{name:e});const o=new ja(s.get(1),s.get(3)),u=new he(s.popFirst(5));return o.isEqual(t)||kr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Od(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class as extends Zv{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Cd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=as._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}as._jsonSchemaVersion="firestore/documentSnapshot/1.0",as._jsonSchema={type:pt("string",as._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class Ou extends as{data(e={}){return super.data(e)}}class ls{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ka(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ou(this._firestore,this._userDataWriter,s.key,s,new ka(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const y=new Ou(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ka(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const y=new Ou(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ka(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:_R(m.type),doc:y,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ls._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _R(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:i})}}ls._jsonSchemaVersion="firestore/querySnapshot/1.0",ls._jsonSchema={type:pt("string",ls._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class Ld extends yR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function vR(i){i=er(i,Vr);const e=er(i.firestore,ps),t=_c(e),s=new Ld(e);return eE(i._query),iR(t,i._query).then((o=>new ls(e,s,i,o)))}function ER(i,e,t){i=er(i,mt);const s=er(i.firestore,ps),o=Od(i.converter,e,t);return Md(s,[Id(wc(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,cn.none())])}function wR(i,e){const t=er(i.firestore,ps),s=bf(i),o=Od(i.converter,e);return Md(t,[Id(wc(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,cn.exists(!1))]).then((()=>s))}function Dy(i,...e){i=St(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ry(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ry(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let u,h,m;if(i instanceof mt)h=er(i.firestore,ps),m=rd(i._key.path),u={next:y=>{e[s]&&e[s](TR(h,i,y))},error:e[s+1],complete:e[s+2]};else{const y=er(i,Vr);h=er(y.firestore,ps),m=y._query;const v=new Ld(h);u={next:w=>{e[s]&&e[s](new ls(h,v,y,w))},error:e[s+1],complete:e[s+2]},eE(i._query)}return(function(v,w,A,D){const z=new qv(D),X=new Lv(w,z,A);return v.asyncQueue.enqueueAndForget((async()=>xv(await Mf(v),X))),()=>{z.Nu(),v.asyncQueue.enqueueAndForget((async()=>Ov(await Mf(v),X)))}})(_c(h),m,o,u)}function Md(i,e){return(function(s,o){const u=new Ei;return s.asyncQueue.enqueueAndForget((async()=>WA(await rR(s),o,u))),u.promise})(_c(i),e)}function TR(i,e,t){const s=t.docs.get(e._key),o=new Ld(i);return new as(i,o,e._key,s,new ka(t.hasPendingWrites,t.fromCache),e.converter)}class IR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wc(e)}set(e,t,s){this._verifyNotCommitted();const o=hf(e,this._firestore),u=Od(o.converter,t,s),h=Id(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,cn.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const u=hf(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof vc?fR(this._dataReader,"WriteBatch.update",u._key,t,s,o):hR(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hf(e,this._firestore);return this._mutations=this._mutations.concat(new sd(t._key,cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(i,e){if((i=St(i)).firestore!==e)throw new ee($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Vy(){return new Sd("serverTimestamp")}function SR(i){return _c(i=er(i,ps)),new IR(i,(e=>Md(i,e)))}(function(e,t=!0){(function(o){Ao=o})(Io),mo(new cs("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new ps(new fS(s.getProvider("auth-internal")),new mS(h,s.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(v.options.projectId,w)})(h,o),h);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),yi(Ng,Dg,e),yi(Ng,Dg,"esm2020")})();const AR={apiKey:"AIzaSyACbU7QPgmUkvn1cmIIytlUK8FI0xBHhmE",authDomain:"mene-bot.firebaseapp.com",projectId:"mene-bot",storageBucket:"mene-bot.firebasestorage.app",messagingSenderId:"535679609146",appId:"1:535679609146:web:750fcd7b478d93bcae8803"},RR="AIzaSyCFQ8_o0cZngIAlfKzk41mm0PycvogDHFM",CR="gemini-2.5-flash-preview-09-2025",PR=`https://generativelanguage.googleapis.com/v1beta/models/${CR}:generateContent`;function kR(i,e){let t=null,s=[],o=0;const u=e.map(h=>({role:h.sender==="user"?"user":"model",parts:[{text:h.text}]}));return{async next(){if(t===null){const m={contents:[...u,{role:"user",parts:[{text:i}]}],systemInstruction:{parts:[{text:"You are Mene. Keep responses short and friendly."}]}},y=await fetch(PR,{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":RR},body:JSON.stringify(m)});if(!y.ok){const w=await y.json();throw new Error(`API Error ${y.status}: ${w?.error?.message||"Unknown error"}`)}t=(await y.json())?.candidates?.[0]?.content?.parts?.[0]?.text||"",s=t.split(/(\s+)/).filter(Boolean)}return o>=s.length?{done:!0,value:t}:{done:!1,value:s[o++]}},[Symbol.asyncIterator](){return this}}}const is="mene_last_session",NR=i=>{i.current?.scrollIntoView({behavior:"smooth"})};function DR(){const[i,e]=ot.useState(null),[t,s]=ot.useState(null),[o,u]=ot.useState(null),[h,m]=ot.useState(!1),[y,v]=ot.useState([]),[w,A]=ot.useState(localStorage.getItem(is)||null),[D,z]=ot.useState([]),[X,Y]=ot.useState(""),[H,me]=ot.useState(!1),[_e,ve]=ot.useState(""),[Ne,be]=ot.useState(window.innerWidth>=768),[Re,N]=ot.useState(!1),I=ot.useRef(null),R=ot.useRef(null);ot.useEffect(()=>{try{const B=qy(AR),P=oR(B),j=lS(B);e(P),s(j);const le=YI(j,async ue=>{ue||await HI(j),u(j.currentUser?.uid),m(!0)});return()=>le()}catch(B){console.error("Firebase init error:",B),ve("Firebase initialization failed.")}},[]),ot.useEffect(()=>{if(!i||!o)return;const B=Aa(i,"users",o,"sessions"),P=Cy(B,Py("createdAt","desc")),j=Dy(P,le=>{const ue=le.docs.map(ae=>({id:ae.id,...ae.data()}));v(ue),!w&&ue.length>0&&(A(ue[0].id),localStorage.setItem(is,ue[0].id)),ue.length===0&&x()});return()=>j()},[i,o]),ot.useEffect(()=>{if(!i||!o||!w){z([]);return}const B=Aa(i,"users",o,"sessions",w,"messages"),P=Cy(B,Py("createdAt","asc"),gR(50)),j=Dy(P,le=>{const ue=le.docs.map(ae=>({id:ae.id,sender:ae.data().sender,text:ae.data().text}));z(ue),NR(R)});return()=>j()},[i,o,w]);const x=ot.useCallback(async()=>{if(!i||!o)return;const B=Aa(i,"users",o,"sessions"),P=bf(B);await ER(P,{name:"New Chat",createdAt:Vy()}),A(P.id),localStorage.setItem(is,P.id),be(!1)},[i,o]),k=async B=>{if(!i||!o||!window.confirm("Delete this conversation?"))return;const P=bf(i,"users",o,"sessions",B),j=Aa(i,"users",o,"sessions",B,"messages"),le=SR(i);(await vR(j)).forEach(we=>le.delete(we.ref)),le.delete(P),await le.commit();const ae=y.filter(we=>we.id!==B);ae.length>0?(A(ae[0].id),localStorage.setItem(is,ae[0].id)):(A(null),localStorage.removeItem(is),x())},O=async(B,P)=>{if(!i||!o||!w)return;const j=Aa(i,"users",o,"sessions",w,"messages");await wR(j,{sender:B,text:P,createdAt:Vy()})},S=ot.useCallback(async(B=null)=>{let P=B||X.trim();if(!P)return;Y(""),me(!0),ve(""),await O("user",P);let j="";const le=Sw();z(ae=>[...ae,{id:le,sender:"bot",text:""}]),console.log("Sending request to Gemini...");const ue=kR(P,D);try{for await(const ae of ue)j+=ae,z(we=>we.map(Ve=>Ve.id===le?{...Ve,text:j}:Ve))}catch(ae){j="Error generating response.",console.error("The CAUGHT API Error:",ae)}me(!1),await O("bot",j)},[X,D,w,i,o]);ot.useEffect(()=>{if(!("webkitSpeechRecognition"in window))return;const B=new window.webkitSpeechRecognition;B.continuous=!1,B.interimResults=!1,B.lang="en-US",B.onresult=P=>{const j=P.results[0][0].transcript;S(j)},B.onerror=P=>console.error("STT error:",P.error),I.current=B,N(!0)},[]);const ze=()=>{if(I.current)try{I.current.start()}catch{}},lt=B=>{if(!window.speechSynthesis)return;const P=new SpeechSynthesisUtterance(B);P.lang="en-US",speechSynthesis.speak(P)},gt=({sessions:B,currentSessionId:P,switchSession:j,createSession:le,deleteSession:ue})=>Ae.jsxs("div",{className:"w-64 h-full bg-gray-50 border-r border-gray-200 p-4 flex flex-col",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ae.jsx("h2",{className:"text-lg font-bold",children:"Chats"}),Ae.jsx("button",{className:"bg-green-500 text-white px-2 py-1 rounded",onClick:le,children:"+"})]}),Ae.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:B.map(ae=>Ae.jsx("div",{onClick:()=>j(ae.id),className:`p-3 rounded cursor-pointer ${ae.id===P?"bg-green-200 font-semibold":"bg-white hover:bg-gray-200"}`,children:Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("span",{children:ae.name}),Ae.jsx("button",{className:"text-red-600",onClick:we=>{we.stopPropagation(),ue(ae.id)},children:""})]})},ae.id))})]}),qe=()=>Ae.jsxs("div",{className:"p-4 bg-green-600 text-white flex justify-between items-center shadow",children:[Ae.jsx("button",{className:"md:hidden p-2 bg-green-700 rounded",onClick:()=>be(!Ne),children:""}),Ae.jsx("h1",{className:"font-bold text-lg",children:"Mene AI"}),Ae.jsxs("div",{className:"hidden md:block text-sm opacity-75",children:["Session: ",y.find(B=>B.id===w)?.name||""]})]}),Z=({msg:B,speak:P})=>{const j=B.sender==="user";return Ae.jsx("div",{className:`flex w-full mb-3 ${j?"justify-end":"justify-start"}`,children:Ae.jsxs("div",{className:`
                    max-w-[80%] px-4 py-2 rounded-2xl shadow 
                    ${j?"bg-green-600 text-white rounded-br-none":"bg-gray-100 text-gray-900 rounded-bl-none"}
                `,children:[Ae.jsx("p",{className:"whitespace-pre-wrap",children:B.text}),!j&&Ae.jsx("button",{className:"mt-1 text-xs text-green-600 underline",onClick:()=>P(B.text),children:" Listen"})]})})},ce=()=>Ae.jsx("div",{className:"flex justify-start mb-3",children:Ae.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-2xl rounded-bl-none text-gray-600",children:"typing"})});return Ae.jsxs("div",{className:"h-screen w-screen flex flex-col bg-white",children:[Ae.jsx(qe,{}),Ae.jsxs("div",{className:"flex flex-1 h-full overflow-hidden",children:[Ae.jsx("div",{className:"hidden md:block",children:Ae.jsx(gt,{sessions:y,currentSessionId:w,switchSession:B=>{A(B),localStorage.setItem(is,B)},createSession:x,deleteSession:k})}),Ne&&Ae.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-40 z-40",children:Ae.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-64 bg-white shadow z-50",children:Ae.jsx(gt,{sessions:y,currentSessionId:w,switchSession:B=>{A(B),be(!1),localStorage.setItem(is,B)},createSession:()=>{x(),be(!1)},deleteSession:k})})}),Ae.jsxs("div",{className:"flex flex-col flex-1 h-full bg-white",children:[Ae.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-24",children:[D.map(B=>Ae.jsx(Z,{msg:B,speak:lt},B.id)),H&&Ae.jsx(ce,{}),Ae.jsx("div",{ref:R})]}),Ae.jsxs("div",{className:"absolute bottom-0 left-0 right-0 border-t bg-white p-3 flex items-center space-x-2",children:[Ae.jsx("button",{onClick:ze,disabled:!Re,className:"p-3 bg-green-600 text-white rounded-full shadow",title:"Hold to speak",children:""}),Ae.jsx("input",{type:"text",placeholder:"Message Mene...",className:"flex-1 px-4 py-3 border rounded-full bg-gray-50 focus:outline-none",value:X,onChange:B=>Y(B.target.value),onKeyDown:B=>{B.key==="Enter"&&S()}}),Ae.jsx("button",{onClick:()=>S(),className:"px-4 py-3 bg-green-600 text-white rounded-full shadow",children:""})]})]})]})]})}_w.createRoot(document.getElementById("root")).render(Ae.jsx(hw.StrictMode,{children:Ae.jsx(DR,{})}));
